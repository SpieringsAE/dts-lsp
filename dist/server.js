"use strict";var rN=Object.create;var bp=Object.defineProperty;var sN=Object.getOwnPropertyDescriptor;var oN=Object.getOwnPropertyNames;var aN=Object.getPrototypeOf,cN=Object.prototype.hasOwnProperty;var C=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var lN=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of oN(e))!cN.call(n,r)&&r!==t&&bp(n,r,{get:()=>e[r],enumerable:!(i=sN(e,r))||i.enumerable});return n};var X=(n,e,t)=>(t=n!=null?rN(aN(n)):{},lN(e||!n||!n.__esModule?bp(t,"default",{value:n,enumerable:!0}):t,n));var Fo=C(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.thenable=Ve.typedArray=Ve.stringArray=Ve.array=Ve.func=Ve.error=Ve.number=Ve.string=Ve.boolean=void 0;function uN(n){return n===!0||n===!1}Ve.boolean=uN;function Tp(n){return typeof n=="string"||n instanceof String}Ve.string=Tp;function fN(n){return typeof n=="number"||n instanceof Number}Ve.number=fN;function dN(n){return n instanceof Error}Ve.error=dN;function vp(n){return typeof n=="function"}Ve.func=vp;function Sp(n){return Array.isArray(n)}Ve.array=Sp;function hN(n){return Sp(n)&&n.every(e=>Tp(e))}Ve.stringArray=hN;function pN(n,e){return Array.isArray(n)&&n.every(e)}Ve.typedArray=pN;function mN(n){return n&&vp(n.then)}Ve.thenable=mN});var tr=C(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.stringArray=ft.array=ft.func=ft.error=ft.number=ft.string=ft.boolean=void 0;function gN(n){return n===!0||n===!1}ft.boolean=gN;function kp(n){return typeof n=="string"||n instanceof String}ft.string=kp;function yN(n){return typeof n=="number"||n instanceof Number}ft.number=yN;function bN(n){return n instanceof Error}ft.error=bN;function TN(n){return typeof n=="function"}ft.func=TN;function Ep(n){return Array.isArray(n)}ft.array=Ep;function vN(n){return Ep(n)&&n.every(e=>kp(e))}ft.stringArray=vN});var Eu=C(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.Message=Y.NotificationType9=Y.NotificationType8=Y.NotificationType7=Y.NotificationType6=Y.NotificationType5=Y.NotificationType4=Y.NotificationType3=Y.NotificationType2=Y.NotificationType1=Y.NotificationType0=Y.NotificationType=Y.RequestType9=Y.RequestType8=Y.RequestType7=Y.RequestType6=Y.RequestType5=Y.RequestType4=Y.RequestType3=Y.RequestType2=Y.RequestType1=Y.RequestType=Y.RequestType0=Y.AbstractMessageSignature=Y.ParameterStructures=Y.ResponseError=Y.ErrorCodes=void 0;var Di=tr(),Zl;(function(n){n.ParseError=-32700,n.InvalidRequest=-32600,n.MethodNotFound=-32601,n.InvalidParams=-32602,n.InternalError=-32603,n.jsonrpcReservedErrorRangeStart=-32099,n.serverErrorStart=-32099,n.MessageWriteError=-32099,n.MessageReadError=-32098,n.PendingResponseRejected=-32097,n.ConnectionInactive=-32096,n.ServerNotInitialized=-32002,n.UnknownErrorCode=-32001,n.jsonrpcReservedErrorRangeEnd=-32e3,n.serverErrorEnd=-32e3})(Zl||(Y.ErrorCodes=Zl={}));var eu=class n extends Error{constructor(e,t,i){super(t),this.code=Di.number(e)?e:Zl.UnknownErrorCode,this.data=i,Object.setPrototypeOf(this,n.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Y.ResponseError=eu;var _t=class n{constructor(e){this.kind=e}static is(e){return e===n.auto||e===n.byName||e===n.byPosition}toString(){return this.kind}};Y.ParameterStructures=_t;_t.auto=new _t("auto");_t.byPosition=new _t("byPosition");_t.byName=new _t("byName");var Re=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return _t.auto}};Y.AbstractMessageSignature=Re;var tu=class extends Re{constructor(e){super(e,0)}};Y.RequestType0=tu;var nu=class extends Re{constructor(e,t=_t.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Y.RequestType=nu;var iu=class extends Re{constructor(e,t=_t.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Y.RequestType1=iu;var ru=class extends Re{constructor(e){super(e,2)}};Y.RequestType2=ru;var su=class extends Re{constructor(e){super(e,3)}};Y.RequestType3=su;var ou=class extends Re{constructor(e){super(e,4)}};Y.RequestType4=ou;var au=class extends Re{constructor(e){super(e,5)}};Y.RequestType5=au;var cu=class extends Re{constructor(e){super(e,6)}};Y.RequestType6=cu;var lu=class extends Re{constructor(e){super(e,7)}};Y.RequestType7=lu;var uu=class extends Re{constructor(e){super(e,8)}};Y.RequestType8=uu;var fu=class extends Re{constructor(e){super(e,9)}};Y.RequestType9=fu;var du=class extends Re{constructor(e,t=_t.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Y.NotificationType=du;var hu=class extends Re{constructor(e){super(e,0)}};Y.NotificationType0=hu;var pu=class extends Re{constructor(e,t=_t.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Y.NotificationType1=pu;var mu=class extends Re{constructor(e){super(e,2)}};Y.NotificationType2=mu;var gu=class extends Re{constructor(e){super(e,3)}};Y.NotificationType3=gu;var yu=class extends Re{constructor(e){super(e,4)}};Y.NotificationType4=yu;var bu=class extends Re{constructor(e){super(e,5)}};Y.NotificationType5=bu;var Tu=class extends Re{constructor(e){super(e,6)}};Y.NotificationType6=Tu;var vu=class extends Re{constructor(e){super(e,7)}};Y.NotificationType7=vu;var Su=class extends Re{constructor(e){super(e,8)}};Y.NotificationType8=Su;var ku=class extends Re{constructor(e){super(e,9)}};Y.NotificationType9=ku;var Np;(function(n){function e(r){let s=r;return s&&Di.string(s.method)&&(Di.string(s.id)||Di.number(s.id))}n.isRequest=e;function t(r){let s=r;return s&&Di.string(s.method)&&r.id===void 0}n.isNotification=t;function i(r){let s=r;return s&&(s.result!==void 0||!!s.error)&&(Di.string(s.id)||Di.number(s.id)||s.id===null)}n.isResponse=i})(Np||(Y.Message=Np={}))});var wu=C(Wn=>{"use strict";var wp;Object.defineProperty(Wn,"__esModule",{value:!0});Wn.LRUCache=Wn.LinkedMap=Wn.Touch=void 0;var dt;(function(n){n.None=0,n.First=1,n.AsOld=n.First,n.Last=2,n.AsNew=n.Last})(dt||(Wn.Touch=dt={}));var Bo=class{constructor(){this[wp]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=dt.None){let i=this._map.get(e);if(i)return t!==dt.None&&this.touch(i,t),i.value}set(e,t,i=dt.None){let r=this._map.get(e);if(r)r.value=t,i!==dt.None&&this.touch(r,i);else{switch(r={key:e,value:t,next:void 0,previous:void 0},i){case dt.None:this.addItemLast(r);break;case dt.First:this.addItemFirst(r);break;case dt.Last:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let i=this._state,r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){let e=this._state,t=this._head,i={[Symbol.iterator]:()=>i,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let r={value:t.key,done:!1};return t=t.next,r}else return{value:void 0,done:!0}}};return i}values(){let e=this._state,t=this._head,i={[Symbol.iterator]:()=>i,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let r={value:t.value,done:!1};return t=t.next,r}else return{value:void 0,done:!0}}};return i}entries(){let e=this._state,t=this._head,i={[Symbol.iterator]:()=>i,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let r={value:[t.key,t.value],done:!1};return t=t.next,r}else return{value:void 0,done:!0}}};return i}[(wp=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==dt.First&&t!==dt.Last)){if(t===dt.First){if(e===this._head)return;let i=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(i.previous=r,r.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===dt.Last){if(e===this._tail)return;let i=e.next,r=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=r,r.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(let[t,i]of e)this.set(t,i)}};Wn.LinkedMap=Bo;var Nu=class extends Bo{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=dt.AsNew){return super.get(e,t)}peek(e){return super.get(e,dt.None)}set(e,t){return super.set(e,t,dt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Wn.LRUCache=Nu});var Pp=C(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.Disposable=void 0;var _p;(function(n){function e(t){return{dispose:t}}n.create=e})(_p||(jo.Disposable=_p={}))});var Vn=C(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});var _u;function Pu(){if(_u===void 0)throw new Error("No runtime abstraction layer installed");return _u}(function(n){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");_u=t}n.install=e})(Pu||(Pu={}));Du.default=Pu});var ir=C(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.Emitter=nr.Event=void 0;var SN=Vn(),Dp;(function(n){let e={dispose(){}};n.None=function(){return e}})(Dp||(nr.Event=Dp={}));var Ru=class{add(e,t=null,i){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(i)&&i.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let i=!1;for(let r=0,s=this._callbacks.length;r<s;r++)if(this._callbacks[r]===e)if(this._contexts[r]===t){this._callbacks.splice(r,1),this._contexts.splice(r,1);return}else i=!0;if(i)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],i=this._callbacks.slice(0),r=this._contexts.slice(0);for(let s=0,o=i.length;s<o;s++)try{t.push(i[s].apply(r[s],e))}catch(a){(0,SN.default)().console.error(a)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Uo=class n{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,i)=>{this._callbacks||(this._callbacks=new Ru),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let r={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),r.dispose=n._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(i)&&i.push(r),r}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};nr.Emitter=Uo;Uo._noop=function(){}});var Vo=C(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.CancellationTokenSource=rr.CancellationToken=void 0;var kN=Vn(),EN=tr(),Cu=ir(),$o;(function(n){n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Cu.Event.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Cu.Event.None});function e(t){let i=t;return i&&(i===n.None||i===n.Cancelled||EN.boolean(i.isCancellationRequested)&&!!i.onCancellationRequested)}n.is=e})($o||(rr.CancellationToken=$o={}));var NN=Object.freeze(function(n,e){let t=(0,kN.default)().timer.setTimeout(n.bind(e),0);return{dispose(){t.dispose()}}}),Wo=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?NN:(this._emitter||(this._emitter=new Cu.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Ou=class{get token(){return this._token||(this._token=new Wo),this._token}cancel(){this._token?this._token.cancel():this._token=$o.Cancelled}dispose(){this._token?this._token instanceof Wo&&this._token.dispose():this._token=$o.None}};rr.CancellationTokenSource=Ou});var Rp=C(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.SharedArrayReceiverStrategy=sr.SharedArraySenderStrategy=void 0;var wN=Vo(),as;(function(n){n.Continue=0,n.Cancelled=1})(as||(as={}));var Au=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let t=new SharedArrayBuffer(4),i=new Int32Array(t,0,1);i[0]=as.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){let i=this.buffers.get(t);if(i===void 0)return;let r=new Int32Array(i,0,1);Atomics.store(r,0,as.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};sr.SharedArraySenderStrategy=Au;var Iu=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===as.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Lu=class{constructor(e){this.token=new Iu(e)}cancel(){}dispose(){}},xu=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let t=e.$cancellationData;return t===void 0?new wN.CancellationTokenSource:new Lu(t)}};sr.SharedArrayReceiverStrategy=xu});var qu=C(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.Semaphore=void 0;var _N=Vn(),Mu=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,i)=>{this._waiting.push({thunk:e,resolve:t,reject:i}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,_N.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(i=>{this._active--,e.resolve(i),this.runNext()},i=>{this._active--,e.reject(i),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};Ho.Semaphore=Mu});var Op=C(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.ReadableStreamMessageReader=Hn.AbstractMessageReader=Hn.MessageReader=void 0;var Bu=Vn(),or=tr(),Fu=ir(),PN=qu(),Cp;(function(n){function e(t){let i=t;return i&&or.func(i.listen)&&or.func(i.dispose)&&or.func(i.onError)&&or.func(i.onClose)&&or.func(i.onPartialMessage)}n.is=e})(Cp||(Hn.MessageReader=Cp={}));var Yo=class{constructor(){this.errorEmitter=new Fu.Emitter,this.closeEmitter=new Fu.Emitter,this.partialMessageEmitter=new Fu.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${or.string(e.message)?e.message:"unknown"}`)}};Hn.AbstractMessageReader=Yo;var ju;(function(n){function e(t){let i,r,s,o=new Map,a,c=new Map;if(t===void 0||typeof t=="string")i=t??"utf-8";else{if(i=t.charset??"utf-8",t.contentDecoder!==void 0&&(s=t.contentDecoder,o.set(s.name,s)),t.contentDecoders!==void 0)for(let l of t.contentDecoders)o.set(l.name,l);if(t.contentTypeDecoder!==void 0&&(a=t.contentTypeDecoder,c.set(a.name,a)),t.contentTypeDecoders!==void 0)for(let l of t.contentTypeDecoders)c.set(l.name,l)}return a===void 0&&(a=(0,Bu.default)().applicationJson.decoder,c.set(a.name,a)),{charset:i,contentDecoder:s,contentDecoders:o,contentTypeDecoder:a,contentTypeDecoders:c}}n.fromOptions=e})(ju||(ju={}));var Uu=class extends Yo{constructor(e,t){super(),this.readable=e,this.options=ju.fromOptions(t),this.buffer=(0,Bu.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new PN.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(i=>{this.onData(i)});return this.readable.onError(i=>this.fireError(i)),this.readable.onClose(()=>this.fireClose()),t}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders(!0);if(!i)return;let r=i.get("content-length");if(!r){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(i))}`));return}let s=parseInt(r);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${r}`));return}this.nextMessageLength=s}let t=this.buffer.tryReadBody(this.nextMessageLength);if(t===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let i=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(t):t,r=await this.options.contentTypeDecoder.decode(i,this.options);this.callback(r)}).catch(i=>{this.fireError(i)})}}catch(t){this.fireError(t)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Bu.default)().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Hn.ReadableStreamMessageReader=Uu});var Mp=C(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.WriteableStreamMessageWriter=Yn.AbstractMessageWriter=Yn.MessageWriter=void 0;var Ap=Vn(),cs=tr(),DN=qu(),Ip=ir(),RN="Content-Length: ",Lp=`\r
`,xp;(function(n){function e(t){let i=t;return i&&cs.func(i.dispose)&&cs.func(i.onClose)&&cs.func(i.onError)&&cs.func(i.write)}n.is=e})(xp||(Yn.MessageWriter=xp={}));var Ko=class{constructor(){this.errorEmitter=new Ip.Emitter,this.closeEmitter=new Ip.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,i){this.errorEmitter.fire([this.asError(e),t,i])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${cs.string(e.message)?e.message:"unknown"}`)}};Yn.AbstractMessageWriter=Ko;var $u;(function(n){function e(t){return t===void 0||typeof t=="string"?{charset:t??"utf-8",contentTypeEncoder:(0,Ap.default)().applicationJson.encoder}:{charset:t.charset??"utf-8",contentEncoder:t.contentEncoder,contentTypeEncoder:t.contentTypeEncoder??(0,Ap.default)().applicationJson.encoder}}n.fromOptions=e})($u||($u={}));var Wu=class extends Ko{constructor(e,t){super(),this.writable=e,this.options=$u.fromOptions(t),this.errorCount=0,this.writeSemaphore=new DN.Semaphore(1),this.writable.onError(i=>this.fireError(i)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(i=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(i):i).then(i=>{let r=[];return r.push(RN,i.byteLength.toString(),Lp),r.push(Lp),this.doWrite(e,r,i)},i=>{throw this.fireError(i),i}))}async doWrite(e,t,i){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(i)}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};Yn.WriteableStreamMessageWriter=Wu});var qp=C(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.AbstractMessageBuffer=void 0;var CN=13,ON=10,AN=`\r
`,Vu=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let t=0,i=0,r=0,s=0;e:for(;i<this._chunks.length;){let l=this._chunks[i];for(r=0;r<l.length;){switch(l[r]){case CN:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case ON:switch(t){case 1:t=2;break;case 3:t=4,r++;break e;default:t=0}break;default:t=0}r++}s+=l.byteLength,i++}if(t!==4)return;let o=this._read(s+r),a=new Map,c=this.toString(o,"ascii").split(AN);if(c.length<2)return a;for(let l=0;l<c.length-2;l++){let u=c[l],d=u.indexOf(":");if(d===-1)throw new Error(`Message header must separate key and value using ':'
${u}`);let p=u.substr(0,d),g=u.substr(d+1).trim();a.set(e?p.toLowerCase():p,g)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let t=this.allocNative(e),i=0,r=0;for(;e>0;){let s=this._chunks[r];if(s.byteLength>e){let o=s.slice(0,e);t.set(o,i),i+=e,this._chunks[r]=s.slice(e),this._totalLength-=e,e-=e}else t.set(s,i),i+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return t}};zo.AbstractMessageBuffer=Vu});var $p=C(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.createMessageConnection=ee.ConnectionOptions=ee.MessageStrategy=ee.CancellationStrategy=ee.CancellationSenderStrategy=ee.CancellationReceiverStrategy=ee.RequestCancellationReceiverStrategy=ee.IdCancellationReceiverStrategy=ee.ConnectionStrategy=ee.ConnectionError=ee.ConnectionErrors=ee.LogTraceNotification=ee.SetTraceNotification=ee.TraceFormat=ee.TraceValues=ee.Trace=ee.NullLogger=ee.ProgressType=ee.ProgressToken=void 0;var Fp=Vn(),Me=tr(),G=Eu(),Bp=wu(),ls=ir(),Hu=Vo(),ds;(function(n){n.type=new G.NotificationType("$/cancelRequest")})(ds||(ds={}));var Yu;(function(n){function e(t){return typeof t=="string"||typeof t=="number"}n.is=e})(Yu||(ee.ProgressToken=Yu={}));var us;(function(n){n.type=new G.NotificationType("$/progress")})(us||(us={}));var Ku=class{constructor(){}};ee.ProgressType=Ku;var zu;(function(n){function e(t){return Me.func(t)}n.is=e})(zu||(zu={}));ee.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var fe;(function(n){n[n.Off=0]="Off",n[n.Messages=1]="Messages",n[n.Compact=2]="Compact",n[n.Verbose=3]="Verbose"})(fe||(ee.Trace=fe={}));var jp;(function(n){n.Off="off",n.Messages="messages",n.Compact="compact",n.Verbose="verbose"})(jp||(ee.TraceValues=jp={}));(function(n){function e(i){if(!Me.string(i))return n.Off;switch(i=i.toLowerCase(),i){case"off":return n.Off;case"messages":return n.Messages;case"compact":return n.Compact;case"verbose":return n.Verbose;default:return n.Off}}n.fromString=e;function t(i){switch(i){case n.Off:return"off";case n.Messages:return"messages";case n.Compact:return"compact";case n.Verbose:return"verbose";default:return"off"}}n.toString=t})(fe||(ee.Trace=fe={}));var Lt;(function(n){n.Text="text",n.JSON="json"})(Lt||(ee.TraceFormat=Lt={}));(function(n){function e(t){return Me.string(t)?(t=t.toLowerCase(),t==="json"?n.JSON:n.Text):n.Text}n.fromString=e})(Lt||(ee.TraceFormat=Lt={}));var Gu;(function(n){n.type=new G.NotificationType("$/setTrace")})(Gu||(ee.SetTraceNotification=Gu={}));var Go;(function(n){n.type=new G.NotificationType("$/logTrace")})(Go||(ee.LogTraceNotification=Go={}));var fs;(function(n){n[n.Closed=1]="Closed",n[n.Disposed=2]="Disposed",n[n.AlreadyListening=3]="AlreadyListening"})(fs||(ee.ConnectionErrors=fs={}));var ar=class n extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,n.prototype)}};ee.ConnectionError=ar;var Xu;(function(n){function e(t){let i=t;return i&&Me.func(i.cancelUndispatched)}n.is=e})(Xu||(ee.ConnectionStrategy=Xu={}));var Xo;(function(n){function e(t){let i=t;return i&&(i.kind===void 0||i.kind==="id")&&Me.func(i.createCancellationTokenSource)&&(i.dispose===void 0||Me.func(i.dispose))}n.is=e})(Xo||(ee.IdCancellationReceiverStrategy=Xo={}));var Qu;(function(n){function e(t){let i=t;return i&&i.kind==="request"&&Me.func(i.createCancellationTokenSource)&&(i.dispose===void 0||Me.func(i.dispose))}n.is=e})(Qu||(ee.RequestCancellationReceiverStrategy=Qu={}));var Qo;(function(n){n.Message=Object.freeze({createCancellationTokenSource(t){return new Hu.CancellationTokenSource}});function e(t){return Xo.is(t)||Qu.is(t)}n.is=e})(Qo||(ee.CancellationReceiverStrategy=Qo={}));var Jo;(function(n){n.Message=Object.freeze({sendCancellation(t,i){return t.sendNotification(ds.type,{id:i})},cleanup(t){}});function e(t){let i=t;return i&&Me.func(i.sendCancellation)&&Me.func(i.cleanup)}n.is=e})(Jo||(ee.CancellationSenderStrategy=Jo={}));var Zo;(function(n){n.Message=Object.freeze({receiver:Qo.Message,sender:Jo.Message});function e(t){let i=t;return i&&Qo.is(i.receiver)&&Jo.is(i.sender)}n.is=e})(Zo||(ee.CancellationStrategy=Zo={}));var ea;(function(n){function e(t){let i=t;return i&&Me.func(i.handleMessage)}n.is=e})(ea||(ee.MessageStrategy=ea={}));var Up;(function(n){function e(t){let i=t;return i&&(Zo.is(i.cancellationStrategy)||Xu.is(i.connectionStrategy)||ea.is(i.messageStrategy))}n.is=e})(Up||(ee.ConnectionOptions=Up={}));var tn;(function(n){n[n.New=1]="New",n[n.Listening=2]="Listening",n[n.Closed=3]="Closed",n[n.Disposed=4]="Disposed"})(tn||(tn={}));function IN(n,e,t,i){let r=t!==void 0?t:ee.NullLogger,s=0,o=0,a=0,c="2.0",l,u=new Map,d,p=new Map,g=new Map,_,b=new Bp.LinkedMap,N=new Map,R=new Set,v=new Map,T=fe.Off,w=Lt.Text,L,M=tn.New,H=new ls.Emitter,j=new ls.Emitter,ie=new ls.Emitter,qe=new ls.Emitter,vt=new ls.Emitter,ae=i&&i.cancellationStrategy?i.cancellationStrategy:Zo.Message;function Dn(S){if(S===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+S.toString()}function Gi(S){return S===null?"res-unknown-"+(++a).toString():"res-"+S.toString()}function ko(){return"not-"+(++o).toString()}function Jl(S,I){G.Message.isRequest(I)?S.set(Dn(I.id),I):G.Message.isResponse(I)?S.set(Gi(I.id),I):S.set(ko(),I)}function Eo(S){}function ts(){return M===tn.Listening}function wi(){return M===tn.Closed}function Rn(){return M===tn.Disposed}function Xi(){(M===tn.New||M===tn.Listening)&&(M=tn.Closed,j.fire(void 0))}function _i(S){H.fire([S,void 0,void 0])}function No(S){H.fire(S)}n.onClose(Xi),n.onError(_i),e.onClose(Xi),e.onError(No);function ns(){_||b.size===0||(_=(0,Fp.default)().timer.setImmediate(()=>{_=void 0,wo()}))}function is(S){G.Message.isRequest(S)?Po(S):G.Message.isNotification(S)?Ro(S):G.Message.isResponse(S)?Do(S):Qi(S)}function wo(){if(b.size===0)return;let S=b.shift();try{let I=i?.messageStrategy;ea.is(I)?I.handleMessage(S,is):is(S)}finally{ns()}}let _o=S=>{try{if(G.Message.isNotification(S)&&S.method===ds.type.method){let I=S.params.id,B=Dn(I),W=b.get(B);if(G.Message.isRequest(W)){let de=i?.connectionStrategy,De=de&&de.cancelUndispatched?de.cancelUndispatched(W,Eo):void 0;if(De&&(De.error!==void 0||De.result!==void 0)){b.delete(B),v.delete(I),De.id=W.id,Pi(De,S.method,Date.now()),e.write(De).catch(()=>r.error("Sending response for canceled message failed."));return}}let ye=v.get(I);if(ye!==void 0){ye.cancel(),Ji(S);return}else R.add(I)}Jl(b,S)}finally{ns()}};function Po(S){if(Rn())return;function I(re,Te,le){let Fe={jsonrpc:c,id:S.id};re instanceof G.ResponseError?Fe.error=re.toJson():Fe.result=re===void 0?null:re,Pi(Fe,Te,le),e.write(Fe).catch(()=>r.error("Sending response failed."))}function B(re,Te,le){let Fe={jsonrpc:c,id:S.id,error:re.toJson()};Pi(Fe,Te,le),e.write(Fe).catch(()=>r.error("Sending response failed."))}function W(re,Te,le){re===void 0&&(re=null);let Fe={jsonrpc:c,id:S.id,result:re};Pi(Fe,Te,le),e.write(Fe).catch(()=>r.error("Sending response failed."))}Ao(S);let ye=u.get(S.method),de,De;ye&&(de=ye.type,De=ye.handler);let Ae=Date.now();if(De||l){let re=S.id??String(Date.now()),Te=Xo.is(ae.receiver)?ae.receiver.createCancellationTokenSource(re):ae.receiver.createCancellationTokenSource(S);S.id!==null&&R.has(S.id)&&Te.cancel(),S.id!==null&&v.set(re,Te);try{let le;if(De)if(S.params===void 0){if(de!==void 0&&de.numberOfParams!==0){B(new G.ResponseError(G.ErrorCodes.InvalidParams,`Request ${S.method} defines ${de.numberOfParams} params but received none.`),S.method,Ae);return}le=De(Te.token)}else if(Array.isArray(S.params)){if(de!==void 0&&de.parameterStructures===G.ParameterStructures.byName){B(new G.ResponseError(G.ErrorCodes.InvalidParams,`Request ${S.method} defines parameters by name but received parameters by position`),S.method,Ae);return}le=De(...S.params,Te.token)}else{if(de!==void 0&&de.parameterStructures===G.ParameterStructures.byPosition){B(new G.ResponseError(G.ErrorCodes.InvalidParams,`Request ${S.method} defines parameters by position but received parameters by name`),S.method,Ae);return}le=De(S.params,Te.token)}else l&&(le=l(S.method,S.params,Te.token));let Fe=le;le?Fe.then?Fe.then(Je=>{v.delete(re),I(Je,S.method,Ae)},Je=>{v.delete(re),Je instanceof G.ResponseError?B(Je,S.method,Ae):Je&&Me.string(Je.message)?B(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${S.method} failed with message: ${Je.message}`),S.method,Ae):B(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${S.method} failed unexpectedly without providing any details.`),S.method,Ae)}):(v.delete(re),I(le,S.method,Ae)):(v.delete(re),W(le,S.method,Ae))}catch(le){v.delete(re),le instanceof G.ResponseError?I(le,S.method,Ae):le&&Me.string(le.message)?B(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${S.method} failed with message: ${le.message}`),S.method,Ae):B(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${S.method} failed unexpectedly without providing any details.`),S.method,Ae)}}else B(new G.ResponseError(G.ErrorCodes.MethodNotFound,`Unhandled method ${S.method}`),S.method,Ae)}function Do(S){if(!Rn())if(S.id===null)S.error?r.error(`Received response message without id: Error is: 
${JSON.stringify(S.error,void 0,4)}`):r.error("Received response message without id. No further error information provided.");else{let I=S.id,B=N.get(I);if(Io(S,B),B!==void 0){N.delete(I);try{if(S.error){let W=S.error;B.reject(new G.ResponseError(W.code,W.message,W.data))}else if(S.result!==void 0)B.resolve(S.result);else throw new Error("Should never happen.")}catch(W){W.message?r.error(`Response handler '${B.method}' failed with message: ${W.message}`):r.error(`Response handler '${B.method}' failed unexpectedly.`)}}}}function Ro(S){if(Rn())return;let I,B;if(S.method===ds.type.method){let W=S.params.id;R.delete(W),Ji(S);return}else{let W=p.get(S.method);W&&(B=W.handler,I=W.type)}if(B||d)try{if(Ji(S),B)if(S.params===void 0)I!==void 0&&I.numberOfParams!==0&&I.parameterStructures!==G.ParameterStructures.byName&&r.error(`Notification ${S.method} defines ${I.numberOfParams} params but received none.`),B();else if(Array.isArray(S.params)){let W=S.params;S.method===us.type.method&&W.length===2&&Yu.is(W[0])?B({token:W[0],value:W[1]}):(I!==void 0&&(I.parameterStructures===G.ParameterStructures.byName&&r.error(`Notification ${S.method} defines parameters by name but received parameters by position`),I.numberOfParams!==S.params.length&&r.error(`Notification ${S.method} defines ${I.numberOfParams} params but received ${W.length} arguments`)),B(...W))}else I!==void 0&&I.parameterStructures===G.ParameterStructures.byPosition&&r.error(`Notification ${S.method} defines parameters by position but received parameters by name`),B(S.params);else d&&d(S.method,S.params)}catch(W){W.message?r.error(`Notification handler '${S.method}' failed with message: ${W.message}`):r.error(`Notification handler '${S.method}' failed unexpectedly.`)}else ie.fire(S)}function Qi(S){if(!S){r.error("Received empty message.");return}r.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(S,null,4)}`);let I=S;if(Me.string(I.id)||Me.number(I.id)){let B=I.id,W=N.get(B);W&&W.reject(new Error("The received response has neither a result nor an error property."))}}function Jt(S){if(S!=null)switch(T){case fe.Verbose:return JSON.stringify(S,null,4);case fe.Compact:return JSON.stringify(S);default:return}}function Co(S){if(!(T===fe.Off||!L))if(w===Lt.Text){let I;(T===fe.Verbose||T===fe.Compact)&&S.params&&(I=`Params: ${Jt(S.params)}

`),L.log(`Sending request '${S.method} - (${S.id})'.`,I)}else Cn("send-request",S)}function Oo(S){if(!(T===fe.Off||!L))if(w===Lt.Text){let I;(T===fe.Verbose||T===fe.Compact)&&(S.params?I=`Params: ${Jt(S.params)}

`:I=`No parameters provided.

`),L.log(`Sending notification '${S.method}'.`,I)}else Cn("send-notification",S)}function Pi(S,I,B){if(!(T===fe.Off||!L))if(w===Lt.Text){let W;(T===fe.Verbose||T===fe.Compact)&&(S.error&&S.error.data?W=`Error data: ${Jt(S.error.data)}

`:S.result?W=`Result: ${Jt(S.result)}

`:S.error===void 0&&(W=`No result returned.

`)),L.log(`Sending response '${I} - (${S.id})'. Processing request took ${Date.now()-B}ms`,W)}else Cn("send-response",S)}function Ao(S){if(!(T===fe.Off||!L))if(w===Lt.Text){let I;(T===fe.Verbose||T===fe.Compact)&&S.params&&(I=`Params: ${Jt(S.params)}

`),L.log(`Received request '${S.method} - (${S.id})'.`,I)}else Cn("receive-request",S)}function Ji(S){if(!(T===fe.Off||!L||S.method===Go.type.method))if(w===Lt.Text){let I;(T===fe.Verbose||T===fe.Compact)&&(S.params?I=`Params: ${Jt(S.params)}

`:I=`No parameters provided.

`),L.log(`Received notification '${S.method}'.`,I)}else Cn("receive-notification",S)}function Io(S,I){if(!(T===fe.Off||!L))if(w===Lt.Text){let B;if((T===fe.Verbose||T===fe.Compact)&&(S.error&&S.error.data?B=`Error data: ${Jt(S.error.data)}

`:S.result?B=`Result: ${Jt(S.result)}

`:S.error===void 0&&(B=`No result returned.

`)),I){let W=S.error?` Request failed: ${S.error.message} (${S.error.code}).`:"";L.log(`Received response '${I.method} - (${S.id})' in ${Date.now()-I.timerStart}ms.${W}`,B)}else L.log(`Received response ${S.id} without active response promise.`,B)}else Cn("receive-response",S)}function Cn(S,I){if(!L||T===fe.Off)return;let B={isLSPMessage:!0,type:S,message:I,timestamp:Date.now()};L.log(B)}function $n(){if(wi())throw new ar(fs.Closed,"Connection is closed.");if(Rn())throw new ar(fs.Disposed,"Connection is disposed.")}function Lo(){if(ts())throw new ar(fs.AlreadyListening,"Connection is already listening")}function xo(){if(!ts())throw new Error("Call listen() first.")}function hn(S){return S===void 0?null:S}function rs(S){if(S!==null)return S}function ss(S){return S!=null&&!Array.isArray(S)&&typeof S=="object"}function Zi(S,I){switch(S){case G.ParameterStructures.auto:return ss(I)?rs(I):[hn(I)];case G.ParameterStructures.byName:if(!ss(I))throw new Error("Received parameters by name but param is not an object literal.");return rs(I);case G.ParameterStructures.byPosition:return[hn(I)];default:throw new Error(`Unknown parameter structure ${S.toString()}`)}}function os(S,I){let B,W=S.numberOfParams;switch(W){case 0:B=void 0;break;case 1:B=Zi(S.parameterStructures,I[0]);break;default:B=[];for(let ye=0;ye<I.length&&ye<W;ye++)B.push(hn(I[ye]));if(I.length<W)for(let ye=I.length;ye<W;ye++)B.push(null);break}return B}let On={sendNotification:(S,...I)=>{$n();let B,W;if(Me.string(S)){B=S;let de=I[0],De=0,Ae=G.ParameterStructures.auto;G.ParameterStructures.is(de)&&(De=1,Ae=de);let re=I.length,Te=re-De;switch(Te){case 0:W=void 0;break;case 1:W=Zi(Ae,I[De]);break;default:if(Ae===G.ParameterStructures.byName)throw new Error(`Received ${Te} parameters for 'by Name' notification parameter structure.`);W=I.slice(De,re).map(le=>hn(le));break}}else{let de=I;B=S.method,W=os(S,de)}let ye={jsonrpc:c,method:B,params:W};return Oo(ye),e.write(ye).catch(de=>{throw r.error("Sending notification failed."),de})},onNotification:(S,I)=>{$n();let B;return Me.func(S)?d=S:I&&(Me.string(S)?(B=S,p.set(S,{type:void 0,handler:I})):(B=S.method,p.set(S.method,{type:S,handler:I}))),{dispose:()=>{B!==void 0?p.delete(B):d=void 0}}},onProgress:(S,I,B)=>{if(g.has(I))throw new Error(`Progress handler for token ${I} already registered`);return g.set(I,B),{dispose:()=>{g.delete(I)}}},sendProgress:(S,I,B)=>On.sendNotification(us.type,{token:I,value:B}),onUnhandledProgress:qe.event,sendRequest:(S,...I)=>{$n(),xo();let B,W,ye;if(Me.string(S)){B=S;let re=I[0],Te=I[I.length-1],le=0,Fe=G.ParameterStructures.auto;G.ParameterStructures.is(re)&&(le=1,Fe=re);let Je=I.length;Hu.CancellationToken.is(Te)&&(Je=Je-1,ye=Te);let It=Je-le;switch(It){case 0:W=void 0;break;case 1:W=Zi(Fe,I[le]);break;default:if(Fe===G.ParameterStructures.byName)throw new Error(`Received ${It} parameters for 'by Name' request parameter structure.`);W=I.slice(le,Je).map(Mo=>hn(Mo));break}}else{let re=I;B=S.method,W=os(S,re);let Te=S.numberOfParams;ye=Hu.CancellationToken.is(re[Te])?re[Te]:void 0}let de=s++,De;ye&&(De=ye.onCancellationRequested(()=>{let re=ae.sender.sendCancellation(On,de);return re===void 0?(r.log(`Received no promise from cancellation strategy when cancelling id ${de}`),Promise.resolve()):re.catch(()=>{r.log(`Sending cancellation messages for id ${de} failed`)})}));let Ae={jsonrpc:c,id:de,method:B,params:W};return Co(Ae),typeof ae.sender.enableCancellation=="function"&&ae.sender.enableCancellation(Ae),new Promise(async(re,Te)=>{let le=It=>{re(It),ae.sender.cleanup(de),De?.dispose()},Fe=It=>{Te(It),ae.sender.cleanup(de),De?.dispose()},Je={method:B,timerStart:Date.now(),resolve:le,reject:Fe};try{await e.write(Ae),N.set(de,Je)}catch(It){throw r.error("Sending request failed."),Je.reject(new G.ResponseError(G.ErrorCodes.MessageWriteError,It.message?It.message:"Unknown reason")),It}})},onRequest:(S,I)=>{$n();let B=null;return zu.is(S)?(B=void 0,l=S):Me.string(S)?(B=null,I!==void 0&&(B=S,u.set(S,{handler:I,type:void 0}))):I!==void 0&&(B=S.method,u.set(S.method,{type:S,handler:I})),{dispose:()=>{B!==null&&(B!==void 0?u.delete(B):l=void 0)}}},hasPendingResponse:()=>N.size>0,trace:async(S,I,B)=>{let W=!1,ye=Lt.Text;B!==void 0&&(Me.boolean(B)?W=B:(W=B.sendNotification||!1,ye=B.traceFormat||Lt.Text)),T=S,w=ye,T===fe.Off?L=void 0:L=I,W&&!wi()&&!Rn()&&await On.sendNotification(Gu.type,{value:fe.toString(S)})},onError:H.event,onClose:j.event,onUnhandledNotification:ie.event,onDispose:vt.event,end:()=>{e.end()},dispose:()=>{if(Rn())return;M=tn.Disposed,vt.fire(void 0);let S=new G.ResponseError(G.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let I of N.values())I.reject(S);N=new Map,v=new Map,R=new Set,b=new Bp.LinkedMap,Me.func(e.dispose)&&e.dispose(),Me.func(n.dispose)&&n.dispose()},listen:()=>{$n(),Lo(),M=tn.Listening,n.listen(_o)},inspect:()=>{(0,Fp.default)().console.log("inspect")}};return On.onNotification(Go.type,S=>{if(T===fe.Off||!L)return;let I=T===fe.Verbose||T===fe.Compact;L.log(S.message,I?S.verbose:void 0)}),On.onNotification(us.type,S=>{let I=g.get(S.token);I?I(S.value):qe.fire(S)}),On}ee.createMessageConnection=IN});var ta=C(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.ProgressType=O.ProgressToken=O.createMessageConnection=O.NullLogger=O.ConnectionOptions=O.ConnectionStrategy=O.AbstractMessageBuffer=O.WriteableStreamMessageWriter=O.AbstractMessageWriter=O.MessageWriter=O.ReadableStreamMessageReader=O.AbstractMessageReader=O.MessageReader=O.SharedArrayReceiverStrategy=O.SharedArraySenderStrategy=O.CancellationToken=O.CancellationTokenSource=O.Emitter=O.Event=O.Disposable=O.LRUCache=O.Touch=O.LinkedMap=O.ParameterStructures=O.NotificationType9=O.NotificationType8=O.NotificationType7=O.NotificationType6=O.NotificationType5=O.NotificationType4=O.NotificationType3=O.NotificationType2=O.NotificationType1=O.NotificationType0=O.NotificationType=O.ErrorCodes=O.ResponseError=O.RequestType9=O.RequestType8=O.RequestType7=O.RequestType6=O.RequestType5=O.RequestType4=O.RequestType3=O.RequestType2=O.RequestType1=O.RequestType0=O.RequestType=O.Message=O.RAL=void 0;O.MessageStrategy=O.CancellationStrategy=O.CancellationSenderStrategy=O.CancellationReceiverStrategy=O.ConnectionError=O.ConnectionErrors=O.LogTraceNotification=O.SetTraceNotification=O.TraceFormat=O.TraceValues=O.Trace=void 0;var Ee=Eu();Object.defineProperty(O,"Message",{enumerable:!0,get:function(){return Ee.Message}});Object.defineProperty(O,"RequestType",{enumerable:!0,get:function(){return Ee.RequestType}});Object.defineProperty(O,"RequestType0",{enumerable:!0,get:function(){return Ee.RequestType0}});Object.defineProperty(O,"RequestType1",{enumerable:!0,get:function(){return Ee.RequestType1}});Object.defineProperty(O,"RequestType2",{enumerable:!0,get:function(){return Ee.RequestType2}});Object.defineProperty(O,"RequestType3",{enumerable:!0,get:function(){return Ee.RequestType3}});Object.defineProperty(O,"RequestType4",{enumerable:!0,get:function(){return Ee.RequestType4}});Object.defineProperty(O,"RequestType5",{enumerable:!0,get:function(){return Ee.RequestType5}});Object.defineProperty(O,"RequestType6",{enumerable:!0,get:function(){return Ee.RequestType6}});Object.defineProperty(O,"RequestType7",{enumerable:!0,get:function(){return Ee.RequestType7}});Object.defineProperty(O,"RequestType8",{enumerable:!0,get:function(){return Ee.RequestType8}});Object.defineProperty(O,"RequestType9",{enumerable:!0,get:function(){return Ee.RequestType9}});Object.defineProperty(O,"ResponseError",{enumerable:!0,get:function(){return Ee.ResponseError}});Object.defineProperty(O,"ErrorCodes",{enumerable:!0,get:function(){return Ee.ErrorCodes}});Object.defineProperty(O,"NotificationType",{enumerable:!0,get:function(){return Ee.NotificationType}});Object.defineProperty(O,"NotificationType0",{enumerable:!0,get:function(){return Ee.NotificationType0}});Object.defineProperty(O,"NotificationType1",{enumerable:!0,get:function(){return Ee.NotificationType1}});Object.defineProperty(O,"NotificationType2",{enumerable:!0,get:function(){return Ee.NotificationType2}});Object.defineProperty(O,"NotificationType3",{enumerable:!0,get:function(){return Ee.NotificationType3}});Object.defineProperty(O,"NotificationType4",{enumerable:!0,get:function(){return Ee.NotificationType4}});Object.defineProperty(O,"NotificationType5",{enumerable:!0,get:function(){return Ee.NotificationType5}});Object.defineProperty(O,"NotificationType6",{enumerable:!0,get:function(){return Ee.NotificationType6}});Object.defineProperty(O,"NotificationType7",{enumerable:!0,get:function(){return Ee.NotificationType7}});Object.defineProperty(O,"NotificationType8",{enumerable:!0,get:function(){return Ee.NotificationType8}});Object.defineProperty(O,"NotificationType9",{enumerable:!0,get:function(){return Ee.NotificationType9}});Object.defineProperty(O,"ParameterStructures",{enumerable:!0,get:function(){return Ee.ParameterStructures}});var Ju=wu();Object.defineProperty(O,"LinkedMap",{enumerable:!0,get:function(){return Ju.LinkedMap}});Object.defineProperty(O,"LRUCache",{enumerable:!0,get:function(){return Ju.LRUCache}});Object.defineProperty(O,"Touch",{enumerable:!0,get:function(){return Ju.Touch}});var LN=Pp();Object.defineProperty(O,"Disposable",{enumerable:!0,get:function(){return LN.Disposable}});var Wp=ir();Object.defineProperty(O,"Event",{enumerable:!0,get:function(){return Wp.Event}});Object.defineProperty(O,"Emitter",{enumerable:!0,get:function(){return Wp.Emitter}});var Vp=Vo();Object.defineProperty(O,"CancellationTokenSource",{enumerable:!0,get:function(){return Vp.CancellationTokenSource}});Object.defineProperty(O,"CancellationToken",{enumerable:!0,get:function(){return Vp.CancellationToken}});var Hp=Rp();Object.defineProperty(O,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return Hp.SharedArraySenderStrategy}});Object.defineProperty(O,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return Hp.SharedArrayReceiverStrategy}});var Zu=Op();Object.defineProperty(O,"MessageReader",{enumerable:!0,get:function(){return Zu.MessageReader}});Object.defineProperty(O,"AbstractMessageReader",{enumerable:!0,get:function(){return Zu.AbstractMessageReader}});Object.defineProperty(O,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Zu.ReadableStreamMessageReader}});var ef=Mp();Object.defineProperty(O,"MessageWriter",{enumerable:!0,get:function(){return ef.MessageWriter}});Object.defineProperty(O,"AbstractMessageWriter",{enumerable:!0,get:function(){return ef.AbstractMessageWriter}});Object.defineProperty(O,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return ef.WriteableStreamMessageWriter}});var xN=qp();Object.defineProperty(O,"AbstractMessageBuffer",{enumerable:!0,get:function(){return xN.AbstractMessageBuffer}});var st=$p();Object.defineProperty(O,"ConnectionStrategy",{enumerable:!0,get:function(){return st.ConnectionStrategy}});Object.defineProperty(O,"ConnectionOptions",{enumerable:!0,get:function(){return st.ConnectionOptions}});Object.defineProperty(O,"NullLogger",{enumerable:!0,get:function(){return st.NullLogger}});Object.defineProperty(O,"createMessageConnection",{enumerable:!0,get:function(){return st.createMessageConnection}});Object.defineProperty(O,"ProgressToken",{enumerable:!0,get:function(){return st.ProgressToken}});Object.defineProperty(O,"ProgressType",{enumerable:!0,get:function(){return st.ProgressType}});Object.defineProperty(O,"Trace",{enumerable:!0,get:function(){return st.Trace}});Object.defineProperty(O,"TraceValues",{enumerable:!0,get:function(){return st.TraceValues}});Object.defineProperty(O,"TraceFormat",{enumerable:!0,get:function(){return st.TraceFormat}});Object.defineProperty(O,"SetTraceNotification",{enumerable:!0,get:function(){return st.SetTraceNotification}});Object.defineProperty(O,"LogTraceNotification",{enumerable:!0,get:function(){return st.LogTraceNotification}});Object.defineProperty(O,"ConnectionErrors",{enumerable:!0,get:function(){return st.ConnectionErrors}});Object.defineProperty(O,"ConnectionError",{enumerable:!0,get:function(){return st.ConnectionError}});Object.defineProperty(O,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return st.CancellationReceiverStrategy}});Object.defineProperty(O,"CancellationSenderStrategy",{enumerable:!0,get:function(){return st.CancellationSenderStrategy}});Object.defineProperty(O,"CancellationStrategy",{enumerable:!0,get:function(){return st.CancellationStrategy}});Object.defineProperty(O,"MessageStrategy",{enumerable:!0,get:function(){return st.MessageStrategy}});var MN=Vn();O.RAL=MN.default});var zp=C(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});var Yp=require("util"),In=ta(),na=class n extends In.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return n.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new Yp.TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}};na.emptyBuffer=Buffer.allocUnsafe(0);var tf=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),In.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),In.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),In.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),In.Disposable.create(()=>this.stream.off("data",e))}},nf=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),In.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),In.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),In.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((i,r)=>{let s=o=>{o==null?i():r(o)};typeof e=="string"?this.stream.write(e,t,s):this.stream.write(e,s)})}end(){this.stream.end()}},Kp=Object.freeze({messageBuffer:Object.freeze({create:n=>new na(n)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(n,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(n,void 0,0),e.charset))}catch(t){return Promise.reject(t)}}}),decoder:Object.freeze({name:"application/json",decode:(n,e)=>{try{return n instanceof Buffer?Promise.resolve(JSON.parse(n.toString(e.charset))):Promise.resolve(JSON.parse(new Yp.TextDecoder(e.charset).decode(n)))}catch(t){return Promise.reject(t)}}})}),stream:Object.freeze({asReadableStream:n=>new tf(n),asWritableStream:n=>new nf(n)}),console,timer:Object.freeze({setTimeout(n,e,...t){let i=setTimeout(n,e,...t);return{dispose:()=>clearTimeout(i)}},setImmediate(n,...e){let t=setImmediate(n,...e);return{dispose:()=>clearImmediate(t)}},setInterval(n,e,...t){let i=setInterval(n,e,...t);return{dispose:()=>clearInterval(i)}}})});function rf(){return Kp}(function(n){function e(){In.RAL.install(Kp)}n.install=e})(rf||(rf={}));sf.default=rf});var Oi=C(oe=>{"use strict";var qN=oe&&oe.__createBinding||(Object.create?function(n,e,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,i,r)}:function(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}),FN=oe&&oe.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&qN(e,n,t)};Object.defineProperty(oe,"__esModule",{value:!0});oe.createMessageConnection=oe.createServerSocketTransport=oe.createClientSocketTransport=oe.createServerPipeTransport=oe.createClientPipeTransport=oe.generateRandomPipeName=oe.StreamMessageWriter=oe.StreamMessageReader=oe.SocketMessageWriter=oe.SocketMessageReader=oe.PortMessageWriter=oe.PortMessageReader=oe.IPCMessageWriter=oe.IPCMessageReader=void 0;var cr=zp();cr.default.install();var Gp=require("path"),BN=require("os"),jN=require("crypto"),sa=require("net"),xt=ta();FN(ta(),oe);var of=class extends xt.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",i=>this.fireError(i)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),xt.Disposable.create(()=>this.process.off("message",e))}};oe.IPCMessageReader=of;var af=class extends xt.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",i=>this.fireError(i)),t.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};oe.IPCMessageWriter=af;var cf=class extends xt.AbstractMessageReader{constructor(e){super(),this.onData=new xt.Emitter,e.on("close",()=>this.fireClose),e.on("error",t=>this.fireError(t)),e.on("message",t=>{this.onData.fire(t)})}listen(e){return this.onData.event(e)}};oe.PortMessageReader=cf;var lf=class extends xt.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",t=>this.fireError(t))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};oe.PortMessageWriter=lf;var Ri=class extends xt.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,cr.default)().stream.asReadableStream(e),t)}};oe.SocketMessageReader=Ri;var Ci=class extends xt.WriteableStreamMessageWriter{constructor(e,t){super((0,cr.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};oe.SocketMessageWriter=Ci;var ia=class extends xt.ReadableStreamMessageReader{constructor(e,t){super((0,cr.default)().stream.asReadableStream(e),t)}};oe.StreamMessageReader=ia;var ra=class extends xt.WriteableStreamMessageWriter{constructor(e,t){super((0,cr.default)().stream.asWritableStream(e),t)}};oe.StreamMessageWriter=ra;var Xp=process.env.XDG_RUNTIME_DIR,UN=new Map([["linux",107],["darwin",103]]);function $N(){let n=(0,jN.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${n}-sock`;let e;Xp?e=Gp.join(Xp,`vscode-ipc-${n}.sock`):e=Gp.join(BN.tmpdir(),`vscode-${n}.sock`);let t=UN.get(process.platform);return t!==void 0&&e.length>t&&(0,cr.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${t} characters.`),e}oe.generateRandomPipeName=$N;function WN(n,e="utf-8"){let t,i=new Promise((r,s)=>{t=r});return new Promise((r,s)=>{let o=(0,sa.createServer)(a=>{o.close(),t([new Ri(a,e),new Ci(a,e)])});o.on("error",s),o.listen(n,()=>{o.removeListener("error",s),r({onConnected:()=>i})})})}oe.createClientPipeTransport=WN;function VN(n,e="utf-8"){let t=(0,sa.createConnection)(n);return[new Ri(t,e),new Ci(t,e)]}oe.createServerPipeTransport=VN;function HN(n,e="utf-8"){let t,i=new Promise((r,s)=>{t=r});return new Promise((r,s)=>{let o=(0,sa.createServer)(a=>{o.close(),t([new Ri(a,e),new Ci(a,e)])});o.on("error",s),o.listen(n,"127.0.0.1",()=>{o.removeListener("error",s),r({onConnected:()=>i})})})}oe.createClientSocketTransport=HN;function YN(n,e="utf-8"){let t=(0,sa.createConnection)(n,"127.0.0.1");return[new Ri(t,e),new Ci(t,e)]}oe.createServerSocketTransport=YN;function KN(n){let e=n;return e.read!==void 0&&e.addListener!==void 0}function zN(n){let e=n;return e.write!==void 0&&e.addListener!==void 0}function GN(n,e,t,i){t||(t=xt.NullLogger);let r=KN(n)?new ia(n):n,s=zN(e)?new ra(e):e;return xt.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,xt.createMessageConnection)(r,s,t,i)}oe.createMessageConnection=GN});var uf=C((pA,Qp)=>{"use strict";Qp.exports=Oi()});var aa=C((Jp,oa)=>{(function(n){if(typeof oa=="object"&&typeof oa.exports=="object"){var e=n(require,Jp);e!==void 0&&(oa.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],n)})(function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var t;(function(h){function k(E){return typeof E=="string"}h.is=k})(t||(e.DocumentUri=t={}));var i;(function(h){function k(E){return typeof E=="string"}h.is=k})(i||(e.URI=i={}));var r;(function(h){h.MIN_VALUE=-2147483648,h.MAX_VALUE=2147483647;function k(E){return typeof E=="number"&&h.MIN_VALUE<=E&&E<=h.MAX_VALUE}h.is=k})(r||(e.integer=r={}));var s;(function(h){h.MIN_VALUE=0,h.MAX_VALUE=2147483647;function k(E){return typeof E=="number"&&h.MIN_VALUE<=E&&E<=h.MAX_VALUE}h.is=k})(s||(e.uinteger=s={}));var o;(function(h){function k(m,f){return m===Number.MAX_VALUE&&(m=s.MAX_VALUE),f===Number.MAX_VALUE&&(f=s.MAX_VALUE),{line:m,character:f}}h.create=k;function E(m){var f=m;return D.objectLiteral(f)&&D.uinteger(f.line)&&D.uinteger(f.character)}h.is=E})(o||(e.Position=o={}));var a;(function(h){function k(m,f,P,x){if(D.uinteger(m)&&D.uinteger(f)&&D.uinteger(P)&&D.uinteger(x))return{start:o.create(m,f),end:o.create(P,x)};if(o.is(m)&&o.is(f))return{start:m,end:f};throw new Error("Range#create called with invalid arguments[".concat(m,", ").concat(f,", ").concat(P,", ").concat(x,"]"))}h.create=k;function E(m){var f=m;return D.objectLiteral(f)&&o.is(f.start)&&o.is(f.end)}h.is=E})(a||(e.Range=a={}));var c;(function(h){function k(m,f){return{uri:m,range:f}}h.create=k;function E(m){var f=m;return D.objectLiteral(f)&&a.is(f.range)&&(D.string(f.uri)||D.undefined(f.uri))}h.is=E})(c||(e.Location=c={}));var l;(function(h){function k(m,f,P,x){return{targetUri:m,targetRange:f,targetSelectionRange:P,originSelectionRange:x}}h.create=k;function E(m){var f=m;return D.objectLiteral(f)&&a.is(f.targetRange)&&D.string(f.targetUri)&&a.is(f.targetSelectionRange)&&(a.is(f.originSelectionRange)||D.undefined(f.originSelectionRange))}h.is=E})(l||(e.LocationLink=l={}));var u;(function(h){function k(m,f,P,x){return{red:m,green:f,blue:P,alpha:x}}h.create=k;function E(m){var f=m;return D.objectLiteral(f)&&D.numberRange(f.red,0,1)&&D.numberRange(f.green,0,1)&&D.numberRange(f.blue,0,1)&&D.numberRange(f.alpha,0,1)}h.is=E})(u||(e.Color=u={}));var d;(function(h){function k(m,f){return{range:m,color:f}}h.create=k;function E(m){var f=m;return D.objectLiteral(f)&&a.is(f.range)&&u.is(f.color)}h.is=E})(d||(e.ColorInformation=d={}));var p;(function(h){function k(m,f,P){return{label:m,textEdit:f,additionalTextEdits:P}}h.create=k;function E(m){var f=m;return D.objectLiteral(f)&&D.string(f.label)&&(D.undefined(f.textEdit)||L.is(f))&&(D.undefined(f.additionalTextEdits)||D.typedArray(f.additionalTextEdits,L.is))}h.is=E})(p||(e.ColorPresentation=p={}));var g;(function(h){h.Comment="comment",h.Imports="imports",h.Region="region"})(g||(e.FoldingRangeKind=g={}));var _;(function(h){function k(m,f,P,x,Z,Be){var ke={startLine:m,endLine:f};return D.defined(P)&&(ke.startCharacter=P),D.defined(x)&&(ke.endCharacter=x),D.defined(Z)&&(ke.kind=Z),D.defined(Be)&&(ke.collapsedText=Be),ke}h.create=k;function E(m){var f=m;return D.objectLiteral(f)&&D.uinteger(f.startLine)&&D.uinteger(f.startLine)&&(D.undefined(f.startCharacter)||D.uinteger(f.startCharacter))&&(D.undefined(f.endCharacter)||D.uinteger(f.endCharacter))&&(D.undefined(f.kind)||D.string(f.kind))}h.is=E})(_||(e.FoldingRange=_={}));var b;(function(h){function k(m,f){return{location:m,message:f}}h.create=k;function E(m){var f=m;return D.defined(f)&&c.is(f.location)&&D.string(f.message)}h.is=E})(b||(e.DiagnosticRelatedInformation=b={}));var N;(function(h){h.Error=1,h.Warning=2,h.Information=3,h.Hint=4})(N||(e.DiagnosticSeverity=N={}));var R;(function(h){h.Unnecessary=1,h.Deprecated=2})(R||(e.DiagnosticTag=R={}));var v;(function(h){function k(E){var m=E;return D.objectLiteral(m)&&D.string(m.href)}h.is=k})(v||(e.CodeDescription=v={}));var T;(function(h){function k(m,f,P,x,Z,Be){var ke={range:m,message:f};return D.defined(P)&&(ke.severity=P),D.defined(x)&&(ke.code=x),D.defined(Z)&&(ke.source=Z),D.defined(Be)&&(ke.relatedInformation=Be),ke}h.create=k;function E(m){var f,P=m;return D.defined(P)&&a.is(P.range)&&D.string(P.message)&&(D.number(P.severity)||D.undefined(P.severity))&&(D.integer(P.code)||D.string(P.code)||D.undefined(P.code))&&(D.undefined(P.codeDescription)||D.string((f=P.codeDescription)===null||f===void 0?void 0:f.href))&&(D.string(P.source)||D.undefined(P.source))&&(D.undefined(P.relatedInformation)||D.typedArray(P.relatedInformation,b.is))}h.is=E})(T||(e.Diagnostic=T={}));var w;(function(h){function k(m,f){for(var P=[],x=2;x<arguments.length;x++)P[x-2]=arguments[x];var Z={title:m,command:f};return D.defined(P)&&P.length>0&&(Z.arguments=P),Z}h.create=k;function E(m){var f=m;return D.defined(f)&&D.string(f.title)&&D.string(f.command)}h.is=E})(w||(e.Command=w={}));var L;(function(h){function k(P,x){return{range:P,newText:x}}h.replace=k;function E(P,x){return{range:{start:P,end:P},newText:x}}h.insert=E;function m(P){return{range:P,newText:""}}h.del=m;function f(P){var x=P;return D.objectLiteral(x)&&D.string(x.newText)&&a.is(x.range)}h.is=f})(L||(e.TextEdit=L={}));var M;(function(h){function k(m,f,P){var x={label:m};return f!==void 0&&(x.needsConfirmation=f),P!==void 0&&(x.description=P),x}h.create=k;function E(m){var f=m;return D.objectLiteral(f)&&D.string(f.label)&&(D.boolean(f.needsConfirmation)||f.needsConfirmation===void 0)&&(D.string(f.description)||f.description===void 0)}h.is=E})(M||(e.ChangeAnnotation=M={}));var H;(function(h){function k(E){var m=E;return D.string(m)}h.is=k})(H||(e.ChangeAnnotationIdentifier=H={}));var j;(function(h){function k(P,x,Z){return{range:P,newText:x,annotationId:Z}}h.replace=k;function E(P,x,Z){return{range:{start:P,end:P},newText:x,annotationId:Z}}h.insert=E;function m(P,x){return{range:P,newText:"",annotationId:x}}h.del=m;function f(P){var x=P;return L.is(x)&&(M.is(x.annotationId)||H.is(x.annotationId))}h.is=f})(j||(e.AnnotatedTextEdit=j={}));var ie;(function(h){function k(m,f){return{textDocument:m,edits:f}}h.create=k;function E(m){var f=m;return D.defined(f)&&wi.is(f.textDocument)&&Array.isArray(f.edits)}h.is=E})(ie||(e.TextDocumentEdit=ie={}));var qe;(function(h){function k(m,f,P){var x={kind:"create",uri:m};return f!==void 0&&(f.overwrite!==void 0||f.ignoreIfExists!==void 0)&&(x.options=f),P!==void 0&&(x.annotationId=P),x}h.create=k;function E(m){var f=m;return f&&f.kind==="create"&&D.string(f.uri)&&(f.options===void 0||(f.options.overwrite===void 0||D.boolean(f.options.overwrite))&&(f.options.ignoreIfExists===void 0||D.boolean(f.options.ignoreIfExists)))&&(f.annotationId===void 0||H.is(f.annotationId))}h.is=E})(qe||(e.CreateFile=qe={}));var vt;(function(h){function k(m,f,P,x){var Z={kind:"rename",oldUri:m,newUri:f};return P!==void 0&&(P.overwrite!==void 0||P.ignoreIfExists!==void 0)&&(Z.options=P),x!==void 0&&(Z.annotationId=x),Z}h.create=k;function E(m){var f=m;return f&&f.kind==="rename"&&D.string(f.oldUri)&&D.string(f.newUri)&&(f.options===void 0||(f.options.overwrite===void 0||D.boolean(f.options.overwrite))&&(f.options.ignoreIfExists===void 0||D.boolean(f.options.ignoreIfExists)))&&(f.annotationId===void 0||H.is(f.annotationId))}h.is=E})(vt||(e.RenameFile=vt={}));var ae;(function(h){function k(m,f,P){var x={kind:"delete",uri:m};return f!==void 0&&(f.recursive!==void 0||f.ignoreIfNotExists!==void 0)&&(x.options=f),P!==void 0&&(x.annotationId=P),x}h.create=k;function E(m){var f=m;return f&&f.kind==="delete"&&D.string(f.uri)&&(f.options===void 0||(f.options.recursive===void 0||D.boolean(f.options.recursive))&&(f.options.ignoreIfNotExists===void 0||D.boolean(f.options.ignoreIfNotExists)))&&(f.annotationId===void 0||H.is(f.annotationId))}h.is=E})(ae||(e.DeleteFile=ae={}));var Dn;(function(h){function k(E){var m=E;return m&&(m.changes!==void 0||m.documentChanges!==void 0)&&(m.documentChanges===void 0||m.documentChanges.every(function(f){return D.string(f.kind)?qe.is(f)||vt.is(f)||ae.is(f):ie.is(f)}))}h.is=k})(Dn||(e.WorkspaceEdit=Dn={}));var Gi=function(){function h(k,E){this.edits=k,this.changeAnnotations=E}return h.prototype.insert=function(k,E,m){var f,P;if(m===void 0?f=L.insert(k,E):H.is(m)?(P=m,f=j.insert(k,E,m)):(this.assertChangeAnnotations(this.changeAnnotations),P=this.changeAnnotations.manage(m),f=j.insert(k,E,P)),this.edits.push(f),P!==void 0)return P},h.prototype.replace=function(k,E,m){var f,P;if(m===void 0?f=L.replace(k,E):H.is(m)?(P=m,f=j.replace(k,E,m)):(this.assertChangeAnnotations(this.changeAnnotations),P=this.changeAnnotations.manage(m),f=j.replace(k,E,P)),this.edits.push(f),P!==void 0)return P},h.prototype.delete=function(k,E){var m,f;if(E===void 0?m=L.del(k):H.is(E)?(f=E,m=j.del(k,E)):(this.assertChangeAnnotations(this.changeAnnotations),f=this.changeAnnotations.manage(E),m=j.del(k,f)),this.edits.push(m),f!==void 0)return f},h.prototype.add=function(k){this.edits.push(k)},h.prototype.all=function(){return this.edits},h.prototype.clear=function(){this.edits.splice(0,this.edits.length)},h.prototype.assertChangeAnnotations=function(k){if(k===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},h}(),ko=function(){function h(k){this._annotations=k===void 0?Object.create(null):k,this._counter=0,this._size=0}return h.prototype.all=function(){return this._annotations},Object.defineProperty(h.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),h.prototype.manage=function(k,E){var m;if(H.is(k)?m=k:(m=this.nextId(),E=k),this._annotations[m]!==void 0)throw new Error("Id ".concat(m," is already in use."));if(E===void 0)throw new Error("No annotation provided for id ".concat(m));return this._annotations[m]=E,this._size++,m},h.prototype.nextId=function(){return this._counter++,this._counter.toString()},h}(),Jl=function(){function h(k){var E=this;this._textEditChanges=Object.create(null),k!==void 0?(this._workspaceEdit=k,k.documentChanges?(this._changeAnnotations=new ko(k.changeAnnotations),k.changeAnnotations=this._changeAnnotations.all(),k.documentChanges.forEach(function(m){if(ie.is(m)){var f=new Gi(m.edits,E._changeAnnotations);E._textEditChanges[m.textDocument.uri]=f}})):k.changes&&Object.keys(k.changes).forEach(function(m){var f=new Gi(k.changes[m]);E._textEditChanges[m]=f})):this._workspaceEdit={}}return Object.defineProperty(h.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),h.prototype.getTextEditChange=function(k){if(wi.is(k)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var E={uri:k.uri,version:k.version},m=this._textEditChanges[E.uri];if(!m){var f=[],P={textDocument:E,edits:f};this._workspaceEdit.documentChanges.push(P),m=new Gi(f,this._changeAnnotations),this._textEditChanges[E.uri]=m}return m}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var m=this._textEditChanges[k];if(!m){var f=[];this._workspaceEdit.changes[k]=f,m=new Gi(f),this._textEditChanges[k]=m}return m}},h.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new ko,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},h.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},h.prototype.createFile=function(k,E,m){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f;M.is(E)||H.is(E)?f=E:m=E;var P,x;if(f===void 0?P=qe.create(k,m):(x=H.is(f)?f:this._changeAnnotations.manage(f),P=qe.create(k,m,x)),this._workspaceEdit.documentChanges.push(P),x!==void 0)return x},h.prototype.renameFile=function(k,E,m,f){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var P;M.is(m)||H.is(m)?P=m:f=m;var x,Z;if(P===void 0?x=vt.create(k,E,f):(Z=H.is(P)?P:this._changeAnnotations.manage(P),x=vt.create(k,E,f,Z)),this._workspaceEdit.documentChanges.push(x),Z!==void 0)return Z},h.prototype.deleteFile=function(k,E,m){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f;M.is(E)||H.is(E)?f=E:m=E;var P,x;if(f===void 0?P=ae.create(k,m):(x=H.is(f)?f:this._changeAnnotations.manage(f),P=ae.create(k,m,x)),this._workspaceEdit.documentChanges.push(P),x!==void 0)return x},h}();e.WorkspaceChange=Jl;var Eo;(function(h){function k(m){return{uri:m}}h.create=k;function E(m){var f=m;return D.defined(f)&&D.string(f.uri)}h.is=E})(Eo||(e.TextDocumentIdentifier=Eo={}));var ts;(function(h){function k(m,f){return{uri:m,version:f}}h.create=k;function E(m){var f=m;return D.defined(f)&&D.string(f.uri)&&D.integer(f.version)}h.is=E})(ts||(e.VersionedTextDocumentIdentifier=ts={}));var wi;(function(h){function k(m,f){return{uri:m,version:f}}h.create=k;function E(m){var f=m;return D.defined(f)&&D.string(f.uri)&&(f.version===null||D.integer(f.version))}h.is=E})(wi||(e.OptionalVersionedTextDocumentIdentifier=wi={}));var Rn;(function(h){function k(m,f,P,x){return{uri:m,languageId:f,version:P,text:x}}h.create=k;function E(m){var f=m;return D.defined(f)&&D.string(f.uri)&&D.string(f.languageId)&&D.integer(f.version)&&D.string(f.text)}h.is=E})(Rn||(e.TextDocumentItem=Rn={}));var Xi;(function(h){h.PlainText="plaintext",h.Markdown="markdown";function k(E){var m=E;return m===h.PlainText||m===h.Markdown}h.is=k})(Xi||(e.MarkupKind=Xi={}));var _i;(function(h){function k(E){var m=E;return D.objectLiteral(E)&&Xi.is(m.kind)&&D.string(m.value)}h.is=k})(_i||(e.MarkupContent=_i={}));var No;(function(h){h.Text=1,h.Method=2,h.Function=3,h.Constructor=4,h.Field=5,h.Variable=6,h.Class=7,h.Interface=8,h.Module=9,h.Property=10,h.Unit=11,h.Value=12,h.Enum=13,h.Keyword=14,h.Snippet=15,h.Color=16,h.File=17,h.Reference=18,h.Folder=19,h.EnumMember=20,h.Constant=21,h.Struct=22,h.Event=23,h.Operator=24,h.TypeParameter=25})(No||(e.CompletionItemKind=No={}));var ns;(function(h){h.PlainText=1,h.Snippet=2})(ns||(e.InsertTextFormat=ns={}));var is;(function(h){h.Deprecated=1})(is||(e.CompletionItemTag=is={}));var wo;(function(h){function k(m,f,P){return{newText:m,insert:f,replace:P}}h.create=k;function E(m){var f=m;return f&&D.string(f.newText)&&a.is(f.insert)&&a.is(f.replace)}h.is=E})(wo||(e.InsertReplaceEdit=wo={}));var _o;(function(h){h.asIs=1,h.adjustIndentation=2})(_o||(e.InsertTextMode=_o={}));var Po;(function(h){function k(E){var m=E;return m&&(D.string(m.detail)||m.detail===void 0)&&(D.string(m.description)||m.description===void 0)}h.is=k})(Po||(e.CompletionItemLabelDetails=Po={}));var Do;(function(h){function k(E){return{label:E}}h.create=k})(Do||(e.CompletionItem=Do={}));var Ro;(function(h){function k(E,m){return{items:E||[],isIncomplete:!!m}}h.create=k})(Ro||(e.CompletionList=Ro={}));var Qi;(function(h){function k(m){return m.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}h.fromPlainText=k;function E(m){var f=m;return D.string(f)||D.objectLiteral(f)&&D.string(f.language)&&D.string(f.value)}h.is=E})(Qi||(e.MarkedString=Qi={}));var Jt;(function(h){function k(E){var m=E;return!!m&&D.objectLiteral(m)&&(_i.is(m.contents)||Qi.is(m.contents)||D.typedArray(m.contents,Qi.is))&&(E.range===void 0||a.is(E.range))}h.is=k})(Jt||(e.Hover=Jt={}));var Co;(function(h){function k(E,m){return m?{label:E,documentation:m}:{label:E}}h.create=k})(Co||(e.ParameterInformation=Co={}));var Oo;(function(h){function k(E,m){for(var f=[],P=2;P<arguments.length;P++)f[P-2]=arguments[P];var x={label:E};return D.defined(m)&&(x.documentation=m),D.defined(f)?x.parameters=f:x.parameters=[],x}h.create=k})(Oo||(e.SignatureInformation=Oo={}));var Pi;(function(h){h.Text=1,h.Read=2,h.Write=3})(Pi||(e.DocumentHighlightKind=Pi={}));var Ao;(function(h){function k(E,m){var f={range:E};return D.number(m)&&(f.kind=m),f}h.create=k})(Ao||(e.DocumentHighlight=Ao={}));var Ji;(function(h){h.File=1,h.Module=2,h.Namespace=3,h.Package=4,h.Class=5,h.Method=6,h.Property=7,h.Field=8,h.Constructor=9,h.Enum=10,h.Interface=11,h.Function=12,h.Variable=13,h.Constant=14,h.String=15,h.Number=16,h.Boolean=17,h.Array=18,h.Object=19,h.Key=20,h.Null=21,h.EnumMember=22,h.Struct=23,h.Event=24,h.Operator=25,h.TypeParameter=26})(Ji||(e.SymbolKind=Ji={}));var Io;(function(h){h.Deprecated=1})(Io||(e.SymbolTag=Io={}));var Cn;(function(h){function k(E,m,f,P,x){var Z={name:E,kind:m,location:{uri:P,range:f}};return x&&(Z.containerName=x),Z}h.create=k})(Cn||(e.SymbolInformation=Cn={}));var $n;(function(h){function k(E,m,f,P){return P!==void 0?{name:E,kind:m,location:{uri:f,range:P}}:{name:E,kind:m,location:{uri:f}}}h.create=k})($n||(e.WorkspaceSymbol=$n={}));var Lo;(function(h){function k(m,f,P,x,Z,Be){var ke={name:m,detail:f,kind:P,range:x,selectionRange:Z};return Be!==void 0&&(ke.children=Be),ke}h.create=k;function E(m){var f=m;return f&&D.string(f.name)&&D.number(f.kind)&&a.is(f.range)&&a.is(f.selectionRange)&&(f.detail===void 0||D.string(f.detail))&&(f.deprecated===void 0||D.boolean(f.deprecated))&&(f.children===void 0||Array.isArray(f.children))&&(f.tags===void 0||Array.isArray(f.tags))}h.is=E})(Lo||(e.DocumentSymbol=Lo={}));var xo;(function(h){h.Empty="",h.QuickFix="quickfix",h.Refactor="refactor",h.RefactorExtract="refactor.extract",h.RefactorInline="refactor.inline",h.RefactorRewrite="refactor.rewrite",h.Source="source",h.SourceOrganizeImports="source.organizeImports",h.SourceFixAll="source.fixAll"})(xo||(e.CodeActionKind=xo={}));var hn;(function(h){h.Invoked=1,h.Automatic=2})(hn||(e.CodeActionTriggerKind=hn={}));var rs;(function(h){function k(m,f,P){var x={diagnostics:m};return f!=null&&(x.only=f),P!=null&&(x.triggerKind=P),x}h.create=k;function E(m){var f=m;return D.defined(f)&&D.typedArray(f.diagnostics,T.is)&&(f.only===void 0||D.typedArray(f.only,D.string))&&(f.triggerKind===void 0||f.triggerKind===hn.Invoked||f.triggerKind===hn.Automatic)}h.is=E})(rs||(e.CodeActionContext=rs={}));var ss;(function(h){function k(m,f,P){var x={title:m},Z=!0;return typeof f=="string"?(Z=!1,x.kind=f):w.is(f)?x.command=f:x.edit=f,Z&&P!==void 0&&(x.kind=P),x}h.create=k;function E(m){var f=m;return f&&D.string(f.title)&&(f.diagnostics===void 0||D.typedArray(f.diagnostics,T.is))&&(f.kind===void 0||D.string(f.kind))&&(f.edit!==void 0||f.command!==void 0)&&(f.command===void 0||w.is(f.command))&&(f.isPreferred===void 0||D.boolean(f.isPreferred))&&(f.edit===void 0||Dn.is(f.edit))}h.is=E})(ss||(e.CodeAction=ss={}));var Zi;(function(h){function k(m,f){var P={range:m};return D.defined(f)&&(P.data=f),P}h.create=k;function E(m){var f=m;return D.defined(f)&&a.is(f.range)&&(D.undefined(f.command)||w.is(f.command))}h.is=E})(Zi||(e.CodeLens=Zi={}));var os;(function(h){function k(m,f){return{tabSize:m,insertSpaces:f}}h.create=k;function E(m){var f=m;return D.defined(f)&&D.uinteger(f.tabSize)&&D.boolean(f.insertSpaces)}h.is=E})(os||(e.FormattingOptions=os={}));var On;(function(h){function k(m,f,P){return{range:m,target:f,data:P}}h.create=k;function E(m){var f=m;return D.defined(f)&&a.is(f.range)&&(D.undefined(f.target)||D.string(f.target))}h.is=E})(On||(e.DocumentLink=On={}));var S;(function(h){function k(m,f){return{range:m,parent:f}}h.create=k;function E(m){var f=m;return D.objectLiteral(f)&&a.is(f.range)&&(f.parent===void 0||h.is(f.parent))}h.is=E})(S||(e.SelectionRange=S={}));var I;(function(h){h.namespace="namespace",h.type="type",h.class="class",h.enum="enum",h.interface="interface",h.struct="struct",h.typeParameter="typeParameter",h.parameter="parameter",h.variable="variable",h.property="property",h.enumMember="enumMember",h.event="event",h.function="function",h.method="method",h.macro="macro",h.keyword="keyword",h.modifier="modifier",h.comment="comment",h.string="string",h.number="number",h.regexp="regexp",h.operator="operator",h.decorator="decorator"})(I||(e.SemanticTokenTypes=I={}));var B;(function(h){h.declaration="declaration",h.definition="definition",h.readonly="readonly",h.static="static",h.deprecated="deprecated",h.abstract="abstract",h.async="async",h.modification="modification",h.documentation="documentation",h.defaultLibrary="defaultLibrary"})(B||(e.SemanticTokenModifiers=B={}));var W;(function(h){function k(E){var m=E;return D.objectLiteral(m)&&(m.resultId===void 0||typeof m.resultId=="string")&&Array.isArray(m.data)&&(m.data.length===0||typeof m.data[0]=="number")}h.is=k})(W||(e.SemanticTokens=W={}));var ye;(function(h){function k(m,f){return{range:m,text:f}}h.create=k;function E(m){var f=m;return f!=null&&a.is(f.range)&&D.string(f.text)}h.is=E})(ye||(e.InlineValueText=ye={}));var de;(function(h){function k(m,f,P){return{range:m,variableName:f,caseSensitiveLookup:P}}h.create=k;function E(m){var f=m;return f!=null&&a.is(f.range)&&D.boolean(f.caseSensitiveLookup)&&(D.string(f.variableName)||f.variableName===void 0)}h.is=E})(de||(e.InlineValueVariableLookup=de={}));var De;(function(h){function k(m,f){return{range:m,expression:f}}h.create=k;function E(m){var f=m;return f!=null&&a.is(f.range)&&(D.string(f.expression)||f.expression===void 0)}h.is=E})(De||(e.InlineValueEvaluatableExpression=De={}));var Ae;(function(h){function k(m,f){return{frameId:m,stoppedLocation:f}}h.create=k;function E(m){var f=m;return D.defined(f)&&a.is(m.stoppedLocation)}h.is=E})(Ae||(e.InlineValueContext=Ae={}));var re;(function(h){h.Type=1,h.Parameter=2;function k(E){return E===1||E===2}h.is=k})(re||(e.InlayHintKind=re={}));var Te;(function(h){function k(m){return{value:m}}h.create=k;function E(m){var f=m;return D.objectLiteral(f)&&(f.tooltip===void 0||D.string(f.tooltip)||_i.is(f.tooltip))&&(f.location===void 0||c.is(f.location))&&(f.command===void 0||w.is(f.command))}h.is=E})(Te||(e.InlayHintLabelPart=Te={}));var le;(function(h){function k(m,f,P){var x={position:m,label:f};return P!==void 0&&(x.kind=P),x}h.create=k;function E(m){var f=m;return D.objectLiteral(f)&&o.is(f.position)&&(D.string(f.label)||D.typedArray(f.label,Te.is))&&(f.kind===void 0||re.is(f.kind))&&f.textEdits===void 0||D.typedArray(f.textEdits,L.is)&&(f.tooltip===void 0||D.string(f.tooltip)||_i.is(f.tooltip))&&(f.paddingLeft===void 0||D.boolean(f.paddingLeft))&&(f.paddingRight===void 0||D.boolean(f.paddingRight))}h.is=E})(le||(e.InlayHint=le={}));var Fe;(function(h){function k(E){return{kind:"snippet",value:E}}h.createSnippet=k})(Fe||(e.StringValue=Fe={}));var Je;(function(h){function k(E,m,f,P){return{insertText:E,filterText:m,range:f,command:P}}h.create=k})(Je||(e.InlineCompletionItem=Je={}));var It;(function(h){function k(E){return{items:E}}h.create=k})(It||(e.InlineCompletionList=It={}));var Mo;(function(h){h.Invoked=0,h.Automatic=1})(Mo||(e.InlineCompletionTriggerKind=Mo={}));var hp;(function(h){function k(E,m){return{range:E,text:m}}h.create=k})(hp||(e.SelectedCompletionInfo=hp={}));var pp;(function(h){function k(E,m){return{triggerKind:E,selectedCompletionInfo:m}}h.create=k})(pp||(e.InlineCompletionContext=pp={}));var mp;(function(h){function k(E){var m=E;return D.objectLiteral(m)&&i.is(m.uri)&&D.string(m.name)}h.is=k})(mp||(e.WorkspaceFolder=mp={})),e.EOL=[`
`,`\r
`,"\r"];var gp;(function(h){function k(P,x,Z,Be){return new iN(P,x,Z,Be)}h.create=k;function E(P){var x=P;return!!(D.defined(x)&&D.string(x.uri)&&(D.undefined(x.languageId)||D.string(x.languageId))&&D.uinteger(x.lineCount)&&D.func(x.getText)&&D.func(x.positionAt)&&D.func(x.offsetAt))}h.is=E;function m(P,x){for(var Z=P.getText(),Be=f(x,function(er,qo){var yp=er.range.start.line-qo.range.start.line;return yp===0?er.range.start.character-qo.range.start.character:yp}),ke=Z.length,Zt=Be.length-1;Zt>=0;Zt--){var en=Be[Zt],An=P.offsetAt(en.range.start),se=P.offsetAt(en.range.end);if(se<=ke)Z=Z.substring(0,An)+en.newText+Z.substring(se,Z.length);else throw new Error("Overlapping edit");ke=An}return Z}h.applyEdits=m;function f(P,x){if(P.length<=1)return P;var Z=P.length/2|0,Be=P.slice(0,Z),ke=P.slice(Z);f(Be,x),f(ke,x);for(var Zt=0,en=0,An=0;Zt<Be.length&&en<ke.length;){var se=x(Be[Zt],ke[en]);se<=0?P[An++]=Be[Zt++]:P[An++]=ke[en++]}for(;Zt<Be.length;)P[An++]=Be[Zt++];for(;en<ke.length;)P[An++]=ke[en++];return P}})(gp||(e.TextDocument=gp={}));var iN=function(){function h(k,E,m,f){this._uri=k,this._languageId=E,this._version=m,this._content=f,this._lineOffsets=void 0}return Object.defineProperty(h.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),h.prototype.getText=function(k){if(k){var E=this.offsetAt(k.start),m=this.offsetAt(k.end);return this._content.substring(E,m)}return this._content},h.prototype.update=function(k,E){this._content=k.text,this._version=E,this._lineOffsets=void 0},h.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var k=[],E=this._content,m=!0,f=0;f<E.length;f++){m&&(k.push(f),m=!1);var P=E.charAt(f);m=P==="\r"||P===`
`,P==="\r"&&f+1<E.length&&E.charAt(f+1)===`
`&&f++}m&&E.length>0&&k.push(E.length),this._lineOffsets=k}return this._lineOffsets},h.prototype.positionAt=function(k){k=Math.max(Math.min(k,this._content.length),0);var E=this.getLineOffsets(),m=0,f=E.length;if(f===0)return o.create(0,k);for(;m<f;){var P=Math.floor((m+f)/2);E[P]>k?f=P:m=P+1}var x=m-1;return o.create(x,k-E[x])},h.prototype.offsetAt=function(k){var E=this.getLineOffsets();if(k.line>=E.length)return this._content.length;if(k.line<0)return 0;var m=E[k.line],f=k.line+1<E.length?E[k.line+1]:this._content.length;return Math.max(Math.min(m+k.character,f),m)},Object.defineProperty(h.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),h}(),D;(function(h){var k=Object.prototype.toString;function E(se){return typeof se<"u"}h.defined=E;function m(se){return typeof se>"u"}h.undefined=m;function f(se){return se===!0||se===!1}h.boolean=f;function P(se){return k.call(se)==="[object String]"}h.string=P;function x(se){return k.call(se)==="[object Number]"}h.number=x;function Z(se,er,qo){return k.call(se)==="[object Number]"&&er<=se&&se<=qo}h.numberRange=Z;function Be(se){return k.call(se)==="[object Number]"&&-2147483648<=se&&se<=2147483647}h.integer=Be;function ke(se){return k.call(se)==="[object Number]"&&0<=se&&se<=2147483647}h.uinteger=ke;function Zt(se){return k.call(se)==="[object Function]"}h.func=Zt;function en(se){return se!==null&&typeof se=="object"}h.objectLiteral=en;function An(se,er){return Array.isArray(se)&&se.every(er)}h.typedArray=An})(D||(D={}))})});var Ie=C(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.ProtocolNotificationType=Pt.ProtocolNotificationType0=Pt.ProtocolRequestType=Pt.ProtocolRequestType0=Pt.RegistrationType=Pt.MessageDirection=void 0;var lr=Oi(),Zp;(function(n){n.clientToServer="clientToServer",n.serverToClient="serverToClient",n.both="both"})(Zp||(Pt.MessageDirection=Zp={}));var ff=class{constructor(e){this.method=e}};Pt.RegistrationType=ff;var df=class extends lr.RequestType0{constructor(e){super(e)}};Pt.ProtocolRequestType0=df;var hf=class extends lr.RequestType{constructor(e){super(e,lr.ParameterStructures.byName)}};Pt.ProtocolRequestType=hf;var pf=class extends lr.NotificationType0{constructor(e){super(e)}};Pt.ProtocolNotificationType0=pf;var mf=class extends lr.NotificationType{constructor(e){super(e,lr.ParameterStructures.byName)}};Pt.ProtocolNotificationType=mf});var ca=C(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.objectLiteral=He.typedArray=He.stringArray=He.array=He.func=He.error=He.number=He.string=He.boolean=void 0;function XN(n){return n===!0||n===!1}He.boolean=XN;function em(n){return typeof n=="string"||n instanceof String}He.string=em;function QN(n){return typeof n=="number"||n instanceof Number}He.number=QN;function JN(n){return n instanceof Error}He.error=JN;function ZN(n){return typeof n=="function"}He.func=ZN;function tm(n){return Array.isArray(n)}He.array=tm;function ew(n){return tm(n)&&n.every(e=>em(e))}He.stringArray=ew;function tw(n,e){return Array.isArray(n)&&n.every(e)}He.typedArray=tw;function nw(n){return n!==null&&typeof n=="object"}He.objectLiteral=nw});var rm=C(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.ImplementationRequest=void 0;var nm=Ie(),im;(function(n){n.method="textDocument/implementation",n.messageDirection=nm.MessageDirection.clientToServer,n.type=new nm.ProtocolRequestType(n.method)})(im||(la.ImplementationRequest=im={}))});var am=C(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.TypeDefinitionRequest=void 0;var sm=Ie(),om;(function(n){n.method="textDocument/typeDefinition",n.messageDirection=sm.MessageDirection.clientToServer,n.type=new sm.ProtocolRequestType(n.method)})(om||(ua.TypeDefinitionRequest=om={}))});var um=C(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.DidChangeWorkspaceFoldersNotification=ur.WorkspaceFoldersRequest=void 0;var fa=Ie(),cm;(function(n){n.method="workspace/workspaceFolders",n.messageDirection=fa.MessageDirection.serverToClient,n.type=new fa.ProtocolRequestType0(n.method)})(cm||(ur.WorkspaceFoldersRequest=cm={}));var lm;(function(n){n.method="workspace/didChangeWorkspaceFolders",n.messageDirection=fa.MessageDirection.clientToServer,n.type=new fa.ProtocolNotificationType(n.method)})(lm||(ur.DidChangeWorkspaceFoldersNotification=lm={}))});var hm=C(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.ConfigurationRequest=void 0;var fm=Ie(),dm;(function(n){n.method="workspace/configuration",n.messageDirection=fm.MessageDirection.serverToClient,n.type=new fm.ProtocolRequestType(n.method)})(dm||(da.ConfigurationRequest=dm={}))});var gm=C(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.ColorPresentationRequest=fr.DocumentColorRequest=void 0;var ha=Ie(),pm;(function(n){n.method="textDocument/documentColor",n.messageDirection=ha.MessageDirection.clientToServer,n.type=new ha.ProtocolRequestType(n.method)})(pm||(fr.DocumentColorRequest=pm={}));var mm;(function(n){n.method="textDocument/colorPresentation",n.messageDirection=ha.MessageDirection.clientToServer,n.type=new ha.ProtocolRequestType(n.method)})(mm||(fr.ColorPresentationRequest=mm={}))});var Tm=C(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.FoldingRangeRefreshRequest=dr.FoldingRangeRequest=void 0;var pa=Ie(),ym;(function(n){n.method="textDocument/foldingRange",n.messageDirection=pa.MessageDirection.clientToServer,n.type=new pa.ProtocolRequestType(n.method)})(ym||(dr.FoldingRangeRequest=ym={}));var bm;(function(n){n.method="workspace/foldingRange/refresh",n.messageDirection=pa.MessageDirection.serverToClient,n.type=new pa.ProtocolRequestType0(n.method)})(bm||(dr.FoldingRangeRefreshRequest=bm={}))});var km=C(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.DeclarationRequest=void 0;var vm=Ie(),Sm;(function(n){n.method="textDocument/declaration",n.messageDirection=vm.MessageDirection.clientToServer,n.type=new vm.ProtocolRequestType(n.method)})(Sm||(ma.DeclarationRequest=Sm={}))});var wm=C(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.SelectionRangeRequest=void 0;var Em=Ie(),Nm;(function(n){n.method="textDocument/selectionRange",n.messageDirection=Em.MessageDirection.clientToServer,n.type=new Em.ProtocolRequestType(n.method)})(Nm||(ga.SelectionRangeRequest=Nm={}))});var Rm=C(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.WorkDoneProgressCancelNotification=Kn.WorkDoneProgressCreateRequest=Kn.WorkDoneProgress=void 0;var iw=Oi(),ya=Ie(),_m;(function(n){n.type=new iw.ProgressType;function e(t){return t===n.type}n.is=e})(_m||(Kn.WorkDoneProgress=_m={}));var Pm;(function(n){n.method="window/workDoneProgress/create",n.messageDirection=ya.MessageDirection.serverToClient,n.type=new ya.ProtocolRequestType(n.method)})(Pm||(Kn.WorkDoneProgressCreateRequest=Pm={}));var Dm;(function(n){n.method="window/workDoneProgress/cancel",n.messageDirection=ya.MessageDirection.clientToServer,n.type=new ya.ProtocolNotificationType(n.method)})(Dm||(Kn.WorkDoneProgressCancelNotification=Dm={}))});var Im=C(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.CallHierarchyOutgoingCallsRequest=zn.CallHierarchyIncomingCallsRequest=zn.CallHierarchyPrepareRequest=void 0;var hr=Ie(),Cm;(function(n){n.method="textDocument/prepareCallHierarchy",n.messageDirection=hr.MessageDirection.clientToServer,n.type=new hr.ProtocolRequestType(n.method)})(Cm||(zn.CallHierarchyPrepareRequest=Cm={}));var Om;(function(n){n.method="callHierarchy/incomingCalls",n.messageDirection=hr.MessageDirection.clientToServer,n.type=new hr.ProtocolRequestType(n.method)})(Om||(zn.CallHierarchyIncomingCallsRequest=Om={}));var Am;(function(n){n.method="callHierarchy/outgoingCalls",n.messageDirection=hr.MessageDirection.clientToServer,n.type=new hr.ProtocolRequestType(n.method)})(Am||(zn.CallHierarchyOutgoingCallsRequest=Am={}))});var Bm=C(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.SemanticTokensRefreshRequest=Dt.SemanticTokensRangeRequest=Dt.SemanticTokensDeltaRequest=Dt.SemanticTokensRequest=Dt.SemanticTokensRegistrationType=Dt.TokenFormat=void 0;var Ln=Ie(),Lm;(function(n){n.Relative="relative"})(Lm||(Dt.TokenFormat=Lm={}));var hs;(function(n){n.method="textDocument/semanticTokens",n.type=new Ln.RegistrationType(n.method)})(hs||(Dt.SemanticTokensRegistrationType=hs={}));var xm;(function(n){n.method="textDocument/semanticTokens/full",n.messageDirection=Ln.MessageDirection.clientToServer,n.type=new Ln.ProtocolRequestType(n.method),n.registrationMethod=hs.method})(xm||(Dt.SemanticTokensRequest=xm={}));var Mm;(function(n){n.method="textDocument/semanticTokens/full/delta",n.messageDirection=Ln.MessageDirection.clientToServer,n.type=new Ln.ProtocolRequestType(n.method),n.registrationMethod=hs.method})(Mm||(Dt.SemanticTokensDeltaRequest=Mm={}));var qm;(function(n){n.method="textDocument/semanticTokens/range",n.messageDirection=Ln.MessageDirection.clientToServer,n.type=new Ln.ProtocolRequestType(n.method),n.registrationMethod=hs.method})(qm||(Dt.SemanticTokensRangeRequest=qm={}));var Fm;(function(n){n.method="workspace/semanticTokens/refresh",n.messageDirection=Ln.MessageDirection.serverToClient,n.type=new Ln.ProtocolRequestType0(n.method)})(Fm||(Dt.SemanticTokensRefreshRequest=Fm={}))});var $m=C(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.ShowDocumentRequest=void 0;var jm=Ie(),Um;(function(n){n.method="window/showDocument",n.messageDirection=jm.MessageDirection.serverToClient,n.type=new jm.ProtocolRequestType(n.method)})(Um||(ba.ShowDocumentRequest=Um={}))});var Hm=C(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.LinkedEditingRangeRequest=void 0;var Wm=Ie(),Vm;(function(n){n.method="textDocument/linkedEditingRange",n.messageDirection=Wm.MessageDirection.clientToServer,n.type=new Wm.ProtocolRequestType(n.method)})(Vm||(Ta.LinkedEditingRangeRequest=Vm={}))});var Zm=C(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.WillDeleteFilesRequest=ht.DidDeleteFilesNotification=ht.DidRenameFilesNotification=ht.WillRenameFilesRequest=ht.DidCreateFilesNotification=ht.WillCreateFilesRequest=ht.FileOperationPatternKind=void 0;var jt=Ie(),Ym;(function(n){n.file="file",n.folder="folder"})(Ym||(ht.FileOperationPatternKind=Ym={}));var Km;(function(n){n.method="workspace/willCreateFiles",n.messageDirection=jt.MessageDirection.clientToServer,n.type=new jt.ProtocolRequestType(n.method)})(Km||(ht.WillCreateFilesRequest=Km={}));var zm;(function(n){n.method="workspace/didCreateFiles",n.messageDirection=jt.MessageDirection.clientToServer,n.type=new jt.ProtocolNotificationType(n.method)})(zm||(ht.DidCreateFilesNotification=zm={}));var Gm;(function(n){n.method="workspace/willRenameFiles",n.messageDirection=jt.MessageDirection.clientToServer,n.type=new jt.ProtocolRequestType(n.method)})(Gm||(ht.WillRenameFilesRequest=Gm={}));var Xm;(function(n){n.method="workspace/didRenameFiles",n.messageDirection=jt.MessageDirection.clientToServer,n.type=new jt.ProtocolNotificationType(n.method)})(Xm||(ht.DidRenameFilesNotification=Xm={}));var Qm;(function(n){n.method="workspace/didDeleteFiles",n.messageDirection=jt.MessageDirection.clientToServer,n.type=new jt.ProtocolNotificationType(n.method)})(Qm||(ht.DidDeleteFilesNotification=Qm={}));var Jm;(function(n){n.method="workspace/willDeleteFiles",n.messageDirection=jt.MessageDirection.clientToServer,n.type=new jt.ProtocolRequestType(n.method)})(Jm||(ht.WillDeleteFilesRequest=Jm={}))});var rg=C(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.MonikerRequest=Gn.MonikerKind=Gn.UniquenessLevel=void 0;var eg=Ie(),tg;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(tg||(Gn.UniquenessLevel=tg={}));var ng;(function(n){n.$import="import",n.$export="export",n.local="local"})(ng||(Gn.MonikerKind=ng={}));var ig;(function(n){n.method="textDocument/moniker",n.messageDirection=eg.MessageDirection.clientToServer,n.type=new eg.ProtocolRequestType(n.method)})(ig||(Gn.MonikerRequest=ig={}))});var cg=C(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.TypeHierarchySubtypesRequest=Xn.TypeHierarchySupertypesRequest=Xn.TypeHierarchyPrepareRequest=void 0;var pr=Ie(),sg;(function(n){n.method="textDocument/prepareTypeHierarchy",n.messageDirection=pr.MessageDirection.clientToServer,n.type=new pr.ProtocolRequestType(n.method)})(sg||(Xn.TypeHierarchyPrepareRequest=sg={}));var og;(function(n){n.method="typeHierarchy/supertypes",n.messageDirection=pr.MessageDirection.clientToServer,n.type=new pr.ProtocolRequestType(n.method)})(og||(Xn.TypeHierarchySupertypesRequest=og={}));var ag;(function(n){n.method="typeHierarchy/subtypes",n.messageDirection=pr.MessageDirection.clientToServer,n.type=new pr.ProtocolRequestType(n.method)})(ag||(Xn.TypeHierarchySubtypesRequest=ag={}))});var fg=C(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.InlineValueRefreshRequest=mr.InlineValueRequest=void 0;var va=Ie(),lg;(function(n){n.method="textDocument/inlineValue",n.messageDirection=va.MessageDirection.clientToServer,n.type=new va.ProtocolRequestType(n.method)})(lg||(mr.InlineValueRequest=lg={}));var ug;(function(n){n.method="workspace/inlineValue/refresh",n.messageDirection=va.MessageDirection.serverToClient,n.type=new va.ProtocolRequestType0(n.method)})(ug||(mr.InlineValueRefreshRequest=ug={}))});var mg=C(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.InlayHintRefreshRequest=Qn.InlayHintResolveRequest=Qn.InlayHintRequest=void 0;var gr=Ie(),dg;(function(n){n.method="textDocument/inlayHint",n.messageDirection=gr.MessageDirection.clientToServer,n.type=new gr.ProtocolRequestType(n.method)})(dg||(Qn.InlayHintRequest=dg={}));var hg;(function(n){n.method="inlayHint/resolve",n.messageDirection=gr.MessageDirection.clientToServer,n.type=new gr.ProtocolRequestType(n.method)})(hg||(Qn.InlayHintResolveRequest=hg={}));var pg;(function(n){n.method="workspace/inlayHint/refresh",n.messageDirection=gr.MessageDirection.serverToClient,n.type=new gr.ProtocolRequestType0(n.method)})(pg||(Qn.InlayHintRefreshRequest=pg={}))});var kg=C(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.DiagnosticRefreshRequest=Ut.WorkspaceDiagnosticRequest=Ut.DocumentDiagnosticRequest=Ut.DocumentDiagnosticReportKind=Ut.DiagnosticServerCancellationData=void 0;var Sg=Oi(),rw=ca(),yr=Ie(),gg;(function(n){function e(t){let i=t;return i&&rw.boolean(i.retriggerRequest)}n.is=e})(gg||(Ut.DiagnosticServerCancellationData=gg={}));var yg;(function(n){n.Full="full",n.Unchanged="unchanged"})(yg||(Ut.DocumentDiagnosticReportKind=yg={}));var bg;(function(n){n.method="textDocument/diagnostic",n.messageDirection=yr.MessageDirection.clientToServer,n.type=new yr.ProtocolRequestType(n.method),n.partialResult=new Sg.ProgressType})(bg||(Ut.DocumentDiagnosticRequest=bg={}));var Tg;(function(n){n.method="workspace/diagnostic",n.messageDirection=yr.MessageDirection.clientToServer,n.type=new yr.ProtocolRequestType(n.method),n.partialResult=new Sg.ProgressType})(Tg||(Ut.WorkspaceDiagnosticRequest=Tg={}));var vg;(function(n){n.method="workspace/diagnostic/refresh",n.messageDirection=yr.MessageDirection.serverToClient,n.type=new yr.ProtocolRequestType0(n.method)})(vg||(Ut.DiagnosticRefreshRequest=vg={}))});var Rg=C(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.DidCloseNotebookDocumentNotification=je.DidSaveNotebookDocumentNotification=je.DidChangeNotebookDocumentNotification=je.NotebookCellArrayChange=je.DidOpenNotebookDocumentNotification=je.NotebookDocumentSyncRegistrationType=je.NotebookDocument=je.NotebookCell=je.ExecutionSummary=je.NotebookCellKind=void 0;var ps=aa(),nn=ca(),pn=Ie(),gf;(function(n){n.Markup=1,n.Code=2;function e(t){return t===1||t===2}n.is=e})(gf||(je.NotebookCellKind=gf={}));var yf;(function(n){function e(r,s){let o={executionOrder:r};return(s===!0||s===!1)&&(o.success=s),o}n.create=e;function t(r){let s=r;return nn.objectLiteral(s)&&ps.uinteger.is(s.executionOrder)&&(s.success===void 0||nn.boolean(s.success))}n.is=t;function i(r,s){return r===s?!0:r==null||s===null||s===void 0?!1:r.executionOrder===s.executionOrder&&r.success===s.success}n.equals=i})(yf||(je.ExecutionSummary=yf={}));var Sa;(function(n){function e(s,o){return{kind:s,document:o}}n.create=e;function t(s){let o=s;return nn.objectLiteral(o)&&gf.is(o.kind)&&ps.DocumentUri.is(o.document)&&(o.metadata===void 0||nn.objectLiteral(o.metadata))}n.is=t;function i(s,o){let a=new Set;return s.document!==o.document&&a.add("document"),s.kind!==o.kind&&a.add("kind"),s.executionSummary!==o.executionSummary&&a.add("executionSummary"),(s.metadata!==void 0||o.metadata!==void 0)&&!r(s.metadata,o.metadata)&&a.add("metadata"),(s.executionSummary!==void 0||o.executionSummary!==void 0)&&!yf.equals(s.executionSummary,o.executionSummary)&&a.add("executionSummary"),a}n.diff=i;function r(s,o){if(s===o)return!0;if(s==null||o===null||o===void 0||typeof s!=typeof o||typeof s!="object")return!1;let a=Array.isArray(s),c=Array.isArray(o);if(a!==c)return!1;if(a&&c){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++)if(!r(s[l],o[l]))return!1}if(nn.objectLiteral(s)&&nn.objectLiteral(o)){let l=Object.keys(s),u=Object.keys(o);if(l.length!==u.length||(l.sort(),u.sort(),!r(l,u)))return!1;for(let d=0;d<l.length;d++){let p=l[d];if(!r(s[p],o[p]))return!1}}return!0}})(Sa||(je.NotebookCell=Sa={}));var Eg;(function(n){function e(i,r,s,o){return{uri:i,notebookType:r,version:s,cells:o}}n.create=e;function t(i){let r=i;return nn.objectLiteral(r)&&nn.string(r.uri)&&ps.integer.is(r.version)&&nn.typedArray(r.cells,Sa.is)}n.is=t})(Eg||(je.NotebookDocument=Eg={}));var br;(function(n){n.method="notebookDocument/sync",n.messageDirection=pn.MessageDirection.clientToServer,n.type=new pn.RegistrationType(n.method)})(br||(je.NotebookDocumentSyncRegistrationType=br={}));var Ng;(function(n){n.method="notebookDocument/didOpen",n.messageDirection=pn.MessageDirection.clientToServer,n.type=new pn.ProtocolNotificationType(n.method),n.registrationMethod=br.method})(Ng||(je.DidOpenNotebookDocumentNotification=Ng={}));var wg;(function(n){function e(i){let r=i;return nn.objectLiteral(r)&&ps.uinteger.is(r.start)&&ps.uinteger.is(r.deleteCount)&&(r.cells===void 0||nn.typedArray(r.cells,Sa.is))}n.is=e;function t(i,r,s){let o={start:i,deleteCount:r};return s!==void 0&&(o.cells=s),o}n.create=t})(wg||(je.NotebookCellArrayChange=wg={}));var _g;(function(n){n.method="notebookDocument/didChange",n.messageDirection=pn.MessageDirection.clientToServer,n.type=new pn.ProtocolNotificationType(n.method),n.registrationMethod=br.method})(_g||(je.DidChangeNotebookDocumentNotification=_g={}));var Pg;(function(n){n.method="notebookDocument/didSave",n.messageDirection=pn.MessageDirection.clientToServer,n.type=new pn.ProtocolNotificationType(n.method),n.registrationMethod=br.method})(Pg||(je.DidSaveNotebookDocumentNotification=Pg={}));var Dg;(function(n){n.method="notebookDocument/didClose",n.messageDirection=pn.MessageDirection.clientToServer,n.type=new pn.ProtocolNotificationType(n.method),n.registrationMethod=br.method})(Dg||(je.DidCloseNotebookDocumentNotification=Dg={}))});var Ag=C(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.InlineCompletionRequest=void 0;var Cg=Ie(),Og;(function(n){n.method="textDocument/inlineCompletion",n.messageDirection=Cg.MessageDirection.clientToServer,n.type=new Cg.ProtocolRequestType(n.method)})(Og||(ka.InlineCompletionRequest=Og={}))});var Hy=C(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});y.WorkspaceSymbolRequest=y.CodeActionResolveRequest=y.CodeActionRequest=y.DocumentSymbolRequest=y.DocumentHighlightRequest=y.ReferencesRequest=y.DefinitionRequest=y.SignatureHelpRequest=y.SignatureHelpTriggerKind=y.HoverRequest=y.CompletionResolveRequest=y.CompletionRequest=y.CompletionTriggerKind=y.PublishDiagnosticsNotification=y.WatchKind=y.RelativePattern=y.FileChangeType=y.DidChangeWatchedFilesNotification=y.WillSaveTextDocumentWaitUntilRequest=y.WillSaveTextDocumentNotification=y.TextDocumentSaveReason=y.DidSaveTextDocumentNotification=y.DidCloseTextDocumentNotification=y.DidChangeTextDocumentNotification=y.TextDocumentContentChangeEvent=y.DidOpenTextDocumentNotification=y.TextDocumentSyncKind=y.TelemetryEventNotification=y.LogMessageNotification=y.ShowMessageRequest=y.ShowMessageNotification=y.MessageType=y.DidChangeConfigurationNotification=y.ExitNotification=y.ShutdownRequest=y.InitializedNotification=y.InitializeErrorCodes=y.InitializeRequest=y.WorkDoneProgressOptions=y.TextDocumentRegistrationOptions=y.StaticRegistrationOptions=y.PositionEncodingKind=y.FailureHandlingKind=y.ResourceOperationKind=y.UnregistrationRequest=y.RegistrationRequest=y.DocumentSelector=y.NotebookCellTextDocumentFilter=y.NotebookDocumentFilter=y.TextDocumentFilter=void 0;y.MonikerRequest=y.MonikerKind=y.UniquenessLevel=y.WillDeleteFilesRequest=y.DidDeleteFilesNotification=y.WillRenameFilesRequest=y.DidRenameFilesNotification=y.WillCreateFilesRequest=y.DidCreateFilesNotification=y.FileOperationPatternKind=y.LinkedEditingRangeRequest=y.ShowDocumentRequest=y.SemanticTokensRegistrationType=y.SemanticTokensRefreshRequest=y.SemanticTokensRangeRequest=y.SemanticTokensDeltaRequest=y.SemanticTokensRequest=y.TokenFormat=y.CallHierarchyPrepareRequest=y.CallHierarchyOutgoingCallsRequest=y.CallHierarchyIncomingCallsRequest=y.WorkDoneProgressCancelNotification=y.WorkDoneProgressCreateRequest=y.WorkDoneProgress=y.SelectionRangeRequest=y.DeclarationRequest=y.FoldingRangeRefreshRequest=y.FoldingRangeRequest=y.ColorPresentationRequest=y.DocumentColorRequest=y.ConfigurationRequest=y.DidChangeWorkspaceFoldersNotification=y.WorkspaceFoldersRequest=y.TypeDefinitionRequest=y.ImplementationRequest=y.ApplyWorkspaceEditRequest=y.ExecuteCommandRequest=y.PrepareRenameRequest=y.RenameRequest=y.PrepareSupportDefaultBehavior=y.DocumentOnTypeFormattingRequest=y.DocumentRangesFormattingRequest=y.DocumentRangeFormattingRequest=y.DocumentFormattingRequest=y.DocumentLinkResolveRequest=y.DocumentLinkRequest=y.CodeLensRefreshRequest=y.CodeLensResolveRequest=y.CodeLensRequest=y.WorkspaceSymbolResolveRequest=void 0;y.InlineCompletionRequest=y.DidCloseNotebookDocumentNotification=y.DidSaveNotebookDocumentNotification=y.DidChangeNotebookDocumentNotification=y.NotebookCellArrayChange=y.DidOpenNotebookDocumentNotification=y.NotebookDocumentSyncRegistrationType=y.NotebookDocument=y.NotebookCell=y.ExecutionSummary=y.NotebookCellKind=y.DiagnosticRefreshRequest=y.WorkspaceDiagnosticRequest=y.DocumentDiagnosticRequest=y.DocumentDiagnosticReportKind=y.DiagnosticServerCancellationData=y.InlayHintRefreshRequest=y.InlayHintResolveRequest=y.InlayHintRequest=y.InlineValueRefreshRequest=y.InlineValueRequest=y.TypeHierarchySupertypesRequest=y.TypeHierarchySubtypesRequest=y.TypeHierarchyPrepareRequest=void 0;var q=Ie(),Ig=aa(),Ze=ca(),sw=rm();Object.defineProperty(y,"ImplementationRequest",{enumerable:!0,get:function(){return sw.ImplementationRequest}});var ow=am();Object.defineProperty(y,"TypeDefinitionRequest",{enumerable:!0,get:function(){return ow.TypeDefinitionRequest}});var Uy=um();Object.defineProperty(y,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Uy.WorkspaceFoldersRequest}});Object.defineProperty(y,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Uy.DidChangeWorkspaceFoldersNotification}});var aw=hm();Object.defineProperty(y,"ConfigurationRequest",{enumerable:!0,get:function(){return aw.ConfigurationRequest}});var $y=gm();Object.defineProperty(y,"DocumentColorRequest",{enumerable:!0,get:function(){return $y.DocumentColorRequest}});Object.defineProperty(y,"ColorPresentationRequest",{enumerable:!0,get:function(){return $y.ColorPresentationRequest}});var Wy=Tm();Object.defineProperty(y,"FoldingRangeRequest",{enumerable:!0,get:function(){return Wy.FoldingRangeRequest}});Object.defineProperty(y,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return Wy.FoldingRangeRefreshRequest}});var cw=km();Object.defineProperty(y,"DeclarationRequest",{enumerable:!0,get:function(){return cw.DeclarationRequest}});var lw=wm();Object.defineProperty(y,"SelectionRangeRequest",{enumerable:!0,get:function(){return lw.SelectionRangeRequest}});var kf=Rm();Object.defineProperty(y,"WorkDoneProgress",{enumerable:!0,get:function(){return kf.WorkDoneProgress}});Object.defineProperty(y,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return kf.WorkDoneProgressCreateRequest}});Object.defineProperty(y,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return kf.WorkDoneProgressCancelNotification}});var Ef=Im();Object.defineProperty(y,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Ef.CallHierarchyIncomingCallsRequest}});Object.defineProperty(y,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Ef.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(y,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ef.CallHierarchyPrepareRequest}});var Tr=Bm();Object.defineProperty(y,"TokenFormat",{enumerable:!0,get:function(){return Tr.TokenFormat}});Object.defineProperty(y,"SemanticTokensRequest",{enumerable:!0,get:function(){return Tr.SemanticTokensRequest}});Object.defineProperty(y,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Tr.SemanticTokensDeltaRequest}});Object.defineProperty(y,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Tr.SemanticTokensRangeRequest}});Object.defineProperty(y,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Tr.SemanticTokensRefreshRequest}});Object.defineProperty(y,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Tr.SemanticTokensRegistrationType}});var uw=$m();Object.defineProperty(y,"ShowDocumentRequest",{enumerable:!0,get:function(){return uw.ShowDocumentRequest}});var fw=Hm();Object.defineProperty(y,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return fw.LinkedEditingRangeRequest}});var Ai=Zm();Object.defineProperty(y,"FileOperationPatternKind",{enumerable:!0,get:function(){return Ai.FileOperationPatternKind}});Object.defineProperty(y,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Ai.DidCreateFilesNotification}});Object.defineProperty(y,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Ai.WillCreateFilesRequest}});Object.defineProperty(y,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Ai.DidRenameFilesNotification}});Object.defineProperty(y,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Ai.WillRenameFilesRequest}});Object.defineProperty(y,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Ai.DidDeleteFilesNotification}});Object.defineProperty(y,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Ai.WillDeleteFilesRequest}});var Nf=rg();Object.defineProperty(y,"UniquenessLevel",{enumerable:!0,get:function(){return Nf.UniquenessLevel}});Object.defineProperty(y,"MonikerKind",{enumerable:!0,get:function(){return Nf.MonikerKind}});Object.defineProperty(y,"MonikerRequest",{enumerable:!0,get:function(){return Nf.MonikerRequest}});var wf=cg();Object.defineProperty(y,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return wf.TypeHierarchyPrepareRequest}});Object.defineProperty(y,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return wf.TypeHierarchySubtypesRequest}});Object.defineProperty(y,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return wf.TypeHierarchySupertypesRequest}});var Vy=fg();Object.defineProperty(y,"InlineValueRequest",{enumerable:!0,get:function(){return Vy.InlineValueRequest}});Object.defineProperty(y,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Vy.InlineValueRefreshRequest}});var _f=mg();Object.defineProperty(y,"InlayHintRequest",{enumerable:!0,get:function(){return _f.InlayHintRequest}});Object.defineProperty(y,"InlayHintResolveRequest",{enumerable:!0,get:function(){return _f.InlayHintResolveRequest}});Object.defineProperty(y,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return _f.InlayHintRefreshRequest}});var ms=kg();Object.defineProperty(y,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return ms.DiagnosticServerCancellationData}});Object.defineProperty(y,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return ms.DocumentDiagnosticReportKind}});Object.defineProperty(y,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return ms.DocumentDiagnosticRequest}});Object.defineProperty(y,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return ms.WorkspaceDiagnosticRequest}});Object.defineProperty(y,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return ms.DiagnosticRefreshRequest}});var mn=Rg();Object.defineProperty(y,"NotebookCellKind",{enumerable:!0,get:function(){return mn.NotebookCellKind}});Object.defineProperty(y,"ExecutionSummary",{enumerable:!0,get:function(){return mn.ExecutionSummary}});Object.defineProperty(y,"NotebookCell",{enumerable:!0,get:function(){return mn.NotebookCell}});Object.defineProperty(y,"NotebookDocument",{enumerable:!0,get:function(){return mn.NotebookDocument}});Object.defineProperty(y,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return mn.NotebookDocumentSyncRegistrationType}});Object.defineProperty(y,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return mn.DidOpenNotebookDocumentNotification}});Object.defineProperty(y,"NotebookCellArrayChange",{enumerable:!0,get:function(){return mn.NotebookCellArrayChange}});Object.defineProperty(y,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return mn.DidChangeNotebookDocumentNotification}});Object.defineProperty(y,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return mn.DidSaveNotebookDocumentNotification}});Object.defineProperty(y,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return mn.DidCloseNotebookDocumentNotification}});var dw=Ag();Object.defineProperty(y,"InlineCompletionRequest",{enumerable:!0,get:function(){return dw.InlineCompletionRequest}});var bf;(function(n){function e(t){let i=t;return Ze.string(i)||Ze.string(i.language)||Ze.string(i.scheme)||Ze.string(i.pattern)}n.is=e})(bf||(y.TextDocumentFilter=bf={}));var Tf;(function(n){function e(t){let i=t;return Ze.objectLiteral(i)&&(Ze.string(i.notebookType)||Ze.string(i.scheme)||Ze.string(i.pattern))}n.is=e})(Tf||(y.NotebookDocumentFilter=Tf={}));var vf;(function(n){function e(t){let i=t;return Ze.objectLiteral(i)&&(Ze.string(i.notebook)||Tf.is(i.notebook))&&(i.language===void 0||Ze.string(i.language))}n.is=e})(vf||(y.NotebookCellTextDocumentFilter=vf={}));var Sf;(function(n){function e(t){if(!Array.isArray(t))return!1;for(let i of t)if(!Ze.string(i)&&!bf.is(i)&&!vf.is(i))return!1;return!0}n.is=e})(Sf||(y.DocumentSelector=Sf={}));var Lg;(function(n){n.method="client/registerCapability",n.messageDirection=q.MessageDirection.serverToClient,n.type=new q.ProtocolRequestType(n.method)})(Lg||(y.RegistrationRequest=Lg={}));var xg;(function(n){n.method="client/unregisterCapability",n.messageDirection=q.MessageDirection.serverToClient,n.type=new q.ProtocolRequestType(n.method)})(xg||(y.UnregistrationRequest=xg={}));var Mg;(function(n){n.Create="create",n.Rename="rename",n.Delete="delete"})(Mg||(y.ResourceOperationKind=Mg={}));var qg;(function(n){n.Abort="abort",n.Transactional="transactional",n.TextOnlyTransactional="textOnlyTransactional",n.Undo="undo"})(qg||(y.FailureHandlingKind=qg={}));var Fg;(function(n){n.UTF8="utf-8",n.UTF16="utf-16",n.UTF32="utf-32"})(Fg||(y.PositionEncodingKind=Fg={}));var Bg;(function(n){function e(t){let i=t;return i&&Ze.string(i.id)&&i.id.length>0}n.hasId=e})(Bg||(y.StaticRegistrationOptions=Bg={}));var jg;(function(n){function e(t){let i=t;return i&&(i.documentSelector===null||Sf.is(i.documentSelector))}n.is=e})(jg||(y.TextDocumentRegistrationOptions=jg={}));var Ug;(function(n){function e(i){let r=i;return Ze.objectLiteral(r)&&(r.workDoneProgress===void 0||Ze.boolean(r.workDoneProgress))}n.is=e;function t(i){let r=i;return r&&Ze.boolean(r.workDoneProgress)}n.hasWorkDoneProgress=t})(Ug||(y.WorkDoneProgressOptions=Ug={}));var $g;(function(n){n.method="initialize",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})($g||(y.InitializeRequest=$g={}));var Wg;(function(n){n.unknownProtocolVersion=1})(Wg||(y.InitializeErrorCodes=Wg={}));var Vg;(function(n){n.method="initialized",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolNotificationType(n.method)})(Vg||(y.InitializedNotification=Vg={}));var Hg;(function(n){n.method="shutdown",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType0(n.method)})(Hg||(y.ShutdownRequest=Hg={}));var Yg;(function(n){n.method="exit",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolNotificationType0(n.method)})(Yg||(y.ExitNotification=Yg={}));var Kg;(function(n){n.method="workspace/didChangeConfiguration",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolNotificationType(n.method)})(Kg||(y.DidChangeConfigurationNotification=Kg={}));var zg;(function(n){n.Error=1,n.Warning=2,n.Info=3,n.Log=4,n.Debug=5})(zg||(y.MessageType=zg={}));var Gg;(function(n){n.method="window/showMessage",n.messageDirection=q.MessageDirection.serverToClient,n.type=new q.ProtocolNotificationType(n.method)})(Gg||(y.ShowMessageNotification=Gg={}));var Xg;(function(n){n.method="window/showMessageRequest",n.messageDirection=q.MessageDirection.serverToClient,n.type=new q.ProtocolRequestType(n.method)})(Xg||(y.ShowMessageRequest=Xg={}));var Qg;(function(n){n.method="window/logMessage",n.messageDirection=q.MessageDirection.serverToClient,n.type=new q.ProtocolNotificationType(n.method)})(Qg||(y.LogMessageNotification=Qg={}));var Jg;(function(n){n.method="telemetry/event",n.messageDirection=q.MessageDirection.serverToClient,n.type=new q.ProtocolNotificationType(n.method)})(Jg||(y.TelemetryEventNotification=Jg={}));var Zg;(function(n){n.None=0,n.Full=1,n.Incremental=2})(Zg||(y.TextDocumentSyncKind=Zg={}));var ey;(function(n){n.method="textDocument/didOpen",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolNotificationType(n.method)})(ey||(y.DidOpenTextDocumentNotification=ey={}));var ty;(function(n){function e(i){let r=i;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}n.isIncremental=e;function t(i){let r=i;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}n.isFull=t})(ty||(y.TextDocumentContentChangeEvent=ty={}));var ny;(function(n){n.method="textDocument/didChange",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolNotificationType(n.method)})(ny||(y.DidChangeTextDocumentNotification=ny={}));var iy;(function(n){n.method="textDocument/didClose",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolNotificationType(n.method)})(iy||(y.DidCloseTextDocumentNotification=iy={}));var ry;(function(n){n.method="textDocument/didSave",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolNotificationType(n.method)})(ry||(y.DidSaveTextDocumentNotification=ry={}));var sy;(function(n){n.Manual=1,n.AfterDelay=2,n.FocusOut=3})(sy||(y.TextDocumentSaveReason=sy={}));var oy;(function(n){n.method="textDocument/willSave",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolNotificationType(n.method)})(oy||(y.WillSaveTextDocumentNotification=oy={}));var ay;(function(n){n.method="textDocument/willSaveWaitUntil",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(ay||(y.WillSaveTextDocumentWaitUntilRequest=ay={}));var cy;(function(n){n.method="workspace/didChangeWatchedFiles",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolNotificationType(n.method)})(cy||(y.DidChangeWatchedFilesNotification=cy={}));var ly;(function(n){n.Created=1,n.Changed=2,n.Deleted=3})(ly||(y.FileChangeType=ly={}));var uy;(function(n){function e(t){let i=t;return Ze.objectLiteral(i)&&(Ig.URI.is(i.baseUri)||Ig.WorkspaceFolder.is(i.baseUri))&&Ze.string(i.pattern)}n.is=e})(uy||(y.RelativePattern=uy={}));var fy;(function(n){n.Create=1,n.Change=2,n.Delete=4})(fy||(y.WatchKind=fy={}));var dy;(function(n){n.method="textDocument/publishDiagnostics",n.messageDirection=q.MessageDirection.serverToClient,n.type=new q.ProtocolNotificationType(n.method)})(dy||(y.PublishDiagnosticsNotification=dy={}));var hy;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.TriggerForIncompleteCompletions=3})(hy||(y.CompletionTriggerKind=hy={}));var py;(function(n){n.method="textDocument/completion",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(py||(y.CompletionRequest=py={}));var my;(function(n){n.method="completionItem/resolve",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(my||(y.CompletionResolveRequest=my={}));var gy;(function(n){n.method="textDocument/hover",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(gy||(y.HoverRequest=gy={}));var yy;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.ContentChange=3})(yy||(y.SignatureHelpTriggerKind=yy={}));var by;(function(n){n.method="textDocument/signatureHelp",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(by||(y.SignatureHelpRequest=by={}));var Ty;(function(n){n.method="textDocument/definition",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(Ty||(y.DefinitionRequest=Ty={}));var vy;(function(n){n.method="textDocument/references",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(vy||(y.ReferencesRequest=vy={}));var Sy;(function(n){n.method="textDocument/documentHighlight",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(Sy||(y.DocumentHighlightRequest=Sy={}));var ky;(function(n){n.method="textDocument/documentSymbol",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(ky||(y.DocumentSymbolRequest=ky={}));var Ey;(function(n){n.method="textDocument/codeAction",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(Ey||(y.CodeActionRequest=Ey={}));var Ny;(function(n){n.method="codeAction/resolve",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(Ny||(y.CodeActionResolveRequest=Ny={}));var wy;(function(n){n.method="workspace/symbol",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(wy||(y.WorkspaceSymbolRequest=wy={}));var _y;(function(n){n.method="workspaceSymbol/resolve",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(_y||(y.WorkspaceSymbolResolveRequest=_y={}));var Py;(function(n){n.method="textDocument/codeLens",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(Py||(y.CodeLensRequest=Py={}));var Dy;(function(n){n.method="codeLens/resolve",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(Dy||(y.CodeLensResolveRequest=Dy={}));var Ry;(function(n){n.method="workspace/codeLens/refresh",n.messageDirection=q.MessageDirection.serverToClient,n.type=new q.ProtocolRequestType0(n.method)})(Ry||(y.CodeLensRefreshRequest=Ry={}));var Cy;(function(n){n.method="textDocument/documentLink",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(Cy||(y.DocumentLinkRequest=Cy={}));var Oy;(function(n){n.method="documentLink/resolve",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(Oy||(y.DocumentLinkResolveRequest=Oy={}));var Ay;(function(n){n.method="textDocument/formatting",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(Ay||(y.DocumentFormattingRequest=Ay={}));var Iy;(function(n){n.method="textDocument/rangeFormatting",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(Iy||(y.DocumentRangeFormattingRequest=Iy={}));var Ly;(function(n){n.method="textDocument/rangesFormatting",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(Ly||(y.DocumentRangesFormattingRequest=Ly={}));var xy;(function(n){n.method="textDocument/onTypeFormatting",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(xy||(y.DocumentOnTypeFormattingRequest=xy={}));var My;(function(n){n.Identifier=1})(My||(y.PrepareSupportDefaultBehavior=My={}));var qy;(function(n){n.method="textDocument/rename",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(qy||(y.RenameRequest=qy={}));var Fy;(function(n){n.method="textDocument/prepareRename",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(Fy||(y.PrepareRenameRequest=Fy={}));var By;(function(n){n.method="workspace/executeCommand",n.messageDirection=q.MessageDirection.clientToServer,n.type=new q.ProtocolRequestType(n.method)})(By||(y.ExecuteCommandRequest=By={}));var jy;(function(n){n.method="workspace/applyEdit",n.messageDirection=q.MessageDirection.serverToClient,n.type=new q.ProtocolRequestType("workspace/applyEdit")})(jy||(y.ApplyWorkspaceEditRequest=jy={}))});var Ky=C(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.createProtocolConnection=void 0;var Yy=Oi();function hw(n,e,t,i){return Yy.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,Yy.createMessageConnection)(n,e,t,i)}Ea.createProtocolConnection=hw});var Gy=C(Rt=>{"use strict";var pw=Rt&&Rt.__createBinding||(Object.create?function(n,e,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,i,r)}:function(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}),Na=Rt&&Rt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&pw(e,n,t)};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.LSPErrorCodes=Rt.createProtocolConnection=void 0;Na(Oi(),Rt);Na(aa(),Rt);Na(Ie(),Rt);Na(Hy(),Rt);var mw=Ky();Object.defineProperty(Rt,"createProtocolConnection",{enumerable:!0,get:function(){return mw.createProtocolConnection}});var zy;(function(n){n.lspReservedErrorRangeStart=-32899,n.RequestFailed=-32803,n.ServerCancelled=-32802,n.ContentModified=-32801,n.RequestCancelled=-32800,n.lspReservedErrorRangeEnd=-32800})(zy||(Rt.LSPErrorCodes=zy={}))});var Ue=C(gn=>{"use strict";var gw=gn&&gn.__createBinding||(Object.create?function(n,e,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,i,r)}:function(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}),Xy=gn&&gn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&gw(e,n,t)};Object.defineProperty(gn,"__esModule",{value:!0});gn.createProtocolConnection=void 0;var yw=uf();Xy(uf(),gn);Xy(Gy(),gn);function bw(n,e,t,i){return(0,yw.createMessageConnection)(n,e,t,i)}gn.createProtocolConnection=bw});var Pf=C($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.generateUuid=$t.parse=$t.isUUID=$t.v4=$t.empty=void 0;var gs=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},ys=class n extends gs{static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return n._oneOf(n._chars)}constructor(){super([n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-","4",n._randomHex(),n._randomHex(),n._randomHex(),"-",n._oneOf(n._timeHighBits),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex()].join(""))}};ys._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];ys._timeHighBits=["8","9","a","b"];$t.empty=new gs("00000000-0000-0000-0000-000000000000");function Qy(){return new ys}$t.v4=Qy;var Tw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Jy(n){return Tw.test(n)}$t.isUUID=Jy;function vw(n){if(!Jy(n))throw new Error("invalid uuid");return new gs(n)}$t.parse=vw;function Sw(){return Qy().asHex()}$t.generateUuid=Sw});var Zy=C(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.attachPartialResult=Zn.ProgressFeature=Zn.attachWorkDone=void 0;var Jn=Ue(),kw=Pf(),Ii=class n{constructor(e,t){this._connection=e,this._token=t,n.Instances.set(this._token,this)}begin(e,t,i,r){let s={kind:"begin",title:e,percentage:t,message:i,cancellable:r};this._connection.sendProgress(Jn.WorkDoneProgress.type,this._token,s)}report(e,t){let i={kind:"report"};typeof e=="number"?(i.percentage=e,t!==void 0&&(i.message=t)):i.message=e,this._connection.sendProgress(Jn.WorkDoneProgress.type,this._token,i)}done(){n.Instances.delete(this._token),this._connection.sendProgress(Jn.WorkDoneProgress.type,this._token,{kind:"end"})}};Ii.Instances=new Map;var wa=class extends Ii{constructor(e,t){super(e,t),this._source=new Jn.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},bs=class{constructor(){}begin(){}report(){}done(){}},_a=class extends bs{constructor(){super(),this._source=new Jn.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Ew(n,e){if(e===void 0||e.workDoneToken===void 0)return new bs;let t=e.workDoneToken;return delete e.workDoneToken,new Ii(n,t)}Zn.attachWorkDone=Ew;var Nw=n=>class extends n{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(Jn.WorkDoneProgressCancelNotification.type,t=>{let i=Ii.Instances.get(t.token);(i instanceof wa||i instanceof _a)&&i.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new bs:new Ii(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,kw.generateUuid)();return this.connection.sendRequest(Jn.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new wa(this.connection,e))}else return Promise.resolve(new _a)}};Zn.ProgressFeature=Nw;var Df;(function(n){n.type=new Jn.ProgressType})(Df||(Df={}));var Rf=class{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(Df.type,this._token,e)}};function ww(n,e){if(e===void 0||e.partialResultToken===void 0)return;let t=e.partialResultToken;return delete e.partialResultToken,new Rf(n,t)}Zn.attachPartialResult=ww});var eb=C(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.ConfigurationFeature=void 0;var _w=Ue(),Pw=Fo(),Dw=n=>class extends n{getConfiguration(e){return e?Pw.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(_w.ConfigurationRequest.type,t).then(i=>Array.isArray(i)?Array.isArray(e)?i:i[0]:Array.isArray(e)?[]:null)}};Pa.ConfigurationFeature=Dw});var tb=C(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.WorkspaceFoldersFeature=void 0;var Da=Ue(),Rw=n=>class extends n{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Da.Emitter,this.connection.onNotification(Da.DidChangeWorkspaceFoldersNotification.type,i=>{this._onDidChangeWorkspaceFolders.fire(i.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let t=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=t===!0||typeof t=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Da.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Da.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Ra.WorkspaceFoldersFeature=Rw});var nb=C(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.CallHierarchyFeature=void 0;var Cf=Ue(),Cw=n=>class extends n{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(Cf.CallHierarchyPrepareRequest.type,(t,i)=>e(t,i,this.attachWorkDoneProgress(t),void 0)),onIncomingCalls:e=>{let t=Cf.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(t,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(t,i)))},onOutgoingCalls:e=>{let t=Cf.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(t,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(t,i)))}}}};Ca.CallHierarchyFeature=Cw});var Af=C(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.SemanticTokensBuilder=ei.SemanticTokensDiff=ei.SemanticTokensFeature=void 0;var Oa=Ue(),Ow=n=>class extends n{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(Oa.SemanticTokensRefreshRequest.type),on:e=>{let t=Oa.SemanticTokensRequest.type;return this.connection.onRequest(t,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(t,i)))},onDelta:e=>{let t=Oa.SemanticTokensDeltaRequest.type;return this.connection.onRequest(t,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(t,i)))},onRange:e=>{let t=Oa.SemanticTokensRangeRequest.type;return this.connection.onRequest(t,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(t,i)))}}}};ei.SemanticTokensFeature=Ow;var Aa=class{constructor(e,t){this.originalSequence=e,this.modifiedSequence=t}computeDiff(){let e=this.originalSequence.length,t=this.modifiedSequence.length,i=0;for(;i<t&&i<e&&this.originalSequence[i]===this.modifiedSequence[i];)i++;if(i<t&&i<e){let r=e-1,s=t-1;for(;r>=i&&s>=i&&this.originalSequence[r]===this.modifiedSequence[s];)r--,s--;(r<i||s<i)&&(r++,s++);let o=r-i+1,a=this.modifiedSequence.slice(i,s+1);return a.length===1&&a[0]===this.originalSequence[r]?[{start:i,deleteCount:o-1}]:[{start:i,deleteCount:o,data:a}]}else return i<t?[{start:i,deleteCount:0,data:this.modifiedSequence.slice(i)}]:i<e?[{start:i,deleteCount:e-i}]:[]}};ei.SemanticTokensDiff=Aa;var Of=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,i,r,s){let o=e,a=t;this._dataLen>0&&(o-=this._prevLine,o===0&&(a-=this._prevChar)),this._data[this._dataLen++]=o,this._data[this._dataLen++]=a,this._data[this._dataLen++]=i,this._data[this._dataLen++]=r,this._data[this._dataLen++]=s,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Aa(this._prevData,this._data).computeDiff()}:this.build()}};ei.SemanticTokensBuilder=Of});var ib=C(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.ShowDocumentFeature=void 0;var Aw=Ue(),Iw=n=>class extends n{showDocument(e){return this.connection.sendRequest(Aw.ShowDocumentRequest.type,e)}};Ia.ShowDocumentFeature=Iw});var rb=C(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.FileOperationsFeature=void 0;var vr=Ue(),Lw=n=>class extends n{onDidCreateFiles(e){return this.connection.onNotification(vr.DidCreateFilesNotification.type,t=>{e(t)})}onDidRenameFiles(e){return this.connection.onNotification(vr.DidRenameFilesNotification.type,t=>{e(t)})}onDidDeleteFiles(e){return this.connection.onNotification(vr.DidDeleteFilesNotification.type,t=>{e(t)})}onWillCreateFiles(e){return this.connection.onRequest(vr.WillCreateFilesRequest.type,(t,i)=>e(t,i))}onWillRenameFiles(e){return this.connection.onRequest(vr.WillRenameFilesRequest.type,(t,i)=>e(t,i))}onWillDeleteFiles(e){return this.connection.onRequest(vr.WillDeleteFilesRequest.type,(t,i)=>e(t,i))}};La.FileOperationsFeature=Lw});var sb=C(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.LinkedEditingRangeFeature=void 0;var xw=Ue(),Mw=n=>class extends n{onLinkedEditingRange(e){return this.connection.onRequest(xw.LinkedEditingRangeRequest.type,(t,i)=>e(t,i,this.attachWorkDoneProgress(t),void 0))}};xa.LinkedEditingRangeFeature=Mw});var ob=C(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});Ma.TypeHierarchyFeature=void 0;var If=Ue(),qw=n=>class extends n{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(If.TypeHierarchyPrepareRequest.type,(t,i)=>e(t,i,this.attachWorkDoneProgress(t),void 0)),onSupertypes:e=>{let t=If.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(t,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(t,i)))},onSubtypes:e=>{let t=If.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(t,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(t,i)))}}}};Ma.TypeHierarchyFeature=qw});var cb=C(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.InlineValueFeature=void 0;var ab=Ue(),Fw=n=>class extends n{get inlineValue(){return{refresh:()=>this.connection.sendRequest(ab.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(ab.InlineValueRequest.type,(t,i)=>e(t,i,this.attachWorkDoneProgress(t)))}}};qa.InlineValueFeature=Fw});var ub=C(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.FoldingRangeFeature=void 0;var lb=Ue(),Bw=n=>class extends n{get foldingRange(){return{refresh:()=>this.connection.sendRequest(lb.FoldingRangeRefreshRequest.type),on:e=>{let t=lb.FoldingRangeRequest.type;return this.connection.onRequest(t,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(t,i)))}}}};Fa.FoldingRangeFeature=Bw});var fb=C(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.InlayHintFeature=void 0;var Lf=Ue(),jw=n=>class extends n{get inlayHint(){return{refresh:()=>this.connection.sendRequest(Lf.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(Lf.InlayHintRequest.type,(t,i)=>e(t,i,this.attachWorkDoneProgress(t))),resolve:e=>this.connection.onRequest(Lf.InlayHintResolveRequest.type,(t,i)=>e(t,i))}}};Ba.InlayHintFeature=jw});var db=C(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.DiagnosticFeature=void 0;var Ts=Ue(),Uw=n=>class extends n{get diagnostics(){return{refresh:()=>this.connection.sendRequest(Ts.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(Ts.DocumentDiagnosticRequest.type,(t,i)=>e(t,i,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(Ts.DocumentDiagnosticRequest.partialResult,t))),onWorkspace:e=>this.connection.onRequest(Ts.WorkspaceDiagnosticRequest.type,(t,i)=>e(t,i,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(Ts.WorkspaceDiagnosticRequest.partialResult,t)))}}};ja.DiagnosticFeature=Uw});var Mf=C(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.TextDocuments=void 0;var Li=Ue(),xf=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new Li.Emitter,this._onDidOpen=new Li.Emitter,this._onDidClose=new Li.Emitter,this._onDidSave=new Li.Emitter,this._onWillSave=new Li.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=Li.TextDocumentSyncKind.Incremental;let t=[];return t.push(e.onDidOpenTextDocument(i=>{let r=i.textDocument,s=this._configuration.create(r.uri,r.languageId,r.version,r.text);this._syncedDocuments.set(r.uri,s);let o=Object.freeze({document:s});this._onDidOpen.fire(o),this._onDidChangeContent.fire(o)})),t.push(e.onDidChangeTextDocument(i=>{let r=i.textDocument,s=i.contentChanges;if(s.length===0)return;let{version:o}=r;if(o==null)throw new Error(`Received document change event for ${r.uri} without valid version identifier`);let a=this._syncedDocuments.get(r.uri);a!==void 0&&(a=this._configuration.update(a,s,o),this._syncedDocuments.set(r.uri,a),this._onDidChangeContent.fire(Object.freeze({document:a})))})),t.push(e.onDidCloseTextDocument(i=>{let r=this._syncedDocuments.get(i.textDocument.uri);r!==void 0&&(this._syncedDocuments.delete(i.textDocument.uri),this._onDidClose.fire(Object.freeze({document:r})))})),t.push(e.onWillSaveTextDocument(i=>{let r=this._syncedDocuments.get(i.textDocument.uri);r!==void 0&&this._onWillSave.fire(Object.freeze({document:r,reason:i.reason}))})),t.push(e.onWillSaveTextDocumentWaitUntil((i,r)=>{let s=this._syncedDocuments.get(i.textDocument.uri);return s!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:s,reason:i.reason}),r):[]})),t.push(e.onDidSaveTextDocument(i=>{let r=this._syncedDocuments.get(i.textDocument.uri);r!==void 0&&this._onDidSave.fire(Object.freeze({document:r}))})),Li.Disposable.create(()=>{t.forEach(i=>i.dispose())})}};Ua.TextDocuments=xf});var Ff=C(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.NotebookDocuments=Sr.NotebookSyncFeature=void 0;var Wt=Ue(),hb=Mf(),$w=n=>class extends n{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(Wt.DidOpenNotebookDocumentNotification.type,t=>{e(t)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(Wt.DidChangeNotebookDocumentNotification.type,t=>{e(t)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(Wt.DidSaveNotebookDocumentNotification.type,t=>{e(t)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(Wt.DidCloseNotebookDocumentNotification.type,t=>{e(t)})}}};Sr.NotebookSyncFeature=$w;var $a=class n{onDidOpenTextDocument(e){return this.openHandler=e,Wt.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,Wt.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,Wt.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return n.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return n.NULL_DISPOSE}onDidSaveTextDocument(){return n.NULL_DISPOSE}};$a.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var qf=class{constructor(e){e instanceof hb.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new hb.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Wt.Emitter,this._onDidChange=new Wt.Emitter,this._onDidSave=new Wt.Emitter,this._onDidClose=new Wt.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let t=this.notebookCellMap.get(e);return t&&t[0]}findNotebookDocumentForCell(e){let t=typeof e=="string"?e:e.document,i=this.notebookCellMap.get(t);return i&&i[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let t=new $a,i=[];return i.push(this.cellTextDocuments.listen(t)),i.push(e.notebooks.synchronization.onDidOpenNotebookDocument(r=>{this.notebookDocuments.set(r.notebookDocument.uri,r.notebookDocument);for(let s of r.cellTextDocuments)t.openTextDocument({textDocument:s});this.updateCellMap(r.notebookDocument),this._onDidOpen.fire(r.notebookDocument)})),i.push(e.notebooks.synchronization.onDidChangeNotebookDocument(r=>{let s=this.notebookDocuments.get(r.notebookDocument.uri);if(s===void 0)return;s.version=r.notebookDocument.version;let o=s.metadata,a=!1,c=r.change;c.metadata!==void 0&&(a=!0,s.metadata=c.metadata);let l=[],u=[],d=[],p=[];if(c.cells!==void 0){let R=c.cells;if(R.structure!==void 0){let v=R.structure.array;if(s.cells.splice(v.start,v.deleteCount,...v.cells!==void 0?v.cells:[]),R.structure.didOpen!==void 0)for(let T of R.structure.didOpen)t.openTextDocument({textDocument:T}),l.push(T.uri);if(R.structure.didClose)for(let T of R.structure.didClose)t.closeTextDocument({textDocument:T}),u.push(T.uri)}if(R.data!==void 0){let v=new Map(R.data.map(T=>[T.document,T]));for(let T=0;T<=s.cells.length;T++){let w=v.get(s.cells[T].document);if(w!==void 0){let L=s.cells.splice(T,1,w);if(d.push({old:L[0],new:w}),v.delete(w.document),v.size===0)break}}}if(R.textContent!==void 0)for(let v of R.textContent)t.changeTextDocument({textDocument:v.document,contentChanges:v.changes}),p.push(v.document.uri)}this.updateCellMap(s);let g={notebookDocument:s};a&&(g.metadata={old:o,new:s.metadata});let _=[];for(let R of l)_.push(this.getNotebookCell(R));let b=[];for(let R of u)b.push(this.getNotebookCell(R));let N=[];for(let R of p)N.push(this.getNotebookCell(R));(_.length>0||b.length>0||d.length>0||N.length>0)&&(g.cells={added:_,removed:b,changed:{data:d,textContent:N}}),(g.metadata!==void 0||g.cells!==void 0)&&this._onDidChange.fire(g)})),i.push(e.notebooks.synchronization.onDidSaveNotebookDocument(r=>{let s=this.notebookDocuments.get(r.notebookDocument.uri);s!==void 0&&this._onDidSave.fire(s)})),i.push(e.notebooks.synchronization.onDidCloseNotebookDocument(r=>{let s=this.notebookDocuments.get(r.notebookDocument.uri);if(s!==void 0){this._onDidClose.fire(s);for(let o of r.cellTextDocuments)t.closeTextDocument({textDocument:o});this.notebookDocuments.delete(r.notebookDocument.uri);for(let o of s.cells)this.notebookCellMap.delete(o.document)}})),Wt.Disposable.create(()=>{i.forEach(r=>r.dispose())})}updateCellMap(e){for(let t of e.cells)this.notebookCellMap.set(t.document,[t,e])}};Sr.NotebookDocuments=qf});var pb=C(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.MonikerFeature=void 0;var Ww=Ue(),Vw=n=>class extends n{get moniker(){return{on:e=>{let t=Ww.MonikerRequest.type;return this.connection.onRequest(t,(i,r)=>e(i,r,this.attachWorkDoneProgress(i),this.attachPartialResultProgress(t,i)))}}}};Wa.MonikerFeature=Vw});var Vf=C(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.createConnection=ue.combineFeatures=ue.combineNotebooksFeatures=ue.combineLanguagesFeatures=ue.combineWorkspaceFeatures=ue.combineWindowFeatures=ue.combineClientFeatures=ue.combineTracerFeatures=ue.combineTelemetryFeatures=ue.combineConsoleFeatures=ue._NotebooksImpl=ue._LanguagesImpl=ue.BulkUnregistration=ue.BulkRegistration=ue.ErrorMessageTracker=void 0;var U=Ue(),Vt=Fo(),jf=Pf(),Q=Zy(),Hw=eb(),Yw=tb(),Kw=nb(),zw=Af(),Gw=ib(),Xw=rb(),Qw=sb(),Jw=ob(),Zw=cb(),e_=ub(),t_=fb(),n_=db(),i_=Ff(),r_=pb();function Bf(n){if(n!==null)return n}var Uf=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach(t=>{e.window.showErrorMessage(t)})}};ue.ErrorMessageTracker=Uf;var Va=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(U.MessageType.Error,e)}warn(e){this.send(U.MessageType.Warning,e)}info(e){this.send(U.MessageType.Info,e)}log(e){this.send(U.MessageType.Log,e)}debug(e){this.send(U.MessageType.Debug,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification(U.LogMessageNotification.type,{type:e,message:t}).catch(()=>{(0,U.RAL)().console.error("Sending log message failed")})}},$f=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...t){let i={type:U.MessageType.Error,message:e,actions:t};return this.connection.sendRequest(U.ShowMessageRequest.type,i).then(Bf)}showWarningMessage(e,...t){let i={type:U.MessageType.Warning,message:e,actions:t};return this.connection.sendRequest(U.ShowMessageRequest.type,i).then(Bf)}showInformationMessage(e,...t){let i={type:U.MessageType.Info,message:e,actions:t};return this.connection.sendRequest(U.ShowMessageRequest.type,i).then(Bf)}},mb=(0,Gw.ShowDocumentFeature)((0,Q.ProgressFeature)($f)),gb;(function(n){function e(){return new Ha}n.create=e})(gb||(ue.BulkRegistration=gb={}));var Ha=class{constructor(){this._registrations=[],this._registered=new Set}add(e,t){let i=Vt.string(e)?e:e.method;if(this._registered.has(i))throw new Error(`${i} is already added to this registration`);let r=jf.generateUuid();this._registrations.push({id:r,method:i,registerOptions:t||{}}),this._registered.add(i)}asRegistrationParams(){return{registrations:this._registrations}}},yb;(function(n){function e(){return new vs(void 0,[])}n.create=e})(yb||(ue.BulkUnregistration=yb={}));var vs=class{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(i=>{this._unregistrations.set(i.method,i)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let i of this._unregistrations.values())e.push(i);let t={unregisterations:e};this._connection.sendRequest(U.UnregistrationRequest.type,t).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let t=Vt.string(e)?e:e.method,i=this._unregistrations.get(t);if(!i)return!1;let r={unregisterations:[i]};return this._connection.sendRequest(U.UnregistrationRequest.type,r).then(()=>{this._unregistrations.delete(t)},s=>{this._connection.console.info(`Un-registering request handler for ${i.id} failed.`)}),!0}},Ya=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,i){return e instanceof Ha?this.registerMany(e):e instanceof vs?this.registerSingle1(e,t,i):this.registerSingle2(e,t)}registerSingle1(e,t,i){let r=Vt.string(t)?t:t.method,s=jf.generateUuid(),o={registrations:[{id:s,method:r,registerOptions:i||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(U.RegistrationRequest.type,o).then(a=>(e.add({id:s,method:r}),e),a=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(a)))}registerSingle2(e,t){let i=Vt.string(e)?e:e.method,r=jf.generateUuid(),s={registrations:[{id:r,method:i,registerOptions:t||{}}]};return this.connection.sendRequest(U.RegistrationRequest.type,s).then(o=>U.Disposable.create(()=>{this.unregisterSingle(r,i).catch(()=>{this.connection.console.info(`Un-registering capability with id ${r} failed.`)})}),o=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(o)))}unregisterSingle(e,t){let i={unregisterations:[{id:e,method:t}]};return this.connection.sendRequest(U.UnregistrationRequest.type,i).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let t=e.asRegistrationParams();return this.connection.sendRequest(U.RegistrationRequest.type,t).then(()=>new vs(this._connection,t.registrations.map(i=>({id:i.id,method:i.method}))),i=>(this.connection.console.info("Bulk registration failed."),Promise.reject(i)))}},Wf=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function t(r){return r&&!!r.edit}let i=t(e)?e:{edit:e};return this.connection.sendRequest(U.ApplyWorkspaceEditRequest.type,i)}},bb=(0,Xw.FileOperationsFeature)((0,Yw.WorkspaceFoldersFeature)((0,Hw.ConfigurationFeature)(Wf))),Ka=class{constructor(){this._trace=U.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==U.Trace.Off&&this.connection.sendNotification(U.LogTraceNotification.type,{message:e,verbose:this._trace===U.Trace.Verbose?t:void 0}).catch(()=>{})}},za=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(U.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},Ga=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,Q.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,Q.attachPartialResult)(this.connection,t)}};ue._LanguagesImpl=Ga;var Tb=(0,e_.FoldingRangeFeature)((0,r_.MonikerFeature)((0,n_.DiagnosticFeature)((0,t_.InlayHintFeature)((0,Zw.InlineValueFeature)((0,Jw.TypeHierarchyFeature)((0,Qw.LinkedEditingRangeFeature)((0,zw.SemanticTokensFeature)((0,Kw.CallHierarchyFeature)(Ga))))))))),Xa=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,Q.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,Q.attachPartialResult)(this.connection,t)}};ue._NotebooksImpl=Xa;var vb=(0,i_.NotebookSyncFeature)(Xa);function Sb(n,e){return function(t){return e(n(t))}}ue.combineConsoleFeatures=Sb;function kb(n,e){return function(t){return e(n(t))}}ue.combineTelemetryFeatures=kb;function Eb(n,e){return function(t){return e(n(t))}}ue.combineTracerFeatures=Eb;function Nb(n,e){return function(t){return e(n(t))}}ue.combineClientFeatures=Nb;function wb(n,e){return function(t){return e(n(t))}}ue.combineWindowFeatures=wb;function _b(n,e){return function(t){return e(n(t))}}ue.combineWorkspaceFeatures=_b;function Pb(n,e){return function(t){return e(n(t))}}ue.combineLanguagesFeatures=Pb;function Db(n,e){return function(t){return e(n(t))}}ue.combineNotebooksFeatures=Db;function s_(n,e){function t(r,s,o){return r&&s?o(r,s):r||s}return{__brand:"features",console:t(n.console,e.console,Sb),tracer:t(n.tracer,e.tracer,Eb),telemetry:t(n.telemetry,e.telemetry,kb),client:t(n.client,e.client,Nb),window:t(n.window,e.window,wb),workspace:t(n.workspace,e.workspace,_b),languages:t(n.languages,e.languages,Pb),notebooks:t(n.notebooks,e.notebooks,Db)}}ue.combineFeatures=s_;function o_(n,e,t){let i=t&&t.console?new(t.console(Va)):new Va,r=n(i);i.rawAttach(r);let s=t&&t.tracer?new(t.tracer(Ka)):new Ka,o=t&&t.telemetry?new(t.telemetry(za)):new za,a=t&&t.client?new(t.client(Ya)):new Ya,c=t&&t.window?new(t.window(mb)):new mb,l=t&&t.workspace?new(t.workspace(bb)):new bb,u=t&&t.languages?new(t.languages(Tb)):new Tb,d=t&&t.notebooks?new(t.notebooks(vb)):new vb,p=[i,s,o,a,c,l,u,d];function g(v){return v instanceof Promise?v:Vt.thenable(v)?new Promise((T,w)=>{v.then(L=>T(L),L=>w(L))}):Promise.resolve(v)}let _,b,N,R={listen:()=>r.listen(),sendRequest:(v,...T)=>r.sendRequest(Vt.string(v)?v:v.method,...T),onRequest:(v,T)=>r.onRequest(v,T),sendNotification:(v,T)=>{let w=Vt.string(v)?v:v.method;return r.sendNotification(w,T)},onNotification:(v,T)=>r.onNotification(v,T),onProgress:r.onProgress,sendProgress:r.sendProgress,onInitialize:v=>(b=v,{dispose:()=>{b=void 0}}),onInitialized:v=>r.onNotification(U.InitializedNotification.type,v),onShutdown:v=>(_=v,{dispose:()=>{_=void 0}}),onExit:v=>(N=v,{dispose:()=>{N=void 0}}),get console(){return i},get telemetry(){return o},get tracer(){return s},get client(){return a},get window(){return c},get workspace(){return l},get languages(){return u},get notebooks(){return d},onDidChangeConfiguration:v=>r.onNotification(U.DidChangeConfigurationNotification.type,v),onDidChangeWatchedFiles:v=>r.onNotification(U.DidChangeWatchedFilesNotification.type,v),__textDocumentSync:void 0,onDidOpenTextDocument:v=>r.onNotification(U.DidOpenTextDocumentNotification.type,v),onDidChangeTextDocument:v=>r.onNotification(U.DidChangeTextDocumentNotification.type,v),onDidCloseTextDocument:v=>r.onNotification(U.DidCloseTextDocumentNotification.type,v),onWillSaveTextDocument:v=>r.onNotification(U.WillSaveTextDocumentNotification.type,v),onWillSaveTextDocumentWaitUntil:v=>r.onRequest(U.WillSaveTextDocumentWaitUntilRequest.type,v),onDidSaveTextDocument:v=>r.onNotification(U.DidSaveTextDocumentNotification.type,v),sendDiagnostics:v=>r.sendNotification(U.PublishDiagnosticsNotification.type,v),onHover:v=>r.onRequest(U.HoverRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),void 0)),onCompletion:v=>r.onRequest(U.CompletionRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onCompletionResolve:v=>r.onRequest(U.CompletionResolveRequest.type,v),onSignatureHelp:v=>r.onRequest(U.SignatureHelpRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),void 0)),onDeclaration:v=>r.onRequest(U.DeclarationRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onDefinition:v=>r.onRequest(U.DefinitionRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onTypeDefinition:v=>r.onRequest(U.TypeDefinitionRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onImplementation:v=>r.onRequest(U.ImplementationRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onReferences:v=>r.onRequest(U.ReferencesRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onDocumentHighlight:v=>r.onRequest(U.DocumentHighlightRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onDocumentSymbol:v=>r.onRequest(U.DocumentSymbolRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onWorkspaceSymbol:v=>r.onRequest(U.WorkspaceSymbolRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onWorkspaceSymbolResolve:v=>r.onRequest(U.WorkspaceSymbolResolveRequest.type,v),onCodeAction:v=>r.onRequest(U.CodeActionRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onCodeActionResolve:v=>r.onRequest(U.CodeActionResolveRequest.type,(T,w)=>v(T,w)),onCodeLens:v=>r.onRequest(U.CodeLensRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onCodeLensResolve:v=>r.onRequest(U.CodeLensResolveRequest.type,(T,w)=>v(T,w)),onDocumentFormatting:v=>r.onRequest(U.DocumentFormattingRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),void 0)),onDocumentRangeFormatting:v=>r.onRequest(U.DocumentRangeFormattingRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),void 0)),onDocumentOnTypeFormatting:v=>r.onRequest(U.DocumentOnTypeFormattingRequest.type,(T,w)=>v(T,w)),onRenameRequest:v=>r.onRequest(U.RenameRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),void 0)),onPrepareRename:v=>r.onRequest(U.PrepareRenameRequest.type,(T,w)=>v(T,w)),onDocumentLinks:v=>r.onRequest(U.DocumentLinkRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onDocumentLinkResolve:v=>r.onRequest(U.DocumentLinkResolveRequest.type,(T,w)=>v(T,w)),onDocumentColor:v=>r.onRequest(U.DocumentColorRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onColorPresentation:v=>r.onRequest(U.ColorPresentationRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onFoldingRanges:v=>r.onRequest(U.FoldingRangeRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onSelectionRanges:v=>r.onRequest(U.SelectionRangeRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),(0,Q.attachPartialResult)(r,T))),onExecuteCommand:v=>r.onRequest(U.ExecuteCommandRequest.type,(T,w)=>v(T,w,(0,Q.attachWorkDone)(r,T),void 0)),dispose:()=>r.dispose()};for(let v of p)v.attach(R);return r.onRequest(U.InitializeRequest.type,v=>{e.initialize(v),Vt.string(v.trace)&&(s.trace=U.Trace.fromString(v.trace));for(let T of p)T.initialize(v.capabilities);if(b){let T=b(v,new U.CancellationTokenSource().token,(0,Q.attachWorkDone)(r,v),void 0);return g(T).then(w=>{if(w instanceof U.ResponseError)return w;let L=w;L||(L={capabilities:{}});let M=L.capabilities;M||(M={},L.capabilities=M),M.textDocumentSync===void 0||M.textDocumentSync===null?M.textDocumentSync=Vt.number(R.__textDocumentSync)?R.__textDocumentSync:U.TextDocumentSyncKind.None:!Vt.number(M.textDocumentSync)&&!Vt.number(M.textDocumentSync.change)&&(M.textDocumentSync.change=Vt.number(R.__textDocumentSync)?R.__textDocumentSync:U.TextDocumentSyncKind.None);for(let H of p)H.fillServerCapabilities(M);return L})}else{let T={capabilities:{textDocumentSync:U.TextDocumentSyncKind.None}};for(let w of p)w.fillServerCapabilities(T.capabilities);return T}}),r.onRequest(U.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,_)return _(new U.CancellationTokenSource().token)}),r.onNotification(U.ExitNotification.type,()=>{try{N&&N()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),r.onNotification(U.SetTraceNotification.type,v=>{s.trace=U.Trace.fromString(v.value)}),R}ue.createConnection=o_});var Rb=C(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.resolveModulePath=Ct.FileSystem=Ct.resolveGlobalYarnPath=Ct.resolveGlobalNodePath=Ct.resolve=Ct.uriToFilePath=void 0;var a_=require("url"),rn=require("path"),Hf=require("fs"),Gf=require("child_process");function c_(n){let e=a_.parse(n);if(e.protocol!=="file:"||!e.path)return;let t=e.path.split("/");for(var i=0,r=t.length;i<r;i++)t[i]=decodeURIComponent(t[i]);if(process.platform==="win32"&&t.length>1){let s=t[0],o=t[1];s.length===0&&o.length>1&&o[1]===":"&&t.shift()}return rn.normalize(t.join("/"))}Ct.uriToFilePath=c_;function Yf(){return process.platform==="win32"}function Qa(n,e,t,i){let r="NODE_PATH",s=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((o,a)=>{let c=process.env,l=Object.create(null);Object.keys(c).forEach(u=>l[u]=c[u]),e&&Hf.existsSync(e)&&(l[r]?l[r]=e+rn.delimiter+l[r]:l[r]=e,i&&i(`NODE_PATH value is: ${l[r]}`)),l.ELECTRON_RUN_AS_NODE="1";try{let u=(0,Gf.fork)("",[],{cwd:t,env:l,execArgv:["-e",s]});if(u.pid===void 0){a(new Error(`Starting process to resolve node module  ${n} failed`));return}u.on("error",p=>{a(p)}),u.on("message",p=>{p.c==="r"&&(u.send({c:"e"}),p.s?o(p.r):a(new Error(`Failed to resolve module: ${n}`)))});let d={c:"rs",a:n};u.send(d)}catch(u){a(u)}})}Ct.resolve=Qa;function Kf(n){let e="npm",t=Object.create(null);Object.keys(process.env).forEach(s=>t[s]=process.env[s]),t.NO_UPDATE_NOTIFIER="true";let i={encoding:"utf8",env:t};Yf()&&(e="npm.cmd",i.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let s=(0,Gf.spawnSync)(e,["config","get","prefix"],i).stdout;if(!s){n&&n("'npm config get prefix' didn't return a value.");return}let o=s.trim();return n&&n(`'npm config get prefix' value is: ${o}`),o.length>0?Yf()?rn.join(o,"node_modules"):rn.join(o,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",r)}}Ct.resolveGlobalNodePath=Kf;function l_(n){let e="yarn",t={encoding:"utf8"};Yf()&&(e="yarn.cmd",t.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let r=(0,Gf.spawnSync)(e,["global","dir","--json"],t),s=r.stdout;if(!s){n&&(n("'yarn global dir' didn't return a value."),r.stderr&&n(r.stderr));return}let o=s.trim().split(/\r?\n/);for(let a of o)try{let c=JSON.parse(a);if(c.type==="log")return rn.join(c.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",i)}}Ct.resolveGlobalYarnPath=l_;var zf;(function(n){let e;function t(){return e!==void 0||(process.platform==="win32"?e=!1:e=!Hf.existsSync(__filename.toUpperCase())||!Hf.existsSync(__filename.toLowerCase())),e}n.isCaseSensitive=t;function i(r,s){return t()?rn.normalize(s).indexOf(rn.normalize(r))===0:rn.normalize(s).toLowerCase().indexOf(rn.normalize(r).toLowerCase())===0}n.isParent=i})(zf||(Ct.FileSystem=zf={}));function u_(n,e,t,i){return t?(rn.isAbsolute(t)||(t=rn.join(n,t)),Qa(e,t,t,i).then(r=>zf.isParent(t,r)?r:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,r=>Qa(e,Kf(i),n,i))):Qa(e,Kf(i),n,i)}Ct.resolveModulePath=u_});var Xf=C((kI,Cb)=>{"use strict";Cb.exports=Ue()});var Ob=C(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.InlineCompletionFeature=void 0;var f_=Ue(),d_=n=>class extends n{get inlineCompletion(){return{on:e=>this.connection.onRequest(f_.InlineCompletionRequest.type,(t,i)=>e(t,i,this.attachWorkDoneProgress(t)))}}};Ja.InlineCompletionFeature=d_});var Lb=C(pt=>{"use strict";var h_=pt&&pt.__createBinding||(Object.create?function(n,e,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,i,r)}:function(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}),Ib=pt&&pt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&h_(e,n,t)};Object.defineProperty(pt,"__esModule",{value:!0});pt.ProposedFeatures=pt.NotebookDocuments=pt.TextDocuments=pt.SemanticTokensBuilder=void 0;var p_=Af();Object.defineProperty(pt,"SemanticTokensBuilder",{enumerable:!0,get:function(){return p_.SemanticTokensBuilder}});var m_=Ob();Ib(Ue(),pt);var g_=Mf();Object.defineProperty(pt,"TextDocuments",{enumerable:!0,get:function(){return g_.TextDocuments}});var y_=Ff();Object.defineProperty(pt,"NotebookDocuments",{enumerable:!0,get:function(){return y_.NotebookDocuments}});Ib(Vf(),pt);var Ab;(function(n){n.all={__brand:"features",languages:m_.InlineCompletionFeature}})(Ab||(pt.ProposedFeatures=Ab={}))});var te=C(Ht=>{"use strict";var b_=Ht&&Ht.__createBinding||(Object.create?function(n,e,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,i,r)}:function(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]}),Fb=Ht&&Ht.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&b_(e,n,t)};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.createConnection=Ht.Files=void 0;var xb=require("node:util"),Qf=Fo(),T_=Vf(),Ss=Rb(),xi=Xf();Fb(Xf(),Ht);Fb(Lb(),Ht);var Mb;(function(n){n.uriToFilePath=Ss.uriToFilePath,n.resolveGlobalNodePath=Ss.resolveGlobalNodePath,n.resolveGlobalYarnPath=Ss.resolveGlobalYarnPath,n.resolve=Ss.resolve,n.resolveModulePath=Ss.resolveModulePath})(Mb||(Ht.Files=Mb={}));var qb;function Za(){if(qb!==void 0)try{qb.end()}catch{}}var kr=!1,Bb;function v_(){let n="--clientProcessId";function e(t){try{let i=parseInt(t);isNaN(i)||(Bb=setInterval(()=>{try{process.kill(i,0)}catch{Za(),process.exit(kr?0:1)}},3e3))}catch{}}for(let t=2;t<process.argv.length;t++){let i=process.argv[t];if(i===n&&t+1<process.argv.length){e(process.argv[t+1]);return}else{let r=i.split("=");r[0]===n&&e(r[1])}}}v_();var S_={initialize:n=>{let e=n.processId;Qf.number(e)&&Bb===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(kr?0:1)}},3e3)},get shutdownReceived(){return kr},set shutdownReceived(n){kr=n},exit:n=>{Za(),process.exit(n)}};function k_(n,e,t,i){let r,s,o,a;return n!==void 0&&n.__brand==="features"&&(r=n,n=e,e=t,t=i),xi.ConnectionStrategy.is(n)||xi.ConnectionOptions.is(n)?a=n:(s=n,o=e,a=t),E_(s,o,a,r)}Ht.createConnection=k_;function E_(n,e,t,i){let r=!1;if(!n&&!e&&process.argv.length>2){let c,l,u=process.argv.slice(2);for(let d=0;d<u.length;d++){let p=u[d];if(p==="--node-ipc"){n=new xi.IPCMessageReader(process),e=new xi.IPCMessageWriter(process);break}else if(p==="--stdio"){r=!0,n=process.stdin,e=process.stdout;break}else if(p==="--socket"){c=parseInt(u[d+1]);break}else if(p==="--pipe"){l=u[d+1];break}else{var s=p.split("=");if(s[0]==="--socket"){c=parseInt(s[1]);break}else if(s[0]==="--pipe"){l=s[1];break}}}if(c){let d=(0,xi.createServerSocketTransport)(c);n=d[0],e=d[1]}else if(l){let d=(0,xi.createServerPipeTransport)(l);n=d[0],e=d[1]}}var o="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!n)throw new Error("Connection input stream is not set. "+o);if(!e)throw new Error("Connection output stream is not set. "+o);if(Qf.func(n.read)&&Qf.func(n.on)){let c=n;c.on("end",()=>{Za(),process.exit(kr?0:1)}),c.on("close",()=>{Za(),process.exit(kr?0:1)})}let a=c=>{let l=(0,xi.createProtocolConnection)(n,e,c,t);return r&&N_(c),l};return(0,T_.createConnection)(a,S_,i)}function N_(n){function e(i){return i.map(r=>typeof r=="string"?r:(0,xb.inspect)(r)).join(" ")}let t=new Map;console.assert=function(r,...s){if(!r)if(s.length===0)n.error("Assertion failed");else{let[o,...a]=s;n.error(`Assertion failed: ${o} ${e(a)}`)}},console.count=function(r="default"){let s=String(r),o=t.get(s)??0;o+=1,t.set(s,o),n.log(`${s}: ${s}`)},console.countReset=function(r){r===void 0?t.clear():t.delete(String(r))},console.debug=function(...r){n.log(e(r))},console.dir=function(r,s){n.log((0,xb.inspect)(r,s))},console.log=function(...r){n.log(e(r))},console.error=function(...r){n.error(e(r))},console.trace=function(...r){let s=new Error().stack.replace(/(.+\n){2}/,""),o="Trace";r.length!==0&&(o+=`: ${e(r)}`),n.log(`${o}
${s}`)},console.warn=function(...r){n.warn(e(r))}}});var Ub=C((PI,jb)=>{"use strict";jb.exports=te()});var ce=C(lt=>{"use strict";var cd=Symbol.for("yaml.alias"),nv=Symbol.for("yaml.document"),Ac=Symbol.for("yaml.map"),iv=Symbol.for("yaml.pair"),ld=Symbol.for("yaml.scalar"),Ic=Symbol.for("yaml.seq"),qn=Symbol.for("yaml.node.type"),eP=n=>!!n&&typeof n=="object"&&n[qn]===cd,tP=n=>!!n&&typeof n=="object"&&n[qn]===nv,nP=n=>!!n&&typeof n=="object"&&n[qn]===Ac,iP=n=>!!n&&typeof n=="object"&&n[qn]===iv,rv=n=>!!n&&typeof n=="object"&&n[qn]===ld,rP=n=>!!n&&typeof n=="object"&&n[qn]===Ic;function sv(n){if(n&&typeof n=="object")switch(n[qn]){case Ac:case Ic:return!0}return!1}function sP(n){if(n&&typeof n=="object")switch(n[qn]){case cd:case Ac:case ld:case Ic:return!0}return!1}var oP=n=>(rv(n)||sv(n))&&!!n.anchor;lt.ALIAS=cd;lt.DOC=nv;lt.MAP=Ac;lt.NODE_TYPE=qn;lt.PAIR=iv;lt.SCALAR=ld;lt.SEQ=Ic;lt.hasAnchor=oP;lt.isAlias=eP;lt.isCollection=sv;lt.isDocument=tP;lt.isMap=nP;lt.isNode=sP;lt.isPair=iP;lt.isScalar=rv;lt.isSeq=rP});var Ps=C(ud=>{"use strict";var Xe=ce(),Ot=Symbol("break visit"),ov=Symbol("skip children"),kn=Symbol("remove node");function Lc(n,e){let t=av(e);Xe.isDocument(n)?Ir(null,n.contents,t,Object.freeze([n]))===kn&&(n.contents=null):Ir(null,n,t,Object.freeze([]))}Lc.BREAK=Ot;Lc.SKIP=ov;Lc.REMOVE=kn;function Ir(n,e,t,i){let r=cv(n,e,t,i);if(Xe.isNode(r)||Xe.isPair(r))return lv(n,i,r),Ir(n,r,t,i);if(typeof r!="symbol"){if(Xe.isCollection(e)){i=Object.freeze(i.concat(e));for(let s=0;s<e.items.length;++s){let o=Ir(s,e.items[s],t,i);if(typeof o=="number")s=o-1;else{if(o===Ot)return Ot;o===kn&&(e.items.splice(s,1),s-=1)}}}else if(Xe.isPair(e)){i=Object.freeze(i.concat(e));let s=Ir("key",e.key,t,i);if(s===Ot)return Ot;s===kn&&(e.key=null);let o=Ir("value",e.value,t,i);if(o===Ot)return Ot;o===kn&&(e.value=null)}}return r}async function xc(n,e){let t=av(e);Xe.isDocument(n)?await Lr(null,n.contents,t,Object.freeze([n]))===kn&&(n.contents=null):await Lr(null,n,t,Object.freeze([]))}xc.BREAK=Ot;xc.SKIP=ov;xc.REMOVE=kn;async function Lr(n,e,t,i){let r=await cv(n,e,t,i);if(Xe.isNode(r)||Xe.isPair(r))return lv(n,i,r),Lr(n,r,t,i);if(typeof r!="symbol"){if(Xe.isCollection(e)){i=Object.freeze(i.concat(e));for(let s=0;s<e.items.length;++s){let o=await Lr(s,e.items[s],t,i);if(typeof o=="number")s=o-1;else{if(o===Ot)return Ot;o===kn&&(e.items.splice(s,1),s-=1)}}}else if(Xe.isPair(e)){i=Object.freeze(i.concat(e));let s=await Lr("key",e.key,t,i);if(s===Ot)return Ot;s===kn&&(e.key=null);let o=await Lr("value",e.value,t,i);if(o===Ot)return Ot;o===kn&&(e.value=null)}}return r}function av(n){return typeof n=="object"&&(n.Collection||n.Node||n.Value)?Object.assign({Alias:n.Node,Map:n.Node,Scalar:n.Node,Seq:n.Node},n.Value&&{Map:n.Value,Scalar:n.Value,Seq:n.Value},n.Collection&&{Map:n.Collection,Seq:n.Collection},n):n}function cv(n,e,t,i){if(typeof t=="function")return t(n,e,i);if(Xe.isMap(e))return t.Map?.(n,e,i);if(Xe.isSeq(e))return t.Seq?.(n,e,i);if(Xe.isPair(e))return t.Pair?.(n,e,i);if(Xe.isScalar(e))return t.Scalar?.(n,e,i);if(Xe.isAlias(e))return t.Alias?.(n,e,i)}function lv(n,e,t){let i=e[e.length-1];if(Xe.isCollection(i))i.items[n]=t;else if(Xe.isPair(i))n==="key"?i.key=t:i.value=t;else if(Xe.isDocument(i))i.contents=t;else{let r=Xe.isAlias(i)?"alias":"scalar";throw new Error(`Cannot replace node with ${r} parent`)}}ud.visit=Lc;ud.visitAsync=xc});var fd=C(fv=>{"use strict";var uv=ce(),aP=Ps(),cP={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},lP=n=>n.replace(/[!,[\]{}]/g,e=>cP[e]),Ds=class n{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},n.defaultYaml,e),this.tags=Object.assign({},n.defaultTags,t)}clone(){let e=new n(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){let e=new n(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:n.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},n.defaultTags);break}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:n.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},n.defaultTags),this.atNextDocument=!1);let i=e.trim().split(/[ \t]+/),r=i.shift();switch(r){case"%TAG":{if(i.length!==2&&(t(0,"%TAG directive should contain exactly two parts"),i.length<2))return!1;let[s,o]=i;return this.tags[s]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,i.length!==1)return t(0,"%YAML directive should contain exactly one part"),!1;let[s]=i;if(s==="1.1"||s==="1.2")return this.yaml.version=s,!0;{let o=/^\d+\.\d+$/.test(s);return t(6,`Unsupported YAML version ${s}`,o),!1}}default:return t(0,`Unknown directive ${r}`,!0),!1}}tagName(e,t){if(e==="!")return"!";if(e[0]!=="!")return t(`Not a valid tag: ${e}`),null;if(e[1]==="<"){let o=e.slice(2,-1);return o==="!"||o==="!!"?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&t("Verbatim tags must end with a >"),o)}let[,i,r]=e.match(/^(.*!)([^!]*)$/s);r||t(`The ${e} tag has no suffix`);let s=this.tags[i];if(s)try{return s+decodeURIComponent(r)}catch(o){return t(String(o)),null}return i==="!"?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(let[t,i]of Object.entries(this.tags))if(e.startsWith(i))return t+lP(e.substring(i.length));return e[0]==="!"?e:`!<${e}>`}toString(e){let t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],i=Object.entries(this.tags),r;if(e&&i.length>0&&uv.isNode(e.contents)){let s={};aP.visit(e.contents,(o,a)=>{uv.isNode(a)&&a.tag&&(s[a.tag]=!0)}),r=Object.keys(s)}else r=[];for(let[s,o]of i)s==="!!"&&o==="tag:yaml.org,2002:"||(!e||r.some(a=>a.startsWith(o)))&&t.push(`%TAG ${s} ${o}`);return t.join(`
`)}};Ds.defaultYaml={explicit:!1,version:"1.2"};Ds.defaultTags={"!!":"tag:yaml.org,2002:"};fv.Directives=Ds});var Mc=C(Rs=>{"use strict";var dv=ce(),uP=Ps();function fP(n){if(/[\x00-\x19\s,[\]{}]/.test(n)){let t=`Anchor must not contain whitespace or control characters: ${JSON.stringify(n)}`;throw new Error(t)}return!0}function hv(n){let e=new Set;return uP.visit(n,{Value(t,i){i.anchor&&e.add(i.anchor)}}),e}function pv(n,e){for(let t=1;;++t){let i=`${n}${t}`;if(!e.has(i))return i}}function dP(n,e){let t=[],i=new Map,r=null;return{onAnchor:s=>{t.push(s),r||(r=hv(n));let o=pv(e,r);return r.add(o),o},setAnchors:()=>{for(let s of t){let o=i.get(s);if(typeof o=="object"&&o.anchor&&(dv.isScalar(o.node)||dv.isCollection(o.node)))o.node.anchor=o.anchor;else{let a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=s,a}}},sourceObjects:i}}Rs.anchorIsValid=fP;Rs.anchorNames=hv;Rs.createNodeAnchors=dP;Rs.findNewAnchor=pv});var dd=C(mv=>{"use strict";function Cs(n,e,t,i){if(i&&typeof i=="object")if(Array.isArray(i))for(let r=0,s=i.length;r<s;++r){let o=i[r],a=Cs(n,i,String(r),o);a===void 0?delete i[r]:a!==o&&(i[r]=a)}else if(i instanceof Map)for(let r of Array.from(i.keys())){let s=i.get(r),o=Cs(n,i,r,s);o===void 0?i.delete(r):o!==s&&i.set(r,o)}else if(i instanceof Set)for(let r of Array.from(i)){let s=Cs(n,i,r,r);s===void 0?i.delete(r):s!==r&&(i.delete(r),i.add(s))}else for(let[r,s]of Object.entries(i)){let o=Cs(n,i,r,s);o===void 0?delete i[r]:o!==s&&(i[r]=o)}return n.call(e,t,i)}mv.applyReviver=Cs});var di=C(yv=>{"use strict";var hP=ce();function gv(n,e,t){if(Array.isArray(n))return n.map((i,r)=>gv(i,String(r),t));if(n&&typeof n.toJSON=="function"){if(!t||!hP.hasAnchor(n))return n.toJSON(e,t);let i={aliasCount:0,count:1,res:void 0};t.anchors.set(n,i),t.onCreate=s=>{i.res=s,delete t.onCreate};let r=n.toJSON(e,t);return t.onCreate&&t.onCreate(r),r}return typeof n=="bigint"&&!t?.keep?Number(n):n}yv.toJS=gv});var qc=C(Tv=>{"use strict";var pP=dd(),bv=ce(),mP=di(),hd=class{constructor(e){Object.defineProperty(this,bv.NODE_TYPE,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:i,onAnchor:r,reviver:s}={}){if(!bv.isDocument(e))throw new TypeError("A document argument is required");let o={anchors:new Map,doc:e,keep:!0,mapAsMap:t===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},a=mP.toJS(this,"",o);if(typeof r=="function")for(let{count:c,res:l}of o.anchors.values())r(l,c);return typeof s=="function"?pP.applyReviver(s,{"":a},"",a):a}};Tv.NodeBase=hd});var Os=C(Sv=>{"use strict";var gP=Mc(),vv=Ps(),Fc=ce(),yP=qc(),bP=di(),pd=class extends yP.NodeBase{constructor(e){super(Fc.ALIAS),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let t;return vv.visit(e,{Node:(i,r)=>{if(r===this)return vv.visit.BREAK;r.anchor===this.source&&(t=r)}}),t}toJSON(e,t){if(!t)return{source:this.source};let{anchors:i,doc:r,maxAliasCount:s}=t,o=this.resolve(r);if(!o){let c=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(c)}let a=i.get(o);if(a||(bP.toJS(o,null,t),a=i.get(o)),!a||a.res===void 0){let c="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(c)}if(s>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=Bc(r,o,i)),a.count*a.aliasCount>s)){let c="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(c)}return a.res}toString(e,t,i){let r=`*${this.source}`;if(e){if(gP.anchorIsValid(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){let s=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(s)}if(e.implicitKey)return`${r} `}return r}};function Bc(n,e,t){if(Fc.isAlias(e)){let i=e.resolve(n),r=t&&i&&t.get(i);return r?r.count*r.aliasCount:0}else if(Fc.isCollection(e)){let i=0;for(let r of e.items){let s=Bc(n,r,t);s>i&&(i=s)}return i}else if(Fc.isPair(e)){let i=Bc(n,e.key,t),r=Bc(n,e.value,t);return Math.max(i,r)}return 1}Sv.Alias=pd});var ze=C(md=>{"use strict";var TP=ce(),vP=qc(),SP=di(),kP=n=>!n||typeof n!="function"&&typeof n!="object",hi=class extends vP.NodeBase{constructor(e){super(TP.SCALAR),this.value=e}toJSON(e,t){return t?.keep?this.value:SP.toJS(this.value,e,t)}toString(){return String(this.value)}};hi.BLOCK_FOLDED="BLOCK_FOLDED";hi.BLOCK_LITERAL="BLOCK_LITERAL";hi.PLAIN="PLAIN";hi.QUOTE_DOUBLE="QUOTE_DOUBLE";hi.QUOTE_SINGLE="QUOTE_SINGLE";md.Scalar=hi;md.isScalarValue=kP});var As=C(Ev=>{"use strict";var EP=Os(),ji=ce(),kv=ze(),NP="tag:yaml.org,2002:";function wP(n,e,t){if(e){let i=t.filter(s=>s.tag===e),r=i.find(s=>!s.format)??i[0];if(!r)throw new Error(`Tag ${e} not found`);return r}return t.find(i=>i.identify?.(n)&&!i.format)}function _P(n,e,t){if(ji.isDocument(n)&&(n=n.contents),ji.isNode(n))return n;if(ji.isPair(n)){let d=t.schema[ji.MAP].createNode?.(t.schema,null,t);return d.items.push(n),d}(n instanceof String||n instanceof Number||n instanceof Boolean||typeof BigInt<"u"&&n instanceof BigInt)&&(n=n.valueOf());let{aliasDuplicateObjects:i,onAnchor:r,onTagObj:s,schema:o,sourceObjects:a}=t,c;if(i&&n&&typeof n=="object"){if(c=a.get(n),c)return c.anchor||(c.anchor=r(n)),new EP.Alias(c.anchor);c={anchor:null,node:null},a.set(n,c)}e?.startsWith("!!")&&(e=NP+e.slice(2));let l=wP(n,e,o.tags);if(!l){if(n&&typeof n.toJSON=="function"&&(n=n.toJSON()),!n||typeof n!="object"){let d=new kv.Scalar(n);return c&&(c.node=d),d}l=n instanceof Map?o[ji.MAP]:Symbol.iterator in Object(n)?o[ji.SEQ]:o[ji.MAP]}s&&(s(l),delete t.onTagObj);let u=l?.createNode?l.createNode(t.schema,n,t):typeof l?.nodeClass?.from=="function"?l.nodeClass.from(t.schema,n,t):new kv.Scalar(n);return e?u.tag=e:l.default||(u.tag=l.tag),c&&(c.node=u),u}Ev.createNode=_P});var Uc=C(jc=>{"use strict";var PP=As(),En=ce(),DP=qc();function gd(n,e,t){let i=t;for(let r=e.length-1;r>=0;--r){let s=e[r];if(typeof s=="number"&&Number.isInteger(s)&&s>=0){let o=[];o[s]=i,i=o}else i=new Map([[s,i]])}return PP.createNode(i,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:n,sourceObjects:new Map})}var Nv=n=>n==null||typeof n=="object"&&!!n[Symbol.iterator]().next().done,yd=class extends DP.NodeBase{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){let t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(i=>En.isNode(i)||En.isPair(i)?i.clone(e):i),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(Nv(e))this.add(t);else{let[i,...r]=e,s=this.get(i,!0);if(En.isCollection(s))s.addIn(r,t);else if(s===void 0&&this.schema)this.set(i,gd(this.schema,r,t));else throw new Error(`Expected YAML collection at ${i}. Remaining path: ${r}`)}}deleteIn(e){let[t,...i]=e;if(i.length===0)return this.delete(t);let r=this.get(t,!0);if(En.isCollection(r))return r.deleteIn(i);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${i}`)}getIn(e,t){let[i,...r]=e,s=this.get(i,!0);return r.length===0?!t&&En.isScalar(s)?s.value:s:En.isCollection(s)?s.getIn(r,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!En.isPair(t))return!1;let i=t.value;return i==null||e&&En.isScalar(i)&&i.value==null&&!i.commentBefore&&!i.comment&&!i.tag})}hasIn(e){let[t,...i]=e;if(i.length===0)return this.has(t);let r=this.get(t,!0);return En.isCollection(r)?r.hasIn(i):!1}setIn(e,t){let[i,...r]=e;if(r.length===0)this.set(i,t);else{let s=this.get(i,!0);if(En.isCollection(s))s.setIn(r,t);else if(s===void 0&&this.schema)this.set(i,gd(this.schema,r,t));else throw new Error(`Expected YAML collection at ${i}. Remaining path: ${r}`)}}};jc.Collection=yd;jc.collectionFromPath=gd;jc.isEmptyPath=Nv});var Is=C($c=>{"use strict";var RP=n=>n.replace(/^(?!$)(?: $)?/gm,"#");function bd(n,e){return/^\n+$/.test(n)?n.substring(1):e?n.replace(/^(?! *$)/gm,e):n}var CP=(n,e,t)=>n.endsWith(`
`)?bd(t,e):t.includes(`
`)?`
`+bd(t,e):(n.endsWith(" ")?"":" ")+t;$c.indentComment=bd;$c.lineComment=CP;$c.stringifyComment=RP});var _v=C(Ls=>{"use strict";var OP="flow",Td="block",Wc="quoted";function AP(n,e,t="flow",{indentAtStart:i,lineWidth:r=80,minContentWidth:s=20,onFold:o,onOverflow:a}={}){if(!r||r<0)return n;r<s&&(s=0);let c=Math.max(1+s,1+r-e.length);if(n.length<=c)return n;let l=[],u={},d=r-e.length;typeof i=="number"&&(i>r-Math.max(2,s)?l.push(0):d=r-i);let p,g,_=!1,b=-1,N=-1,R=-1;t===Td&&(b=wv(n,b,e.length),b!==-1&&(d=b+c));for(let T;T=n[b+=1];){if(t===Wc&&T==="\\"){switch(N=b,n[b+1]){case"x":b+=3;break;case"u":b+=5;break;case"U":b+=9;break;default:b+=1}R=b}if(T===`
`)t===Td&&(b=wv(n,b,e.length)),d=b+e.length+c,p=void 0;else{if(T===" "&&g&&g!==" "&&g!==`
`&&g!=="	"){let w=n[b+1];w&&w!==" "&&w!==`
`&&w!=="	"&&(p=b)}if(b>=d)if(p)l.push(p),d=p+c,p=void 0;else if(t===Wc){for(;g===" "||g==="	";)g=T,T=n[b+=1],_=!0;let w=b>R+1?b-2:N-1;if(u[w])return n;l.push(w),u[w]=!0,d=w+c,p=void 0}else _=!0}g=T}if(_&&a&&a(),l.length===0)return n;o&&o();let v=n.slice(0,l[0]);for(let T=0;T<l.length;++T){let w=l[T],L=l[T+1]||n.length;w===0?v=`
${e}${n.slice(0,L)}`:(t===Wc&&u[w]&&(v+=`${n[w]}\\`),v+=`
${e}${n.slice(w+1,L)}`)}return v}function wv(n,e,t){let i=e,r=e+1,s=n[r];for(;s===" "||s==="	";)if(e<r+t)s=n[++e];else{do s=n[++e];while(s&&s!==`
`);i=e,r=e+1,s=n[r]}return i}Ls.FOLD_BLOCK=Td;Ls.FOLD_FLOW=OP;Ls.FOLD_QUOTED=Wc;Ls.foldFlowLines=AP});var Ms=C(Pv=>{"use strict";var an=ze(),pi=_v(),Hc=(n,e)=>({indentAtStart:e?n.indent.length:n.indentAtStart,lineWidth:n.options.lineWidth,minContentWidth:n.options.minContentWidth}),Yc=n=>/^(%|---|\.\.\.)/m.test(n);function IP(n,e,t){if(!e||e<0)return!1;let i=e-t,r=n.length;if(r<=i)return!1;for(let s=0,o=0;s<r;++s)if(n[s]===`
`){if(s-o>i)return!0;if(o=s+1,r-o<=i)return!1}return!0}function xs(n,e){let t=JSON.stringify(n);if(e.options.doubleQuotedAsJSON)return t;let{implicitKey:i}=e,r=e.options.doubleQuotedMinMultiLineLength,s=e.indent||(Yc(n)?"  ":""),o="",a=0;for(let c=0,l=t[c];l;l=t[++c])if(l===" "&&t[c+1]==="\\"&&t[c+2]==="n"&&(o+=t.slice(a,c)+"\\ ",c+=1,a=c,l="\\"),l==="\\")switch(t[c+1]){case"u":{o+=t.slice(a,c);let u=t.substr(c+2,4);switch(u){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:u.substr(0,2)==="00"?o+="\\x"+u.substr(2):o+=t.substr(c,6)}c+=5,a=c+1}break;case"n":if(i||t[c+2]==='"'||t.length<r)c+=1;else{for(o+=t.slice(a,c)+`

`;t[c+2]==="\\"&&t[c+3]==="n"&&t[c+4]!=='"';)o+=`
`,c+=2;o+=s,t[c+2]===" "&&(o+="\\"),c+=1,a=c+1}break;default:c+=1}return o=a?o+t.slice(a):t,i?o:pi.foldFlowLines(o,s,pi.FOLD_QUOTED,Hc(e,!1))}function vd(n,e){if(e.options.singleQuote===!1||e.implicitKey&&n.includes(`
`)||/[ \t]\n|\n[ \t]/.test(n))return xs(n,e);let t=e.indent||(Yc(n)?"  ":""),i="'"+n.replace(/'/g,"''").replace(/\n+/g,`$&
${t}`)+"'";return e.implicitKey?i:pi.foldFlowLines(i,t,pi.FOLD_FLOW,Hc(e,!1))}function xr(n,e){let{singleQuote:t}=e.options,i;if(t===!1)i=xs;else{let r=n.includes('"'),s=n.includes("'");r&&!s?i=vd:s&&!r?i=xs:i=t?vd:xs}return i(n,e)}var Sd;try{Sd=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Sd=/\n+(?!\n|$)/g}function Vc({comment:n,type:e,value:t},i,r,s){let{blockQuote:o,commentString:a,lineWidth:c}=i.options;if(!o||/\n[\t ]+$/.test(t)||/^\s*$/.test(t))return xr(t,i);let l=i.indent||(i.forceBlockIndent||Yc(t)?"  ":""),u=o==="literal"?!0:o==="folded"||e===an.Scalar.BLOCK_FOLDED?!1:e===an.Scalar.BLOCK_LITERAL?!0:!IP(t,c,l.length);if(!t)return u?`|
`:`>
`;let d,p;for(p=t.length;p>0;--p){let L=t[p-1];if(L!==`
`&&L!=="	"&&L!==" ")break}let g=t.substring(p),_=g.indexOf(`
`);_===-1?d="-":t===g||_!==g.length-1?(d="+",s&&s()):d="",g&&(t=t.slice(0,-g.length),g[g.length-1]===`
`&&(g=g.slice(0,-1)),g=g.replace(Sd,`$&${l}`));let b=!1,N,R=-1;for(N=0;N<t.length;++N){let L=t[N];if(L===" ")b=!0;else if(L===`
`)R=N;else break}let v=t.substring(0,R<N?R+1:N);v&&(t=t.substring(v.length),v=v.replace(/\n+/g,`$&${l}`));let w=(b?l?"2":"1":"")+d;if(n&&(w+=" "+a(n.replace(/ ?[\r\n]+/g," ")),r&&r()),!u){let L=t.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${l}`),M=!1,H=Hc(i,!0);o!=="folded"&&e!==an.Scalar.BLOCK_FOLDED&&(H.onOverflow=()=>{M=!0});let j=pi.foldFlowLines(`${v}${L}${g}`,l,pi.FOLD_BLOCK,H);if(!M)return`>${w}
${l}${j}`}return t=t.replace(/\n+/g,`$&${l}`),`|${w}
${l}${v}${t}${g}`}function LP(n,e,t,i){let{type:r,value:s}=n,{actualString:o,implicitKey:a,indent:c,indentStep:l,inFlow:u}=e;if(a&&s.includes(`
`)||u&&/[[\]{},]/.test(s))return xr(s,e);if(!s||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return a||u||!s.includes(`
`)?xr(s,e):Vc(n,e,t,i);if(!a&&!u&&r!==an.Scalar.PLAIN&&s.includes(`
`))return Vc(n,e,t,i);if(Yc(s)){if(c==="")return e.forceBlockIndent=!0,Vc(n,e,t,i);if(a&&c===l)return xr(s,e)}let d=s.replace(/\n+/g,`$&
${c}`);if(o){let p=b=>b.default&&b.tag!=="tag:yaml.org,2002:str"&&b.test?.test(d),{compat:g,tags:_}=e.doc.schema;if(_.some(p)||g?.some(p))return xr(s,e)}return a?d:pi.foldFlowLines(d,c,pi.FOLD_FLOW,Hc(e,!1))}function xP(n,e,t,i){let{implicitKey:r,inFlow:s}=e,o=typeof n.value=="string"?n:Object.assign({},n,{value:String(n.value)}),{type:a}=n;a!==an.Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=an.Scalar.QUOTE_DOUBLE);let c=u=>{switch(u){case an.Scalar.BLOCK_FOLDED:case an.Scalar.BLOCK_LITERAL:return r||s?xr(o.value,e):Vc(o,e,t,i);case an.Scalar.QUOTE_DOUBLE:return xs(o.value,e);case an.Scalar.QUOTE_SINGLE:return vd(o.value,e);case an.Scalar.PLAIN:return LP(o,e,t,i);default:return null}},l=c(a);if(l===null){let{defaultKeyType:u,defaultStringType:d}=e.options,p=r&&u||d;if(l=c(p),l===null)throw new Error(`Unsupported default string type ${p}`)}return l}Pv.stringifyString=xP});var qs=C(kd=>{"use strict";var MP=Mc(),mi=ce(),qP=Is(),FP=Ms();function BP(n,e){let t=Object.assign({blockQuote:!0,commentString:qP.stringifyComment,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},n.schema.toStringOptions,e),i;switch(t.collectionStyle){case"block":i=!1;break;case"flow":i=!0;break;default:i=null}return{anchors:new Set,doc:n,flowCollectionPadding:t.flowCollectionPadding?" ":"",indent:"",indentStep:typeof t.indent=="number"?" ".repeat(t.indent):"  ",inFlow:i,options:t}}function jP(n,e){if(e.tag){let r=n.filter(s=>s.tag===e.tag);if(r.length>0)return r.find(s=>s.format===e.format)??r[0]}let t,i;if(mi.isScalar(e)){i=e.value;let r=n.filter(s=>s.identify?.(i));if(r.length>1){let s=r.filter(o=>o.test);s.length>0&&(r=s)}t=r.find(s=>s.format===e.format)??r.find(s=>!s.format)}else i=e,t=n.find(r=>r.nodeClass&&i instanceof r.nodeClass);if(!t){let r=i?.constructor?.name??typeof i;throw new Error(`Tag not resolved for ${r} value`)}return t}function UP(n,e,{anchors:t,doc:i}){if(!i.directives)return"";let r=[],s=(mi.isScalar(n)||mi.isCollection(n))&&n.anchor;s&&MP.anchorIsValid(s)&&(t.add(s),r.push(`&${s}`));let o=n.tag?n.tag:e.default?null:e.tag;return o&&r.push(i.directives.tagString(o)),r.join(" ")}function $P(n,e,t,i){if(mi.isPair(n))return n.toString(e,t,i);if(mi.isAlias(n)){if(e.doc.directives)return n.toString(e);if(e.resolvedAliases?.has(n))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(n):e.resolvedAliases=new Set([n]),n=n.resolve(e.doc)}let r,s=mi.isNode(n)?n:e.doc.createNode(n,{onTagObj:c=>r=c});r||(r=jP(e.doc.schema.tags,s));let o=UP(s,r,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);let a=typeof r.stringify=="function"?r.stringify(s,e,t,i):mi.isScalar(s)?FP.stringifyString(s,e,t,i):s.toString(e,t,i);return o?mi.isScalar(s)||a[0]==="{"||a[0]==="["?`${o} ${a}`:`${o}
${e.indent}${a}`:a}kd.createStringifyContext=BP;kd.stringify=$P});var Ov=C(Cv=>{"use strict";var Fn=ce(),Dv=ze(),Rv=qs(),Fs=Is();function WP({key:n,value:e},t,i,r){let{allNullValues:s,doc:o,indent:a,indentStep:c,options:{commentString:l,indentSeq:u,simpleKeys:d}}=t,p=Fn.isNode(n)&&n.comment||null;if(d){if(p)throw new Error("With simple keys, key nodes cannot have comments");if(Fn.isCollection(n)||!Fn.isNode(n)&&typeof n=="object"){let H="With simple keys, collection cannot be used as a key value";throw new Error(H)}}let g=!d&&(!n||p&&e==null&&!t.inFlow||Fn.isCollection(n)||(Fn.isScalar(n)?n.type===Dv.Scalar.BLOCK_FOLDED||n.type===Dv.Scalar.BLOCK_LITERAL:typeof n=="object"));t=Object.assign({},t,{allNullValues:!1,implicitKey:!g&&(d||!s),indent:a+c});let _=!1,b=!1,N=Rv.stringify(n,t,()=>_=!0,()=>b=!0);if(!g&&!t.inFlow&&N.length>1024){if(d)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");g=!0}if(t.inFlow){if(s||e==null)return _&&i&&i(),N===""?"?":g?`? ${N}`:N}else if(s&&!d||e==null&&g)return N=`? ${N}`,p&&!_?N+=Fs.lineComment(N,t.indent,l(p)):b&&r&&r(),N;_&&(p=null),g?(p&&(N+=Fs.lineComment(N,t.indent,l(p))),N=`? ${N}
${a}:`):(N=`${N}:`,p&&(N+=Fs.lineComment(N,t.indent,l(p))));let R,v,T;Fn.isNode(e)?(R=!!e.spaceBefore,v=e.commentBefore,T=e.comment):(R=!1,v=null,T=null,e&&typeof e=="object"&&(e=o.createNode(e))),t.implicitKey=!1,!g&&!p&&Fn.isScalar(e)&&(t.indentAtStart=N.length+1),b=!1,!u&&c.length>=2&&!t.inFlow&&!g&&Fn.isSeq(e)&&!e.flow&&!e.tag&&!e.anchor&&(t.indent=t.indent.substring(2));let w=!1,L=Rv.stringify(e,t,()=>w=!0,()=>b=!0),M=" ";if(p||R||v){if(M=R?`
`:"",v){let H=l(v);M+=`
${Fs.indentComment(H,t.indent)}`}L===""&&!t.inFlow?M===`
`&&(M=`

`):M+=`
${t.indent}`}else if(!g&&Fn.isCollection(e)){let H=L[0],j=L.indexOf(`
`),ie=j!==-1,qe=t.inFlow??e.flow??e.items.length===0;if(ie||!qe){let vt=!1;if(ie&&(H==="&"||H==="!")){let ae=L.indexOf(" ");H==="&"&&ae!==-1&&ae<j&&L[ae+1]==="!"&&(ae=L.indexOf(" ",ae+1)),(ae===-1||j<ae)&&(vt=!0)}vt||(M=`
${t.indent}`)}}else(L===""||L[0]===`
`)&&(M="");return N+=M+L,t.inFlow?w&&i&&i():T&&!w?N+=Fs.lineComment(N,t.indent,l(T)):b&&r&&r(),N}Cv.stringifyPair=WP});var Nd=C(Ed=>{"use strict";function VP(n,...e){n==="debug"&&console.log(...e)}function HP(n,e){(n==="debug"||n==="warn")&&(typeof process<"u"&&process.emitWarning?process.emitWarning(e):console.warn(e))}Ed.debug=VP;Ed.warn=HP});var Xc=C(Gc=>{"use strict";var Bs=ce(),Av=ze(),Kc="<<",zc={identify:n=>n===Kc||typeof n=="symbol"&&n.description===Kc,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new Av.Scalar(Symbol(Kc)),{addToJSMap:Iv}),stringify:()=>Kc},YP=(n,e)=>(zc.identify(e)||Bs.isScalar(e)&&(!e.type||e.type===Av.Scalar.PLAIN)&&zc.identify(e.value))&&n?.doc.schema.tags.some(t=>t.tag===zc.tag&&t.default);function Iv(n,e,t){if(t=n&&Bs.isAlias(t)?t.resolve(n.doc):t,Bs.isSeq(t))for(let i of t.items)wd(n,e,i);else if(Array.isArray(t))for(let i of t)wd(n,e,i);else wd(n,e,t)}function wd(n,e,t){let i=n&&Bs.isAlias(t)?t.resolve(n.doc):t;if(!Bs.isMap(i))throw new Error("Merge sources must be maps or map aliases");let r=i.toJSON(null,n,Map);for(let[s,o]of r)e instanceof Map?e.has(s)||e.set(s,o):e instanceof Set?e.add(s):Object.prototype.hasOwnProperty.call(e,s)||Object.defineProperty(e,s,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}Gc.addMergeToJSMap=Iv;Gc.isMergeKey=YP;Gc.merge=zc});var Pd=C(Mv=>{"use strict";var KP=Nd(),Lv=Xc(),zP=qs(),xv=ce(),_d=di();function GP(n,e,{key:t,value:i}){if(xv.isNode(t)&&t.addToJSMap)t.addToJSMap(n,e,i);else if(Lv.isMergeKey(n,t))Lv.addMergeToJSMap(n,e,i);else{let r=_d.toJS(t,"",n);if(e instanceof Map)e.set(r,_d.toJS(i,r,n));else if(e instanceof Set)e.add(r);else{let s=XP(t,r,n),o=_d.toJS(i,s,n);s in e?Object.defineProperty(e,s,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[s]=o}}return e}function XP(n,e,t){if(e===null)return"";if(typeof e!="object")return String(e);if(xv.isNode(n)&&t?.doc){let i=zP.createStringifyContext(t.doc,{});i.anchors=new Set;for(let s of t.anchors.keys())i.anchors.add(s.anchor);i.inFlow=!0,i.inStringifyKey=!0;let r=n.toString(i);if(!t.mapKeyWarned){let s=JSON.stringify(r);s.length>40&&(s=s.substring(0,36)+'..."'),KP.warn(t.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${s}. Set mapAsMap: true to use object keys.`),t.mapKeyWarned=!0}return r}return JSON.stringify(e)}Mv.addPairToJSMap=GP});var gi=C(Dd=>{"use strict";var qv=As(),QP=Ov(),JP=Pd(),Qc=ce();function ZP(n,e,t){let i=qv.createNode(n,void 0,t),r=qv.createNode(e,void 0,t);return new Jc(i,r)}var Jc=class n{constructor(e,t=null){Object.defineProperty(this,Qc.NODE_TYPE,{value:Qc.PAIR}),this.key=e,this.value=t}clone(e){let{key:t,value:i}=this;return Qc.isNode(t)&&(t=t.clone(e)),Qc.isNode(i)&&(i=i.clone(e)),new n(t,i)}toJSON(e,t){let i=t?.mapAsMap?new Map:{};return JP.addPairToJSMap(t,i,this)}toString(e,t,i){return e?.doc?QP.stringifyPair(this,e,t,i):JSON.stringify(this)}};Dd.Pair=Jc;Dd.createPair=ZP});var Rd=C(Bv=>{"use strict";var Ui=ce(),Fv=qs(),Zc=Is();function eD(n,e,t){return(e.inFlow??n.flow?nD:tD)(n,e,t)}function tD({comment:n,items:e},t,{blockItemPrefix:i,flowChars:r,itemIndent:s,onChompKeep:o,onComment:a}){let{indent:c,options:{commentString:l}}=t,u=Object.assign({},t,{indent:s,type:null}),d=!1,p=[];for(let _=0;_<e.length;++_){let b=e[_],N=null;if(Ui.isNode(b))!d&&b.spaceBefore&&p.push(""),el(t,p,b.commentBefore,d),b.comment&&(N=b.comment);else if(Ui.isPair(b)){let v=Ui.isNode(b.key)?b.key:null;v&&(!d&&v.spaceBefore&&p.push(""),el(t,p,v.commentBefore,d))}d=!1;let R=Fv.stringify(b,u,()=>N=null,()=>d=!0);N&&(R+=Zc.lineComment(R,s,l(N))),d&&N&&(d=!1),p.push(i+R)}let g;if(p.length===0)g=r.start+r.end;else{g=p[0];for(let _=1;_<p.length;++_){let b=p[_];g+=b?`
${c}${b}`:`
`}}return n?(g+=`
`+Zc.indentComment(l(n),c),a&&a()):d&&o&&o(),g}function nD({items:n},e,{flowChars:t,itemIndent:i}){let{indent:r,indentStep:s,flowCollectionPadding:o,options:{commentString:a}}=e;i+=s;let c=Object.assign({},e,{indent:i,inFlow:!0,type:null}),l=!1,u=0,d=[];for(let _=0;_<n.length;++_){let b=n[_],N=null;if(Ui.isNode(b))b.spaceBefore&&d.push(""),el(e,d,b.commentBefore,!1),b.comment&&(N=b.comment);else if(Ui.isPair(b)){let v=Ui.isNode(b.key)?b.key:null;v&&(v.spaceBefore&&d.push(""),el(e,d,v.commentBefore,!1),v.comment&&(l=!0));let T=Ui.isNode(b.value)?b.value:null;T?(T.comment&&(N=T.comment),T.commentBefore&&(l=!0)):b.value==null&&v?.comment&&(N=v.comment)}N&&(l=!0);let R=Fv.stringify(b,c,()=>N=null);_<n.length-1&&(R+=","),N&&(R+=Zc.lineComment(R,i,a(N))),!l&&(d.length>u||R.includes(`
`))&&(l=!0),d.push(R),u=d.length}let{start:p,end:g}=t;if(d.length===0)return p+g;if(!l){let _=d.reduce((b,N)=>b+N.length+2,2);l=e.options.lineWidth>0&&_>e.options.lineWidth}if(l){let _=p;for(let b of d)_+=b?`
${s}${r}${b}`:`
`;return`${_}
${r}${g}`}else return`${p}${o}${d.join(" ")}${o}${g}`}function el({indent:n,options:{commentString:e}},t,i,r){if(i&&r&&(i=i.replace(/^\n+/,"")),i){let s=Zc.indentComment(e(i),n);t.push(s.trimStart())}}Bv.stringifyCollection=eD});var bi=C(Od=>{"use strict";var iD=Rd(),rD=Pd(),sD=Uc(),yi=ce(),tl=gi(),oD=ze();function js(n,e){let t=yi.isScalar(e)?e.value:e;for(let i of n)if(yi.isPair(i)&&(i.key===e||i.key===t||yi.isScalar(i.key)&&i.key.value===t))return i}var Cd=class extends sD.Collection{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(yi.MAP,e),this.items=[]}static from(e,t,i){let{keepUndefined:r,replacer:s}=i,o=new this(e),a=(c,l)=>{if(typeof s=="function")l=s.call(t,c,l);else if(Array.isArray(s)&&!s.includes(c))return;(l!==void 0||r)&&o.items.push(tl.createPair(c,l,i))};if(t instanceof Map)for(let[c,l]of t)a(c,l);else if(t&&typeof t=="object")for(let c of Object.keys(t))a(c,t[c]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,t){let i;yi.isPair(e)?i=e:!e||typeof e!="object"||!("key"in e)?i=new tl.Pair(e,e?.value):i=new tl.Pair(e.key,e.value);let r=js(this.items,i.key),s=this.schema?.sortMapEntries;if(r){if(!t)throw new Error(`Key ${i.key} already set`);yi.isScalar(r.value)&&oD.isScalarValue(i.value)?r.value.value=i.value:r.value=i.value}else if(s){let o=this.items.findIndex(a=>s(i,a)<0);o===-1?this.items.push(i):this.items.splice(o,0,i)}else this.items.push(i)}delete(e){let t=js(this.items,e);return t?this.items.splice(this.items.indexOf(t),1).length>0:!1}get(e,t){let r=js(this.items,e)?.value;return(!t&&yi.isScalar(r)?r.value:r)??void 0}has(e){return!!js(this.items,e)}set(e,t){this.add(new tl.Pair(e,t),!0)}toJSON(e,t,i){let r=i?new i:t?.mapAsMap?new Map:{};t?.onCreate&&t.onCreate(r);for(let s of this.items)rD.addPairToJSMap(t,r,s);return r}toString(e,t,i){if(!e)return JSON.stringify(this);for(let r of this.items)if(!yi.isPair(r))throw new Error(`Map items must all be pairs; found ${JSON.stringify(r)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),iD.stringifyCollection(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:i,onComment:t})}};Od.YAMLMap=Cd;Od.findPair=js});var Mr=C(Uv=>{"use strict";var aD=ce(),jv=bi(),cD={collection:"map",default:!0,nodeClass:jv.YAMLMap,tag:"tag:yaml.org,2002:map",resolve(n,e){return aD.isMap(n)||e("Expected a mapping for this tag"),n},createNode:(n,e,t)=>jv.YAMLMap.from(n,e,t)};Uv.map=cD});var Ti=C($v=>{"use strict";var lD=As(),uD=Rd(),fD=Uc(),il=ce(),dD=ze(),hD=di(),Ad=class extends fD.Collection{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(il.SEQ,e),this.items=[]}add(e){this.items.push(e)}delete(e){let t=nl(e);return typeof t!="number"?!1:this.items.splice(t,1).length>0}get(e,t){let i=nl(e);if(typeof i!="number")return;let r=this.items[i];return!t&&il.isScalar(r)?r.value:r}has(e){let t=nl(e);return typeof t=="number"&&t<this.items.length}set(e,t){let i=nl(e);if(typeof i!="number")throw new Error(`Expected a valid index, not ${e}.`);let r=this.items[i];il.isScalar(r)&&dD.isScalarValue(t)?r.value=t:this.items[i]=t}toJSON(e,t){let i=[];t?.onCreate&&t.onCreate(i);let r=0;for(let s of this.items)i.push(hD.toJS(s,String(r++),t));return i}toString(e,t,i){return e?uD.stringifyCollection(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:i,onComment:t}):JSON.stringify(this)}static from(e,t,i){let{replacer:r}=i,s=new this(e);if(t&&Symbol.iterator in Object(t)){let o=0;for(let a of t){if(typeof r=="function"){let c=t instanceof Set?a:String(o++);a=r.call(t,c,a)}s.items.push(lD.createNode(a,void 0,i))}}return s}};function nl(n){let e=il.isScalar(n)?n.value:n;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}$v.YAMLSeq=Ad});var qr=C(Vv=>{"use strict";var pD=ce(),Wv=Ti(),mD={collection:"seq",default:!0,nodeClass:Wv.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(n,e){return pD.isSeq(n)||e("Expected a sequence for this tag"),n},createNode:(n,e,t)=>Wv.YAMLSeq.from(n,e,t)};Vv.seq=mD});var Us=C(Hv=>{"use strict";var gD=Ms(),yD={identify:n=>typeof n=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:n=>n,stringify(n,e,t,i){return e=Object.assign({actualString:!0},e),gD.stringifyString(n,e,t,i)}};Hv.string=yD});var rl=C(zv=>{"use strict";var Yv=ze(),Kv={identify:n=>n==null,createNode:()=>new Yv.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Yv.Scalar(null),stringify:({source:n},e)=>typeof n=="string"&&Kv.test.test(n)?n:e.options.nullStr};zv.nullTag=Kv});var Id=C(Xv=>{"use strict";var bD=ze(),Gv={identify:n=>typeof n=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:n=>new bD.Scalar(n[0]==="t"||n[0]==="T"),stringify({source:n,value:e},t){if(n&&Gv.test.test(n)){let i=n[0]==="t"||n[0]==="T";if(e===i)return n}return e?t.options.trueStr:t.options.falseStr}};Xv.boolTag=Gv});var Fr=C(Qv=>{"use strict";function TD({format:n,minFractionDigits:e,tag:t,value:i}){if(typeof i=="bigint")return String(i);let r=typeof i=="number"?i:Number(i);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let s=JSON.stringify(i);if(!n&&e&&(!t||t==="tag:yaml.org,2002:float")&&/^\d/.test(s)){let o=s.indexOf(".");o<0&&(o=s.length,s+=".");let a=e-(s.length-o-1);for(;a-- >0;)s+="0"}return s}Qv.stringifyNumber=TD});var xd=C(sl=>{"use strict";var vD=ze(),Ld=Fr(),SD={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:n=>n.slice(-3).toLowerCase()==="nan"?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Ld.stringifyNumber},kD={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:n=>parseFloat(n),stringify(n){let e=Number(n.value);return isFinite(e)?e.toExponential():Ld.stringifyNumber(n)}},ED={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(n){let e=new vD.Scalar(parseFloat(n)),t=n.indexOf(".");return t!==-1&&n[n.length-1]==="0"&&(e.minFractionDigits=n.length-t-1),e},stringify:Ld.stringifyNumber};sl.float=ED;sl.floatExp=kD;sl.floatNaN=SD});var qd=C(al=>{"use strict";var Jv=Fr(),ol=n=>typeof n=="bigint"||Number.isInteger(n),Md=(n,e,t,{intAsBigInt:i})=>i?BigInt(n):parseInt(n.substring(e),t);function Zv(n,e,t){let{value:i}=n;return ol(i)&&i>=0?t+i.toString(e):Jv.stringifyNumber(n)}var ND={identify:n=>ol(n)&&n>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(n,e,t)=>Md(n,2,8,t),stringify:n=>Zv(n,8,"0o")},wD={identify:ol,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(n,e,t)=>Md(n,0,10,t),stringify:Jv.stringifyNumber},_D={identify:n=>ol(n)&&n>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(n,e,t)=>Md(n,2,16,t),stringify:n=>Zv(n,16,"0x")};al.int=wD;al.intHex=_D;al.intOct=ND});var tS=C(eS=>{"use strict";var PD=Mr(),DD=rl(),RD=qr(),CD=Us(),OD=Id(),Fd=xd(),Bd=qd(),AD=[PD.map,RD.seq,CD.string,DD.nullTag,OD.boolTag,Bd.intOct,Bd.int,Bd.intHex,Fd.floatNaN,Fd.floatExp,Fd.float];eS.schema=AD});var rS=C(iS=>{"use strict";var ID=ze(),LD=Mr(),xD=qr();function nS(n){return typeof n=="bigint"||Number.isInteger(n)}var cl=({value:n})=>JSON.stringify(n),MD=[{identify:n=>typeof n=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:n=>n,stringify:cl},{identify:n=>n==null,createNode:()=>new ID.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:cl},{identify:n=>typeof n=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:n=>n==="true",stringify:cl},{identify:nS,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(n,e,{intAsBigInt:t})=>t?BigInt(n):parseInt(n,10),stringify:({value:n})=>nS(n)?n.toString():JSON.stringify(n)},{identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:n=>parseFloat(n),stringify:cl}],qD={default:!0,tag:"",test:/^/,resolve(n,e){return e(`Unresolved plain scalar ${JSON.stringify(n)}`),n}},FD=[LD.map,xD.seq].concat(MD,qD);iS.schema=FD});var Ud=C(sS=>{"use strict";var jd=ze(),BD=Ms(),jD={identify:n=>n instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(n,e){if(typeof Buffer=="function")return Buffer.from(n,"base64");if(typeof atob=="function"){let t=atob(n.replace(/[\n\r]/g,"")),i=new Uint8Array(t.length);for(let r=0;r<t.length;++r)i[r]=t.charCodeAt(r);return i}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),n},stringify({comment:n,type:e,value:t},i,r,s){let o=t,a;if(typeof Buffer=="function")a=o instanceof Buffer?o.toString("base64"):Buffer.from(o.buffer).toString("base64");else if(typeof btoa=="function"){let c="";for(let l=0;l<o.length;++l)c+=String.fromCharCode(o[l]);a=btoa(c)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=jd.Scalar.BLOCK_LITERAL),e!==jd.Scalar.QUOTE_DOUBLE){let c=Math.max(i.options.lineWidth-i.indent.length,i.options.minContentWidth),l=Math.ceil(a.length/c),u=new Array(l);for(let d=0,p=0;d<l;++d,p+=c)u[d]=a.substr(p,c);a=u.join(e===jd.Scalar.BLOCK_LITERAL?`
`:" ")}return BD.stringifyString({comment:n,type:e,value:a},i,r,s)}};sS.binary=jD});var fl=C(ul=>{"use strict";var ll=ce(),$d=gi(),UD=ze(),$D=Ti();function oS(n,e){if(ll.isSeq(n))for(let t=0;t<n.items.length;++t){let i=n.items[t];if(!ll.isPair(i)){if(ll.isMap(i)){i.items.length>1&&e("Each pair must have its own sequence indicator");let r=i.items[0]||new $d.Pair(new UD.Scalar(null));if(i.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${i.commentBefore}
${r.key.commentBefore}`:i.commentBefore),i.comment){let s=r.value??r.key;s.comment=s.comment?`${i.comment}
${s.comment}`:i.comment}i=r}n.items[t]=ll.isPair(i)?i:new $d.Pair(i)}}else e("Expected a sequence for this tag");return n}function aS(n,e,t){let{replacer:i}=t,r=new $D.YAMLSeq(n);r.tag="tag:yaml.org,2002:pairs";let s=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof i=="function"&&(o=i.call(e,String(s++),o));let a,c;if(Array.isArray(o))if(o.length===2)a=o[0],c=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){let l=Object.keys(o);if(l.length===1)a=l[0],c=o[a];else throw new TypeError(`Expected tuple with one key, not ${l.length} keys`)}else a=o;r.items.push($d.createPair(a,c,t))}return r}var WD={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:oS,createNode:aS};ul.createPairs=aS;ul.pairs=WD;ul.resolvePairs=oS});var Hd=C(Vd=>{"use strict";var cS=ce(),Wd=di(),$s=bi(),VD=Ti(),lS=fl(),$i=class n extends VD.YAMLSeq{constructor(){super(),this.add=$s.YAMLMap.prototype.add.bind(this),this.delete=$s.YAMLMap.prototype.delete.bind(this),this.get=$s.YAMLMap.prototype.get.bind(this),this.has=$s.YAMLMap.prototype.has.bind(this),this.set=$s.YAMLMap.prototype.set.bind(this),this.tag=n.tag}toJSON(e,t){if(!t)return super.toJSON(e);let i=new Map;t?.onCreate&&t.onCreate(i);for(let r of this.items){let s,o;if(cS.isPair(r)?(s=Wd.toJS(r.key,"",t),o=Wd.toJS(r.value,s,t)):s=Wd.toJS(r,"",t),i.has(s))throw new Error("Ordered maps must not include duplicate keys");i.set(s,o)}return i}static from(e,t,i){let r=lS.createPairs(e,t,i),s=new this;return s.items=r.items,s}};$i.tag="tag:yaml.org,2002:omap";var HD={collection:"seq",identify:n=>n instanceof Map,nodeClass:$i,default:!1,tag:"tag:yaml.org,2002:omap",resolve(n,e){let t=lS.resolvePairs(n,e),i=[];for(let{key:r}of t.items)cS.isScalar(r)&&(i.includes(r.value)?e(`Ordered maps must not include duplicate keys: ${r.value}`):i.push(r.value));return Object.assign(new $i,t)},createNode:(n,e,t)=>$i.from(n,e,t)};Vd.YAMLOMap=$i;Vd.omap=HD});var pS=C(Yd=>{"use strict";var uS=ze();function fS({value:n,source:e},t){return e&&(n?dS:hS).test.test(e)?e:n?t.options.trueStr:t.options.falseStr}var dS={identify:n=>n===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new uS.Scalar(!0),stringify:fS},hS={identify:n=>n===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new uS.Scalar(!1),stringify:fS};Yd.falseTag=hS;Yd.trueTag=dS});var mS=C(dl=>{"use strict";var YD=ze(),Kd=Fr(),KD={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:n=>n.slice(-3).toLowerCase()==="nan"?NaN:n[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Kd.stringifyNumber},zD={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:n=>parseFloat(n.replace(/_/g,"")),stringify(n){let e=Number(n.value);return isFinite(e)?e.toExponential():Kd.stringifyNumber(n)}},GD={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(n){let e=new YD.Scalar(parseFloat(n.replace(/_/g,""))),t=n.indexOf(".");if(t!==-1){let i=n.substring(t+1).replace(/_/g,"");i[i.length-1]==="0"&&(e.minFractionDigits=i.length)}return e},stringify:Kd.stringifyNumber};dl.float=GD;dl.floatExp=zD;dl.floatNaN=KD});var yS=C(Vs=>{"use strict";var gS=Fr(),Ws=n=>typeof n=="bigint"||Number.isInteger(n);function hl(n,e,t,{intAsBigInt:i}){let r=n[0];if((r==="-"||r==="+")&&(e+=1),n=n.substring(e).replace(/_/g,""),i){switch(t){case 2:n=`0b${n}`;break;case 8:n=`0o${n}`;break;case 16:n=`0x${n}`;break}let o=BigInt(n);return r==="-"?BigInt(-1)*o:o}let s=parseInt(n,t);return r==="-"?-1*s:s}function zd(n,e,t){let{value:i}=n;if(Ws(i)){let r=i.toString(e);return i<0?"-"+t+r.substr(1):t+r}return gS.stringifyNumber(n)}var XD={identify:Ws,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(n,e,t)=>hl(n,2,2,t),stringify:n=>zd(n,2,"0b")},QD={identify:Ws,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(n,e,t)=>hl(n,1,8,t),stringify:n=>zd(n,8,"0")},JD={identify:Ws,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(n,e,t)=>hl(n,0,10,t),stringify:gS.stringifyNumber},ZD={identify:Ws,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(n,e,t)=>hl(n,2,16,t),stringify:n=>zd(n,16,"0x")};Vs.int=JD;Vs.intBin=XD;Vs.intHex=ZD;Vs.intOct=QD});var Xd=C(Gd=>{"use strict";var gl=ce(),pl=gi(),ml=bi(),Wi=class n extends ml.YAMLMap{constructor(e){super(e),this.tag=n.tag}add(e){let t;gl.isPair(e)?t=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?t=new pl.Pair(e.key,null):t=new pl.Pair(e,null),ml.findPair(this.items,t.key)||this.items.push(t)}get(e,t){let i=ml.findPair(this.items,e);return!t&&gl.isPair(i)?gl.isScalar(i.key)?i.key.value:i.key:i}set(e,t){if(typeof t!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof t}`);let i=ml.findPair(this.items,e);i&&!t?this.items.splice(this.items.indexOf(i),1):!i&&t&&this.items.push(new pl.Pair(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,i){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,i);throw new Error("Set items must all have null values")}static from(e,t,i){let{replacer:r}=i,s=new this(e);if(t&&Symbol.iterator in Object(t))for(let o of t)typeof r=="function"&&(o=r.call(t,o,o)),s.items.push(pl.createPair(o,null,i));return s}};Wi.tag="tag:yaml.org,2002:set";var eR={collection:"map",identify:n=>n instanceof Set,nodeClass:Wi,default:!1,tag:"tag:yaml.org,2002:set",createNode:(n,e,t)=>Wi.from(n,e,t),resolve(n,e){if(gl.isMap(n)){if(n.hasAllNullValues(!0))return Object.assign(new Wi,n);e("Set items must all have null values")}else e("Expected a mapping for this tag");return n}};Gd.YAMLSet=Wi;Gd.set=eR});var Jd=C(yl=>{"use strict";var tR=Fr();function Qd(n,e){let t=n[0],i=t==="-"||t==="+"?n.substring(1):n,r=o=>e?BigInt(o):Number(o),s=i.replace(/_/g,"").split(":").reduce((o,a)=>o*r(60)+r(a),r(0));return t==="-"?r(-1)*s:s}function bS(n){let{value:e}=n,t=o=>o;if(typeof e=="bigint")t=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return tR.stringifyNumber(n);let i="";e<0&&(i="-",e*=t(-1));let r=t(60),s=[e%r];return e<60?s.unshift(0):(e=(e-s[0])/r,s.unshift(e%r),e>=60&&(e=(e-s[0])/r,s.unshift(e))),i+s.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}var nR={identify:n=>typeof n=="bigint"||Number.isInteger(n),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(n,e,{intAsBigInt:t})=>Qd(n,t),stringify:bS},iR={identify:n=>typeof n=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:n=>Qd(n,!1),stringify:bS},TS={identify:n=>n instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(n){let e=n.match(TS.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,t,i,r,s,o,a]=e.map(Number),c=e[7]?Number((e[7]+"00").substr(1,3)):0,l=Date.UTC(t,i-1,r,s||0,o||0,a||0,c),u=e[8];if(u&&u!=="Z"){let d=Qd(u,!1);Math.abs(d)<30&&(d*=60),l-=6e4*d}return new Date(l)},stringify:({value:n})=>n.toISOString().replace(/(T00:00:00)?\.000Z$/,"")};yl.floatTime=iR;yl.intTime=nR;yl.timestamp=TS});var kS=C(SS=>{"use strict";var rR=Mr(),sR=rl(),oR=qr(),aR=Us(),cR=Ud(),vS=pS(),Zd=mS(),bl=yS(),lR=Xc(),uR=Hd(),fR=fl(),dR=Xd(),eh=Jd(),hR=[rR.map,oR.seq,aR.string,sR.nullTag,vS.trueTag,vS.falseTag,bl.intBin,bl.intOct,bl.int,bl.intHex,Zd.floatNaN,Zd.floatExp,Zd.float,cR.binary,lR.merge,uR.omap,fR.pairs,dR.set,eh.intTime,eh.floatTime,eh.timestamp];SS.schema=hR});var AS=C(ih=>{"use strict";var _S=Mr(),pR=rl(),PS=qr(),mR=Us(),gR=Id(),th=xd(),nh=qd(),yR=tS(),bR=rS(),DS=Ud(),Hs=Xc(),RS=Hd(),CS=fl(),ES=kS(),OS=Xd(),Tl=Jd(),NS=new Map([["core",yR.schema],["failsafe",[_S.map,PS.seq,mR.string]],["json",bR.schema],["yaml11",ES.schema],["yaml-1.1",ES.schema]]),wS={binary:DS.binary,bool:gR.boolTag,float:th.float,floatExp:th.floatExp,floatNaN:th.floatNaN,floatTime:Tl.floatTime,int:nh.int,intHex:nh.intHex,intOct:nh.intOct,intTime:Tl.intTime,map:_S.map,merge:Hs.merge,null:pR.nullTag,omap:RS.omap,pairs:CS.pairs,seq:PS.seq,set:OS.set,timestamp:Tl.timestamp},TR={"tag:yaml.org,2002:binary":DS.binary,"tag:yaml.org,2002:merge":Hs.merge,"tag:yaml.org,2002:omap":RS.omap,"tag:yaml.org,2002:pairs":CS.pairs,"tag:yaml.org,2002:set":OS.set,"tag:yaml.org,2002:timestamp":Tl.timestamp};function vR(n,e,t){let i=NS.get(e);if(i&&!n)return t&&!i.includes(Hs.merge)?i.concat(Hs.merge):i.slice();let r=i;if(!r)if(Array.isArray(n))r=[];else{let s=Array.from(NS.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${s} or define customTags array`)}if(Array.isArray(n))for(let s of n)r=r.concat(s);else typeof n=="function"&&(r=n(r.slice()));return t&&(r=r.concat(Hs.merge)),r.reduce((s,o)=>{let a=typeof o=="string"?wS[o]:o;if(!a){let c=JSON.stringify(o),l=Object.keys(wS).map(u=>JSON.stringify(u)).join(", ");throw new Error(`Unknown custom tag ${c}; use one of ${l}`)}return s.includes(a)||s.push(a),s},[])}ih.coreKnownTags=TR;ih.getTags=vR});var oh=C(IS=>{"use strict";var rh=ce(),SR=Mr(),kR=qr(),ER=Us(),vl=AS(),NR=(n,e)=>n.key<e.key?-1:n.key>e.key?1:0,sh=class n{constructor({compat:e,customTags:t,merge:i,resolveKnownTags:r,schema:s,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(e)?vl.getTags(e,"compat"):e?vl.getTags(null,e):null,this.name=typeof s=="string"&&s||"core",this.knownTags=r?vl.coreKnownTags:{},this.tags=vl.getTags(t,this.name,i),this.toStringOptions=a??null,Object.defineProperty(this,rh.MAP,{value:SR.map}),Object.defineProperty(this,rh.SCALAR,{value:ER.string}),Object.defineProperty(this,rh.SEQ,{value:kR.seq}),this.sortMapEntries=typeof o=="function"?o:o===!0?NR:null}clone(){let e=Object.create(n.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};IS.Schema=sh});var xS=C(LS=>{"use strict";var wR=ce(),ah=qs(),Ys=Is();function _R(n,e){let t=[],i=e.directives===!0;if(e.directives!==!1&&n.directives){let c=n.directives.toString(n);c?(t.push(c),i=!0):n.directives.docStart&&(i=!0)}i&&t.push("---");let r=ah.createStringifyContext(n,e),{commentString:s}=r.options;if(n.commentBefore){t.length!==1&&t.unshift("");let c=s(n.commentBefore);t.unshift(Ys.indentComment(c,""))}let o=!1,a=null;if(n.contents){if(wR.isNode(n.contents)){if(n.contents.spaceBefore&&i&&t.push(""),n.contents.commentBefore){let u=s(n.contents.commentBefore);t.push(Ys.indentComment(u,""))}r.forceBlockIndent=!!n.comment,a=n.contents.comment}let c=a?void 0:()=>o=!0,l=ah.stringify(n.contents,r,()=>a=null,c);a&&(l+=Ys.lineComment(l,"",s(a))),(l[0]==="|"||l[0]===">")&&t[t.length-1]==="---"?t[t.length-1]=`--- ${l}`:t.push(l)}else t.push(ah.stringify(n.contents,r));if(n.directives?.docEnd)if(n.comment){let c=s(n.comment);c.includes(`
`)?(t.push("..."),t.push(Ys.indentComment(c,""))):t.push(`... ${c}`)}else t.push("...");else{let c=n.comment;c&&o&&(c=c.replace(/^\n+/,"")),c&&((!o||a)&&t[t.length-1]!==""&&t.push(""),t.push(Ys.indentComment(s(c),"")))}return t.join(`
`)+`
`}LS.stringifyDocument=_R});var Ks=C(MS=>{"use strict";var PR=Os(),Br=Uc(),zt=ce(),DR=gi(),RR=di(),CR=oh(),OR=xS(),ch=Mc(),AR=dd(),IR=As(),lh=fd(),uh=class n{constructor(e,t,i){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,zt.NODE_TYPE,{value:zt.DOC});let r=null;typeof t=="function"||Array.isArray(t)?r=t:i===void 0&&t&&(i=t,t=void 0);let s=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},i);this.options=s;let{version:o}=s;i?._directives?(this.directives=i._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new lh.Directives({version:o}),this.setSchema(o,i),this.contents=e===void 0?null:this.createNode(e,r,i)}clone(){let e=Object.create(n.prototype,{[zt.NODE_TYPE]:{value:zt.DOC}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=zt.isNode(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){jr(this.contents)&&this.contents.add(e)}addIn(e,t){jr(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){let i=ch.anchorNames(this);e.anchor=!t||i.has(t)?ch.findNewAnchor(t||"a",i):t}return new PR.Alias(e.anchor)}createNode(e,t,i){let r;if(typeof t=="function")e=t.call({"":e},"",e),r=t;else if(Array.isArray(t)){let N=v=>typeof v=="number"||v instanceof String||v instanceof Number,R=t.filter(N).map(String);R.length>0&&(t=t.concat(R)),r=t}else i===void 0&&t&&(i=t,t=void 0);let{aliasDuplicateObjects:s,anchorPrefix:o,flow:a,keepUndefined:c,onTagObj:l,tag:u}=i??{},{onAnchor:d,setAnchors:p,sourceObjects:g}=ch.createNodeAnchors(this,o||"a"),_={aliasDuplicateObjects:s??!0,keepUndefined:c??!1,onAnchor:d,onTagObj:l,replacer:r,schema:this.schema,sourceObjects:g},b=IR.createNode(e,u,_);return a&&zt.isCollection(b)&&(b.flow=!0),p(),b}createPair(e,t,i={}){let r=this.createNode(e,null,i),s=this.createNode(t,null,i);return new DR.Pair(r,s)}delete(e){return jr(this.contents)?this.contents.delete(e):!1}deleteIn(e){return Br.isEmptyPath(e)?this.contents==null?!1:(this.contents=null,!0):jr(this.contents)?this.contents.deleteIn(e):!1}get(e,t){return zt.isCollection(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return Br.isEmptyPath(e)?!t&&zt.isScalar(this.contents)?this.contents.value:this.contents:zt.isCollection(this.contents)?this.contents.getIn(e,t):void 0}has(e){return zt.isCollection(this.contents)?this.contents.has(e):!1}hasIn(e){return Br.isEmptyPath(e)?this.contents!==void 0:zt.isCollection(this.contents)?this.contents.hasIn(e):!1}set(e,t){this.contents==null?this.contents=Br.collectionFromPath(this.schema,[e],t):jr(this.contents)&&this.contents.set(e,t)}setIn(e,t){Br.isEmptyPath(e)?this.contents=t:this.contents==null?this.contents=Br.collectionFromPath(this.schema,Array.from(e),t):jr(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){typeof e=="number"&&(e=String(e));let i;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new lh.Directives({version:"1.1"}),i={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new lh.Directives({version:e}),i={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,i=null;break;default:{let r=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${r}`)}}if(t.schema instanceof Object)this.schema=t.schema;else if(i)this.schema=new CR.Schema(Object.assign(i,t));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:t,mapAsMap:i,maxAliasCount:r,onAnchor:s,reviver:o}={}){let a={anchors:new Map,doc:this,keep:!e,mapAsMap:i===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},c=RR.toJS(this.contents,t??"",a);if(typeof s=="function")for(let{count:l,res:u}of a.anchors.values())s(u,l);return typeof o=="function"?AR.applyReviver(o,{"":c},"",c):c}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){let t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return OR.stringifyDocument(this,e)}};function jr(n){if(zt.isCollection(n))return!0;throw new Error("Expected a YAML collection as document contents")}MS.Document=uh});var Xs=C(Gs=>{"use strict";var zs=class extends Error{constructor(e,t,i,r){super(),this.name=e,this.code=i,this.message=r,this.pos=t}},fh=class extends zs{constructor(e,t,i){super("YAMLParseError",e,t,i)}},dh=class extends zs{constructor(e,t,i){super("YAMLWarning",e,t,i)}},LR=(n,e)=>t=>{if(t.pos[0]===-1)return;t.linePos=t.pos.map(a=>e.linePos(a));let{line:i,col:r}=t.linePos[0];t.message+=` at line ${i}, column ${r}`;let s=r-1,o=n.substring(e.lineStarts[i-1],e.lineStarts[i]).replace(/[\n\r]+$/,"");if(s>=60&&o.length>80){let a=Math.min(s-39,o.length-79);o="\u2026"+o.substring(a),s-=a-1}if(o.length>80&&(o=o.substring(0,79)+"\u2026"),i>1&&/^ *$/.test(o.substring(0,s))){let a=n.substring(e.lineStarts[i-2],e.lineStarts[i-1]);a.length>80&&(a=a.substring(0,79)+`\u2026
`),o=a+o}if(/[^ ]/.test(o)){let a=1,c=t.linePos[1];c&&c.line===i&&c.col>r&&(a=Math.max(1,Math.min(c.col-r,80-s)));let l=" ".repeat(s)+"^".repeat(a);t.message+=`:

${o}
${l}
`}};Gs.YAMLError=zs;Gs.YAMLParseError=fh;Gs.YAMLWarning=dh;Gs.prettifyError=LR});var Qs=C(qS=>{"use strict";function xR(n,{flow:e,indicator:t,next:i,offset:r,onError:s,parentIndent:o,startOnNewline:a}){let c=!1,l=a,u=a,d="",p="",g=!1,_=!1,b=null,N=null,R=null,v=null,T=null,w=null,L=null;for(let j of n)switch(_&&(j.type!=="space"&&j.type!=="newline"&&j.type!=="comma"&&s(j.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),_=!1),b&&(l&&j.type!=="comment"&&j.type!=="newline"&&s(b,"TAB_AS_INDENT","Tabs are not allowed as indentation"),b=null),j.type){case"space":!e&&(t!=="doc-start"||i?.type!=="flow-collection")&&j.source.includes("	")&&(b=j),u=!0;break;case"comment":{u||s(j,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let ie=j.source.substring(1)||" ";d?d+=p+ie:d=ie,p="",l=!1;break}case"newline":l?d?d+=j.source:c=!0:p+=j.source,l=!0,g=!0,(N||R)&&(v=j),u=!0;break;case"anchor":N&&s(j,"MULTIPLE_ANCHORS","A node can have at most one anchor"),j.source.endsWith(":")&&s(j.offset+j.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),N=j,L===null&&(L=j.offset),l=!1,u=!1,_=!0;break;case"tag":{R&&s(j,"MULTIPLE_TAGS","A node can have at most one tag"),R=j,L===null&&(L=j.offset),l=!1,u=!1,_=!0;break}case t:(N||R)&&s(j,"BAD_PROP_ORDER",`Anchors and tags must be after the ${j.source} indicator`),w&&s(j,"UNEXPECTED_TOKEN",`Unexpected ${j.source} in ${e??"collection"}`),w=j,l=t==="seq-item-ind"||t==="explicit-key-ind",u=!1;break;case"comma":if(e){T&&s(j,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),T=j,l=!1,u=!1;break}default:s(j,"UNEXPECTED_TOKEN",`Unexpected ${j.type} token`),l=!1,u=!1}let M=n[n.length-1],H=M?M.offset+M.source.length:r;return _&&i&&i.type!=="space"&&i.type!=="newline"&&i.type!=="comma"&&(i.type!=="scalar"||i.source!=="")&&s(i.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),b&&(l&&b.indent<=o||i?.type==="block-map"||i?.type==="block-seq")&&s(b,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:T,found:w,spaceBefore:c,comment:d,hasNewline:g,anchor:N,tag:R,newlineAfterProp:v,end:H,start:L??H}}qS.resolveProps=xR});var Sl=C(FS=>{"use strict";function hh(n){if(!n)return null;switch(n.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(n.source.includes(`
`))return!0;if(n.end){for(let e of n.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(let e of n.items){for(let t of e.start)if(t.type==="newline")return!0;if(e.sep){for(let t of e.sep)if(t.type==="newline")return!0}if(hh(e.key)||hh(e.value))return!0}return!1;default:return!0}}FS.containsNewline=hh});var ph=C(BS=>{"use strict";var MR=Sl();function qR(n,e,t){if(e?.type==="flow-collection"){let i=e.end[0];i.indent===n&&(i.source==="]"||i.source==="}")&&MR.containsNewline(e)&&t(i,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}BS.flowIndentCheck=qR});var mh=C(US=>{"use strict";var jS=ce();function FR(n,e,t){let{uniqueKeys:i}=n.options;if(i===!1)return!1;let r=typeof i=="function"?i:(s,o)=>s===o||jS.isScalar(s)&&jS.isScalar(o)&&s.value===o.value;return e.some(s=>r(s.key,t))}US.mapIncludes=FR});var KS=C(YS=>{"use strict";var $S=gi(),BR=bi(),WS=Qs(),jR=Sl(),VS=ph(),UR=mh(),HS="All mapping items must start at the same column";function $R({composeNode:n,composeEmptyNode:e},t,i,r,s){let o=s?.nodeClass??BR.YAMLMap,a=new o(t.schema);t.atRoot&&(t.atRoot=!1);let c=i.offset,l=null;for(let u of i.items){let{start:d,key:p,sep:g,value:_}=u,b=WS.resolveProps(d,{indicator:"explicit-key-ind",next:p??g?.[0],offset:c,onError:r,parentIndent:i.indent,startOnNewline:!0}),N=!b.found;if(N){if(p&&(p.type==="block-seq"?r(c,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in p&&p.indent!==i.indent&&r(c,"BAD_INDENT",HS)),!b.anchor&&!b.tag&&!g){l=b.end,b.comment&&(a.comment?a.comment+=`
`+b.comment:a.comment=b.comment);continue}(b.newlineAfterProp||jR.containsNewline(p))&&r(p??d[d.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else b.found?.indent!==i.indent&&r(c,"BAD_INDENT",HS);t.atKey=!0;let R=b.end,v=p?n(t,p,b,r):e(t,R,d,null,b,r);t.schema.compat&&VS.flowIndentCheck(i.indent,p,r),t.atKey=!1,UR.mapIncludes(t,a.items,v)&&r(R,"DUPLICATE_KEY","Map keys must be unique");let T=WS.resolveProps(g??[],{indicator:"map-value-ind",next:_,offset:v.range[2],onError:r,parentIndent:i.indent,startOnNewline:!p||p.type==="block-scalar"});if(c=T.end,T.found){N&&(_?.type==="block-map"&&!T.hasNewline&&r(c,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),t.options.strict&&b.start<T.found.offset-1024&&r(v.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let w=_?n(t,_,T,r):e(t,c,g,null,T,r);t.schema.compat&&VS.flowIndentCheck(i.indent,_,r),c=w.range[2];let L=new $S.Pair(v,w);t.options.keepSourceTokens&&(L.srcToken=u),a.items.push(L)}else{N&&r(v.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),T.comment&&(v.comment?v.comment+=`
`+T.comment:v.comment=T.comment);let w=new $S.Pair(v);t.options.keepSourceTokens&&(w.srcToken=u),a.items.push(w)}}return l&&l<c&&r(l,"IMPOSSIBLE","Map comment with trailing content"),a.range=[i.offset,c,l??c],a}YS.resolveBlockMap=$R});var GS=C(zS=>{"use strict";var WR=Ti(),VR=Qs(),HR=ph();function YR({composeNode:n,composeEmptyNode:e},t,i,r,s){let o=s?.nodeClass??WR.YAMLSeq,a=new o(t.schema);t.atRoot&&(t.atRoot=!1),t.atKey&&(t.atKey=!1);let c=i.offset,l=null;for(let{start:u,value:d}of i.items){let p=VR.resolveProps(u,{indicator:"seq-item-ind",next:d,offset:c,onError:r,parentIndent:i.indent,startOnNewline:!0});if(!p.found)if(p.anchor||p.tag||d)d&&d.type==="block-seq"?r(p.end,"BAD_INDENT","All sequence items must start at the same column"):r(c,"MISSING_CHAR","Sequence item without - indicator");else{l=p.end,p.comment&&(a.comment=p.comment);continue}let g=d?n(t,d,p,r):e(t,p.end,u,null,p,r);t.schema.compat&&HR.flowIndentCheck(i.indent,d,r),c=g.range[2],a.items.push(g)}return a.range=[i.offset,c,l??c],a}zS.resolveBlockSeq=YR});var Ur=C(XS=>{"use strict";function KR(n,e,t,i){let r="";if(n){let s=!1,o="";for(let a of n){let{source:c,type:l}=a;switch(l){case"space":s=!0;break;case"comment":{t&&!s&&i(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let u=c.substring(1)||" ";r?r+=o+u:r=u,o="";break}case"newline":r&&(o+=c),s=!0;break;default:i(a,"UNEXPECTED_TOKEN",`Unexpected ${l} at node end`)}e+=c.length}}return{comment:r,offset:e}}XS.resolveEnd=KR});var ek=C(ZS=>{"use strict";var zR=ce(),GR=gi(),QS=bi(),XR=Ti(),QR=Ur(),JS=Qs(),JR=Sl(),ZR=mh(),gh="Block collections are not allowed within flow collections",yh=n=>n&&(n.type==="block-map"||n.type==="block-seq");function eC({composeNode:n,composeEmptyNode:e},t,i,r,s){let o=i.start.source==="{",a=o?"flow map":"flow sequence",c=s?.nodeClass??(o?QS.YAMLMap:XR.YAMLSeq),l=new c(t.schema);l.flow=!0;let u=t.atRoot;u&&(t.atRoot=!1),t.atKey&&(t.atKey=!1);let d=i.offset+i.start.source.length;for(let N=0;N<i.items.length;++N){let R=i.items[N],{start:v,key:T,sep:w,value:L}=R,M=JS.resolveProps(v,{flow:a,indicator:"explicit-key-ind",next:T??w?.[0],offset:d,onError:r,parentIndent:i.indent,startOnNewline:!1});if(!M.found){if(!M.anchor&&!M.tag&&!w&&!L){N===0&&M.comma?r(M.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):N<i.items.length-1&&r(M.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),M.comment&&(l.comment?l.comment+=`
`+M.comment:l.comment=M.comment),d=M.end;continue}!o&&t.options.strict&&JR.containsNewline(T)&&r(T,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(N===0)M.comma&&r(M.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(M.comma||r(M.start,"MISSING_CHAR",`Missing , between ${a} items`),M.comment){let H="";e:for(let j of v)switch(j.type){case"comma":case"space":break;case"comment":H=j.source.substring(1);break e;default:break e}if(H){let j=l.items[l.items.length-1];zR.isPair(j)&&(j=j.value??j.key),j.comment?j.comment+=`
`+H:j.comment=H,M.comment=M.comment.substring(H.length+1)}}if(!o&&!w&&!M.found){let H=L?n(t,L,M,r):e(t,M.end,w,null,M,r);l.items.push(H),d=H.range[2],yh(L)&&r(H.range,"BLOCK_IN_FLOW",gh)}else{t.atKey=!0;let H=M.end,j=T?n(t,T,M,r):e(t,H,v,null,M,r);yh(T)&&r(j.range,"BLOCK_IN_FLOW",gh),t.atKey=!1;let ie=JS.resolveProps(w??[],{flow:a,indicator:"map-value-ind",next:L,offset:j.range[2],onError:r,parentIndent:i.indent,startOnNewline:!1});if(ie.found){if(!o&&!M.found&&t.options.strict){if(w)for(let ae of w){if(ae===ie.found)break;if(ae.type==="newline"){r(ae,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}M.start<ie.found.offset-1024&&r(ie.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else L&&("source"in L&&L.source&&L.source[0]===":"?r(L,"MISSING_CHAR",`Missing space after : in ${a}`):r(ie.start,"MISSING_CHAR",`Missing , or : between ${a} items`));let qe=L?n(t,L,ie,r):ie.found?e(t,ie.end,w,null,ie,r):null;qe?yh(L)&&r(qe.range,"BLOCK_IN_FLOW",gh):ie.comment&&(j.comment?j.comment+=`
`+ie.comment:j.comment=ie.comment);let vt=new GR.Pair(j,qe);if(t.options.keepSourceTokens&&(vt.srcToken=R),o){let ae=l;ZR.mapIncludes(t,ae.items,j)&&r(H,"DUPLICATE_KEY","Map keys must be unique"),ae.items.push(vt)}else{let ae=new QS.YAMLMap(t.schema);ae.flow=!0,ae.items.push(vt);let Dn=(qe??j).range;ae.range=[j.range[0],Dn[1],Dn[2]],l.items.push(ae)}d=qe?qe.range[2]:ie.end}}let p=o?"}":"]",[g,..._]=i.end,b=d;if(g&&g.source===p)b=g.offset+g.source.length;else{let N=a[0].toUpperCase()+a.substring(1),R=u?`${N} must end with a ${p}`:`${N} in block collection must be sufficiently indented and end with a ${p}`;r(d,u?"MISSING_CHAR":"BAD_INDENT",R),g&&g.source.length!==1&&_.unshift(g)}if(_.length>0){let N=QR.resolveEnd(_,b,t.options.strict,r);N.comment&&(l.comment?l.comment+=`
`+N.comment:l.comment=N.comment),l.range=[i.offset,b,N.offset]}else l.range=[i.offset,b,b];return l}ZS.resolveFlowCollection=eC});var nk=C(tk=>{"use strict";var tC=ce(),nC=ze(),iC=bi(),rC=Ti(),sC=KS(),oC=GS(),aC=ek();function bh(n,e,t,i,r,s){let o=t.type==="block-map"?sC.resolveBlockMap(n,e,t,i,s):t.type==="block-seq"?oC.resolveBlockSeq(n,e,t,i,s):aC.resolveFlowCollection(n,e,t,i,s),a=o.constructor;return r==="!"||r===a.tagName?(o.tag=a.tagName,o):(r&&(o.tag=r),o)}function cC(n,e,t,i,r){let s=i.tag,o=s?e.directives.tagName(s.source,p=>r(s,"TAG_RESOLVE_FAILED",p)):null;if(t.type==="block-seq"){let{anchor:p,newlineAfterProp:g}=i,_=p&&s?p.offset>s.offset?p:s:p??s;_&&(!g||g.offset<_.offset)&&r(_,"MISSING_CHAR","Missing newline after block sequence props")}let a=t.type==="block-map"?"map":t.type==="block-seq"?"seq":t.start.source==="{"?"map":"seq";if(!s||!o||o==="!"||o===iC.YAMLMap.tagName&&a==="map"||o===rC.YAMLSeq.tagName&&a==="seq")return bh(n,e,t,r,o);let c=e.schema.tags.find(p=>p.tag===o&&p.collection===a);if(!c){let p=e.schema.knownTags[o];if(p&&p.collection===a)e.schema.tags.push(Object.assign({},p,{default:!1})),c=p;else return p?.collection?r(s,"BAD_COLLECTION_TYPE",`${p.tag} used for ${a} collection, but expects ${p.collection}`,!0):r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),bh(n,e,t,r,o)}let l=bh(n,e,t,r,o,c),u=c.resolve?.(l,p=>r(s,"TAG_RESOLVE_FAILED",p),e.options)??l,d=tC.isNode(u)?u:new nC.Scalar(u);return d.range=l.range,d.tag=o,c?.format&&(d.format=c.format),d}tk.composeCollection=cC});var vh=C(ik=>{"use strict";var Th=ze();function lC(n,e,t){let i=e.offset,r=uC(e,n.options.strict,t);if(!r)return{value:"",type:null,comment:"",range:[i,i,i]};let s=r.mode===">"?Th.Scalar.BLOCK_FOLDED:Th.Scalar.BLOCK_LITERAL,o=e.source?fC(e.source):[],a=o.length;for(let b=o.length-1;b>=0;--b){let N=o[b][1];if(N===""||N==="\r")a=b;else break}if(a===0){let b=r.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"",N=i+r.length;return e.source&&(N+=e.source.length),{value:b,type:s,comment:r.comment,range:[i,N,N]}}let c=e.indent+r.indent,l=e.offset+r.length,u=0;for(let b=0;b<a;++b){let[N,R]=o[b];if(R===""||R==="\r")r.indent===0&&N.length>c&&(c=N.length);else{N.length<c&&t(l+N.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),r.indent===0&&(c=N.length),u=b,c===0&&!n.atRoot&&t(l,"BAD_INDENT","Block scalar values in collections must be indented");break}l+=N.length+R.length+1}for(let b=o.length-1;b>=a;--b)o[b][0].length>c&&(a=b+1);let d="",p="",g=!1;for(let b=0;b<u;++b)d+=o[b][0].slice(c)+`
`;for(let b=u;b<a;++b){let[N,R]=o[b];l+=N.length+R.length+1;let v=R[R.length-1]==="\r";if(v&&(R=R.slice(0,-1)),R&&N.length<c){let w=`Block scalar lines must not be less indented than their ${r.indent?"explicit indentation indicator":"first line"}`;t(l-R.length-(v?2:1),"BAD_INDENT",w),N=""}s===Th.Scalar.BLOCK_LITERAL?(d+=p+N.slice(c)+R,p=`
`):N.length>c||R[0]==="	"?(p===" "?p=`
`:!g&&p===`
`&&(p=`

`),d+=p+N.slice(c)+R,p=`
`,g=!0):R===""?p===`
`?d+=`
`:p=`
`:(d+=p+R,p=" ",g=!1)}switch(r.chomp){case"-":break;case"+":for(let b=a;b<o.length;++b)d+=`
`+o[b][0].slice(c);d[d.length-1]!==`
`&&(d+=`
`);break;default:d+=`
`}let _=i+r.length+e.source.length;return{value:d,type:s,comment:r.comment,range:[i,_,_]}}function uC({offset:n,props:e},t,i){if(e[0].type!=="block-scalar-header")return i(e[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:r}=e[0],s=r[0],o=0,a="",c=-1;for(let p=1;p<r.length;++p){let g=r[p];if(!a&&(g==="-"||g==="+"))a=g;else{let _=Number(g);!o&&_?o=_:c===-1&&(c=n+p)}}c!==-1&&i(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let l=!1,u="",d=r.length;for(let p=1;p<e.length;++p){let g=e[p];switch(g.type){case"space":l=!0;case"newline":d+=g.source.length;break;case"comment":t&&!l&&i(g,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),d+=g.source.length,u=g.source.substring(1);break;case"error":i(g,"UNEXPECTED_TOKEN",g.message),d+=g.source.length;break;default:{let _=`Unexpected token in block scalar header: ${g.type}`;i(g,"UNEXPECTED_TOKEN",_);let b=g.source;b&&typeof b=="string"&&(d+=b.length)}}}return{mode:s,indent:o,chomp:a,comment:u,length:d}}function fC(n){let e=n.split(/\n( *)/),t=e[0],i=t.match(/^( *)/),s=[i?.[1]?[i[1],t.slice(i[1].length)]:["",t]];for(let o=1;o<e.length;o+=2)s.push([e[o],e[o+1]]);return s}ik.resolveBlockScalar=lC});var kh=C(sk=>{"use strict";var Sh=ze(),dC=Ur();function hC(n,e,t){let{offset:i,type:r,source:s,end:o}=n,a,c,l=(p,g,_)=>t(i+p,g,_);switch(r){case"scalar":a=Sh.Scalar.PLAIN,c=pC(s,l);break;case"single-quoted-scalar":a=Sh.Scalar.QUOTE_SINGLE,c=mC(s,l);break;case"double-quoted-scalar":a=Sh.Scalar.QUOTE_DOUBLE,c=gC(s,l);break;default:return t(n,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[i,i+s.length,i+s.length]}}let u=i+s.length,d=dC.resolveEnd(o,u,e,t);return{value:c,type:a,comment:d.comment,range:[i,u,d.offset]}}function pC(n,e){let t="";switch(n[0]){case"	":t="a tab character";break;case",":t="flow indicator character ,";break;case"%":t="directive indicator character %";break;case"|":case">":{t=`block scalar indicator ${n[0]}`;break}case"@":case"`":{t=`reserved character ${n[0]}`;break}}return t&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${t}`),rk(n)}function mC(n,e){return(n[n.length-1]!=="'"||n.length===1)&&e(n.length,"MISSING_CHAR","Missing closing 'quote"),rk(n.slice(1,-1)).replace(/''/g,"'")}function rk(n){let e,t;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),t=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,t=/[ \t]*(.*?)[ \t]*\r?\n/sy}let i=e.exec(n);if(!i)return n;let r=i[1],s=" ",o=e.lastIndex;for(t.lastIndex=o;i=t.exec(n);)i[1]===""?s===`
`?r+=s:s=`
`:(r+=s+i[1],s=" "),o=t.lastIndex;let a=/[ \t]*(.*)/sy;return a.lastIndex=o,i=a.exec(n),r+s+(i?.[1]??"")}function gC(n,e){let t="";for(let i=1;i<n.length-1;++i){let r=n[i];if(!(r==="\r"&&n[i+1]===`
`))if(r===`
`){let{fold:s,offset:o}=yC(n,i);t+=s,i=o}else if(r==="\\"){let s=n[++i],o=bC[s];if(o)t+=o;else if(s===`
`)for(s=n[i+1];s===" "||s==="	";)s=n[++i+1];else if(s==="\r"&&n[i+1]===`
`)for(s=n[++i+1];s===" "||s==="	";)s=n[++i+1];else if(s==="x"||s==="u"||s==="U"){let a={x:2,u:4,U:8}[s];t+=TC(n,i+1,a,e),i+=a}else{let a=n.substr(i-1,2);e(i-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),t+=a}}else if(r===" "||r==="	"){let s=i,o=n[i+1];for(;o===" "||o==="	";)o=n[++i+1];o!==`
`&&!(o==="\r"&&n[i+2]===`
`)&&(t+=i>s?n.slice(s,i+1):r)}else t+=r}return(n[n.length-1]!=='"'||n.length===1)&&e(n.length,"MISSING_CHAR",'Missing closing "quote'),t}function yC(n,e){let t="",i=n[e+1];for(;(i===" "||i==="	"||i===`
`||i==="\r")&&!(i==="\r"&&n[e+2]!==`
`);)i===`
`&&(t+=`
`),e+=1,i=n[e+1];return t||(t=" "),{fold:t,offset:e}}var bC={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function TC(n,e,t,i){let r=n.substr(e,t),o=r.length===t&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(o)){let a=n.substr(e-2,t+2);return i(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(o)}sk.resolveFlowScalar=hC});var ck=C(ak=>{"use strict";var Vi=ce(),ok=ze(),vC=vh(),SC=kh();function kC(n,e,t,i){let{value:r,type:s,comment:o,range:a}=e.type==="block-scalar"?vC.resolveBlockScalar(n,e,i):SC.resolveFlowScalar(e,n.options.strict,i),c=t?n.directives.tagName(t.source,d=>i(t,"TAG_RESOLVE_FAILED",d)):null,l;n.options.stringKeys&&n.atKey?l=n.schema[Vi.SCALAR]:c?l=EC(n.schema,r,c,t,i):e.type==="scalar"?l=NC(n,r,e,i):l=n.schema[Vi.SCALAR];let u;try{let d=l.resolve(r,p=>i(t??e,"TAG_RESOLVE_FAILED",p),n.options);u=Vi.isScalar(d)?d:new ok.Scalar(d)}catch(d){let p=d instanceof Error?d.message:String(d);i(t??e,"TAG_RESOLVE_FAILED",p),u=new ok.Scalar(r)}return u.range=a,u.source=r,s&&(u.type=s),c&&(u.tag=c),l.format&&(u.format=l.format),o&&(u.comment=o),u}function EC(n,e,t,i,r){if(t==="!")return n[Vi.SCALAR];let s=[];for(let a of n.tags)if(!a.collection&&a.tag===t)if(a.default&&a.test)s.push(a);else return a;for(let a of s)if(a.test?.test(e))return a;let o=n.knownTags[t];return o&&!o.collection?(n.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(r(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${t}`,t!=="tag:yaml.org,2002:str"),n[Vi.SCALAR])}function NC({atKey:n,directives:e,schema:t},i,r,s){let o=t.tags.find(a=>(a.default===!0||n&&a.default==="key")&&a.test?.test(i))||t[Vi.SCALAR];if(t.compat){let a=t.compat.find(c=>c.default&&c.test?.test(i))??t[Vi.SCALAR];if(o.tag!==a.tag){let c=e.tagString(o.tag),l=e.tagString(a.tag),u=`Value may be parsed as either ${c} or ${l}`;s(r,"TAG_RESOLVE_FAILED",u,!0)}}return o}ak.composeScalar=kC});var uk=C(lk=>{"use strict";function wC(n,e,t){if(e){t===null&&(t=e.length);for(let i=t-1;i>=0;--i){let r=e[i];switch(r.type){case"space":case"comment":case"newline":n-=r.source.length;continue}for(r=e[++i];r?.type==="space";)n+=r.source.length,r=e[++i];break}}return n}lk.emptyScalarPosition=wC});var hk=C(Nh=>{"use strict";var _C=Os(),PC=ce(),DC=nk(),fk=ck(),RC=Ur(),CC=uk(),OC={composeNode:dk,composeEmptyNode:Eh};function dk(n,e,t,i){let r=n.atKey,{spaceBefore:s,comment:o,anchor:a,tag:c}=t,l,u=!0;switch(e.type){case"alias":l=AC(n,e,i),(a||c)&&i(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=fk.composeScalar(n,e,c,i),a&&(l.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=DC.composeCollection(OC,n,e,t,i),a&&(l.anchor=a.source.substring(1));break;default:{let d=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;i(e,"UNEXPECTED_TOKEN",d),l=Eh(n,e.offset,void 0,null,t,i),u=!1}}return a&&l.anchor===""&&i(a,"BAD_ALIAS","Anchor cannot be an empty string"),r&&n.options.stringKeys&&(!PC.isScalar(l)||typeof l.value!="string"||l.tag&&l.tag!=="tag:yaml.org,2002:str")&&i(c??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),s&&(l.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?l.comment=o:l.commentBefore=o),n.options.keepSourceTokens&&u&&(l.srcToken=e),l}function Eh(n,e,t,i,{spaceBefore:r,comment:s,anchor:o,tag:a,end:c},l){let u={type:"scalar",offset:CC.emptyScalarPosition(e,t,i),indent:-1,source:""},d=fk.composeScalar(n,u,a,l);return o&&(d.anchor=o.source.substring(1),d.anchor===""&&l(o,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(d.spaceBefore=!0),s&&(d.comment=s,d.range[2]=c),d}function AC({options:n},{offset:e,source:t,end:i},r){let s=new _C.Alias(t.substring(1));s.source===""&&r(e,"BAD_ALIAS","Alias cannot be an empty string"),s.source.endsWith(":")&&r(e+t.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);let o=e+t.length,a=RC.resolveEnd(i,o,n.strict,r);return s.range=[e,o,a.offset],a.comment&&(s.comment=a.comment),s}Nh.composeEmptyNode=Eh;Nh.composeNode=dk});var gk=C(mk=>{"use strict";var IC=Ks(),pk=hk(),LC=Ur(),xC=Qs();function MC(n,e,{offset:t,start:i,value:r,end:s},o){let a=Object.assign({_directives:e},n),c=new IC.Document(void 0,a),l={atKey:!1,atRoot:!0,directives:c.directives,options:c.options,schema:c.schema},u=xC.resolveProps(i,{indicator:"doc-start",next:r??s?.[0],offset:t,onError:o,parentIndent:0,startOnNewline:!0});u.found&&(c.directives.docStart=!0,r&&(r.type==="block-map"||r.type==="block-seq")&&!u.hasNewline&&o(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=r?pk.composeNode(l,r,u,o):pk.composeEmptyNode(l,u.end,i,null,u,o);let d=c.contents.range[2],p=LC.resolveEnd(s,d,!1,o);return p.comment&&(c.comment=p.comment),c.range=[t,d,p.offset],c}mk.composeDoc=MC});var _h=C(Tk=>{"use strict";var qC=fd(),FC=Ks(),Js=Xs(),yk=ce(),BC=gk(),jC=Ur();function Zs(n){if(typeof n=="number")return[n,n+1];if(Array.isArray(n))return n.length===2?n:[n[0],n[1]];let{offset:e,source:t}=n;return[e,e+(typeof t=="string"?t.length:1)]}function bk(n){let e="",t=!1,i=!1;for(let r=0;r<n.length;++r){let s=n[r];switch(s[0]){case"#":e+=(e===""?"":i?`

`:`
`)+(s.substring(1)||" "),t=!0,i=!1;break;case"%":n[r+1]?.[0]!=="#"&&(r+=1),t=!1;break;default:t||(i=!0),t=!1}}return{comment:e,afterEmptyLine:i}}var wh=class{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(t,i,r,s)=>{let o=Zs(t);s?this.warnings.push(new Js.YAMLWarning(o,i,r)):this.errors.push(new Js.YAMLParseError(o,i,r))},this.directives=new qC.Directives({version:e.version||"1.2"}),this.options=e}decorate(e,t){let{comment:i,afterEmptyLine:r}=bk(this.prelude);if(i){let s=e.contents;if(t)e.comment=e.comment?`${e.comment}
${i}`:i;else if(r||e.directives.docStart||!s)e.commentBefore=i;else if(yk.isCollection(s)&&!s.flow&&s.items.length>0){let o=s.items[0];yk.isPair(o)&&(o=o.key);let a=o.commentBefore;o.commentBefore=a?`${i}
${a}`:i}else{let o=s.commentBefore;s.commentBefore=o?`${i}
${o}`:i}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:bk(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,i=-1){for(let r of e)yield*this.next(r);yield*this.end(t,i)}*next(e){switch(process.env.LOG_STREAM&&console.dir(e,{depth:null}),e.type){case"directive":this.directives.add(e.source,(t,i,r)=>{let s=Zs(e);s[0]+=t,this.onError(s,"BAD_DIRECTIVE",i,r)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{let t=BC.composeDoc(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{let t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,i=new Js.YAMLParseError(Zs(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(i):this.doc.errors.push(i);break}case"doc-end":{if(!this.doc){let i="Unexpected doc-end without preceding document";this.errors.push(new Js.YAMLParseError(Zs(e),"UNEXPECTED_TOKEN",i));break}this.doc.directives.docEnd=!0;let t=jC.resolveEnd(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){let i=this.doc.comment;this.doc.comment=i?`${i}
${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new Js.YAMLParseError(Zs(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){let i=Object.assign({_directives:this.directives},this.options),r=new FC.Document(void 0,i);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),r.range=[0,t,t],this.decorate(r,!1),yield r}}};Tk.Composer=wh});var kk=C(kl=>{"use strict";var UC=vh(),$C=kh(),WC=Xs(),vk=Ms();function VC(n,e=!0,t){if(n){let i=(r,s,o)=>{let a=typeof r=="number"?r:Array.isArray(r)?r[0]:r.offset;if(t)t(a,s,o);else throw new WC.YAMLParseError([a,a+1],s,o)};switch(n.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return $C.resolveFlowScalar(n,e,i);case"block-scalar":return UC.resolveBlockScalar({options:{strict:e}},n,i)}}return null}function HC(n,e){let{implicitKey:t=!1,indent:i,inFlow:r=!1,offset:s=-1,type:o="PLAIN"}=e,a=vk.stringifyString({type:o,value:n},{implicitKey:t,indent:i>0?" ".repeat(i):"",inFlow:r,options:{blockQuote:!0,lineWidth:-1}}),c=e.end??[{type:"newline",offset:-1,indent:i,source:`
`}];switch(a[0]){case"|":case">":{let l=a.indexOf(`
`),u=a.substring(0,l),d=a.substring(l+1)+`
`,p=[{type:"block-scalar-header",offset:s,indent:i,source:u}];return Sk(p,c)||p.push({type:"newline",offset:-1,indent:i,source:`
`}),{type:"block-scalar",offset:s,indent:i,props:p,source:d}}case'"':return{type:"double-quoted-scalar",offset:s,indent:i,source:a,end:c};case"'":return{type:"single-quoted-scalar",offset:s,indent:i,source:a,end:c};default:return{type:"scalar",offset:s,indent:i,source:a,end:c}}}function YC(n,e,t={}){let{afterKey:i=!1,implicitKey:r=!1,inFlow:s=!1,type:o}=t,a="indent"in n?n.indent:null;if(i&&typeof a=="number"&&(a+=2),!o)switch(n.type){case"single-quoted-scalar":o="QUOTE_SINGLE";break;case"double-quoted-scalar":o="QUOTE_DOUBLE";break;case"block-scalar":{let l=n.props[0];if(l.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o=l.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:o="PLAIN"}let c=vk.stringifyString({type:o,value:e},{implicitKey:r||a===null,indent:a!==null&&a>0?" ".repeat(a):"",inFlow:s,options:{blockQuote:!0,lineWidth:-1}});switch(c[0]){case"|":case">":KC(n,c);break;case'"':Ph(n,c,"double-quoted-scalar");break;case"'":Ph(n,c,"single-quoted-scalar");break;default:Ph(n,c,"scalar")}}function KC(n,e){let t=e.indexOf(`
`),i=e.substring(0,t),r=e.substring(t+1)+`
`;if(n.type==="block-scalar"){let s=n.props[0];if(s.type!=="block-scalar-header")throw new Error("Invalid block scalar header");s.source=i,n.source=r}else{let{offset:s}=n,o="indent"in n?n.indent:-1,a=[{type:"block-scalar-header",offset:s,indent:o,source:i}];Sk(a,"end"in n?n.end:void 0)||a.push({type:"newline",offset:-1,indent:o,source:`
`});for(let c of Object.keys(n))c!=="type"&&c!=="offset"&&delete n[c];Object.assign(n,{type:"block-scalar",indent:o,props:a,source:r})}}function Sk(n,e){if(e)for(let t of e)switch(t.type){case"space":case"comment":n.push(t);break;case"newline":return n.push(t),!0}return!1}function Ph(n,e,t){switch(n.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":n.type=t,n.source=e;break;case"block-scalar":{let i=n.props.slice(1),r=e.length;n.props[0].type==="block-scalar-header"&&(r-=n.props[0].source.length);for(let s of i)s.offset+=r;delete n.props,Object.assign(n,{type:t,source:e,end:i});break}case"block-map":case"block-seq":{let r={type:"newline",offset:n.offset+e.length,indent:n.indent,source:`
`};delete n.items,Object.assign(n,{type:t,source:e,end:[r]});break}default:{let i="indent"in n?n.indent:-1,r="end"in n&&Array.isArray(n.end)?n.end.filter(s=>s.type==="space"||s.type==="comment"||s.type==="newline"):[];for(let s of Object.keys(n))s!=="type"&&s!=="offset"&&delete n[s];Object.assign(n,{type:t,indent:i,source:e,end:r})}}}kl.createScalarToken=HC;kl.resolveAsScalar=VC;kl.setScalarValue=YC});var Nk=C(Ek=>{"use strict";var zC=n=>"type"in n?Nl(n):El(n);function Nl(n){switch(n.type){case"block-scalar":{let e="";for(let t of n.props)e+=Nl(t);return e+n.source}case"block-map":case"block-seq":{let e="";for(let t of n.items)e+=El(t);return e}case"flow-collection":{let e=n.start.source;for(let t of n.items)e+=El(t);for(let t of n.end)e+=t.source;return e}case"document":{let e=El(n);if(n.end)for(let t of n.end)e+=t.source;return e}default:{let e=n.source;if("end"in n&&n.end)for(let t of n.end)e+=t.source;return e}}}function El({start:n,key:e,sep:t,value:i}){let r="";for(let s of n)r+=s.source;if(e&&(r+=Nl(e)),t)for(let s of t)r+=s.source;return i&&(r+=Nl(i)),r}Ek.stringify=zC});var Dk=C(Pk=>{"use strict";var Dh=Symbol("break visit"),GC=Symbol("skip children"),wk=Symbol("remove item");function Hi(n,e){"type"in n&&n.type==="document"&&(n={start:n.start,value:n.value}),_k(Object.freeze([]),n,e)}Hi.BREAK=Dh;Hi.SKIP=GC;Hi.REMOVE=wk;Hi.itemAtPath=(n,e)=>{let t=n;for(let[i,r]of e){let s=t?.[i];if(s&&"items"in s)t=s.items[r];else return}return t};Hi.parentCollection=(n,e)=>{let t=Hi.itemAtPath(n,e.slice(0,-1)),i=e[e.length-1][0],r=t?.[i];if(r&&"items"in r)return r;throw new Error("Parent collection not found")};function _k(n,e,t){let i=t(e,n);if(typeof i=="symbol")return i;for(let r of["key","value"]){let s=e[r];if(s&&"items"in s){for(let o=0;o<s.items.length;++o){let a=_k(Object.freeze(n.concat([[r,o]])),s.items[o],t);if(typeof a=="number")o=a-1;else{if(a===Dh)return Dh;a===wk&&(s.items.splice(o,1),o-=1)}}typeof i=="function"&&r==="key"&&(i=i(e,n))}}return typeof i=="function"?i(e,n):i}Pk.visit=Hi});var wl=C(At=>{"use strict";var Rh=kk(),XC=Nk(),QC=Dk(),Ch="\uFEFF",Oh="",Ah="",Ih="",JC=n=>!!n&&"items"in n,ZC=n=>!!n&&(n.type==="scalar"||n.type==="single-quoted-scalar"||n.type==="double-quoted-scalar"||n.type==="block-scalar");function eO(n){switch(n){case Ch:return"<BOM>";case Oh:return"<DOC>";case Ah:return"<FLOW_END>";case Ih:return"<SCALAR>";default:return JSON.stringify(n)}}function tO(n){switch(n){case Ch:return"byte-order-mark";case Oh:return"doc-mode";case Ah:return"flow-error-end";case Ih:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(n[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}At.createScalarToken=Rh.createScalarToken;At.resolveAsScalar=Rh.resolveAsScalar;At.setScalarValue=Rh.setScalarValue;At.stringify=XC.stringify;At.visit=QC.visit;At.BOM=Ch;At.DOCUMENT=Oh;At.FLOW_END=Ah;At.SCALAR=Ih;At.isCollection=JC;At.isScalar=ZC;At.prettyToken=eO;At.tokenType=tO});var Mh=C(Ck=>{"use strict";var eo=wl();function cn(n){switch(n){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var Rk=new Set("0123456789ABCDEFabcdef"),nO=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),_l=new Set(",[]{}"),iO=new Set(` ,[]{}
\r	`),Lh=n=>!n||iO.has(n),xh=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!t;let i=this.next??"stream";for(;i&&(t||this.hasChars(1));)i=yield*this.parseNext(i)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;t===" "||t==="	";)t=this.buffer[++e];return!t||t==="#"||t===`
`?!0:t==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let i=0;for(;t===" ";)t=this.buffer[++i+e];if(t==="\r"){let r=this.buffer[i+e+1];if(r===`
`||!r&&!this.atEnd)return e+i+1}return t===`
`||i>=this.indentNext||!t&&!this.atEnd?e+i:-1}if(t==="-"||t==="."){let i=this.buffer.substr(e,3);if((i==="---"||i==="...")&&cn(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===eo.BOM&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let t=e.length,i=e.indexOf("#");for(;i!==-1;){let s=e[i-1];if(s===" "||s==="	"){t=i-1;break}else i=e.indexOf("#",i+1)}for(;;){let s=e[t-1];if(s===" "||s==="	")t-=1;else break}let r=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){let t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield eo.DOCUMENT,yield*this.parseLineStart()}*parseLineStart(){let e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let t=this.peek(3);if((t==="---"||t==="...")&&cn(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,t==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!cn(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&cn(t)){let i=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=i,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let e=this.getLine();if(e===null)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Lh),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=yield*this.parseBlockScalarHeader(),t+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,i=-1;do e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=i=t):t=0,t+=yield*this.pushSpaces(!0);while(e+t>0);let r=this.getLine();if(r===null)return this.setNext("flow");if((i!==-1&&i<this.indentNext&&r[0]!=="#"||i===0&&(r.startsWith("---")||r.startsWith("..."))&&cn(r[3]))&&!(i===this.indentNext-1&&this.flowLevel===1&&(r[0]==="]"||r[0]==="}")))return this.flowLevel=0,yield eo.FLOW_END,yield*this.parseLineStart();let s=0;for(;r[s]===",";)s+=yield*this.pushCount(1),s+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(s+=yield*this.pushIndicators(),r[s]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-s),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Lh),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let o=this.charAt(1);if(this.flowKey||cn(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let e=this.charAt(0),t=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;t!==-1&&this.buffer[t+1]==="'";)t=this.buffer.indexOf("'",t+2);else for(;t!==-1;){let s=0;for(;this.buffer[t-1-s]==="\\";)s+=1;if(s%2===0)break;t=this.buffer.indexOf('"',t+1)}let i=this.buffer.substring(0,t),r=i.indexOf(`
`,this.pos);if(r!==-1){for(;r!==-1;){let s=this.continueScalar(r+1);if(s===-1)break;r=i.indexOf(`
`,s)}r!==-1&&(t=r-(i[r-1]==="\r"?2:1))}if(t===-1){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){let t=this.buffer[++e];if(t==="+")this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if(t!=="-")break}return yield*this.pushUntil(t=>cn(t)||t==="#")}*parseBlockScalar(){let e=this.pos-1,t=0,i;e:for(let s=this.pos;i=this.buffer[s];++s)switch(i){case" ":t+=1;break;case`
`:e=s,t=0;break;case"\r":{let o=this.buffer[s+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!i&&!this.atEnd)return this.setNext("block-scalar");if(t>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=t:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{let s=this.continueScalar(e+1);if(s===-1)break;e=this.buffer.indexOf(`
`,s)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let r=e+1;for(i=this.buffer[r];i===" ";)i=this.buffer[++r];if(i==="	"){for(;i==="	"||i===" "||i==="\r"||i===`
`;)i=this.buffer[++r];e=r-1}else if(!this.blockScalarKeep)do{let s=e-1,o=this.buffer[s];o==="\r"&&(o=this.buffer[--s]);let a=s;for(;o===" ";)o=this.buffer[--s];if(o===`
`&&s>=this.pos&&s+1+t>a)e=s;else break}while(!0);return yield eo.SCALAR,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let e=this.flowLevel>0,t=this.pos-1,i=this.pos-1,r;for(;r=this.buffer[++i];)if(r===":"){let s=this.buffer[i+1];if(cn(s)||e&&_l.has(s))break;t=i}else if(cn(r)){let s=this.buffer[i+1];if(r==="\r"&&(s===`
`?(i+=1,r=`
`,s=this.buffer[i+1]):t=i),s==="#"||e&&_l.has(s))break;if(r===`
`){let o=this.continueScalar(i+1);if(o===-1)break;i=Math.max(i,o-2)}}else{if(e&&_l.has(r))break;t=i}return!r&&!this.atEnd?this.setNext("plain-scalar"):(yield eo.SCALAR,yield*this.pushToIndex(t+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){let i=this.buffer.slice(this.pos,e);return i?(yield i,this.pos+=i.length,i.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Lh))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{let e=this.flowLevel>0,t=this.charAt(1);if(cn(t)||e&&_l.has(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,t=this.buffer[e];for(;!cn(t)&&t!==">";)t=this.buffer[++e];return yield*this.pushToIndex(t===">"?e+1:e,!1)}else{let e=this.pos+1,t=this.buffer[e];for(;t;)if(nO.has(t))t=this.buffer[++e];else if(t==="%"&&Rk.has(this.buffer[e+1])&&Rk.has(this.buffer[e+2]))t=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){let e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let t=this.pos-1,i;do i=this.buffer[++t];while(i===" "||e&&i==="	");let r=t-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=t),r}*pushUntil(e){let t=this.pos,i=this.buffer[t];for(;!e(i);)i=this.buffer[++t];return yield*this.pushToIndex(t,!1)}};Ck.Lexer=xh});var Fh=C(Ok=>{"use strict";var qh=class{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,i=this.lineStarts.length;for(;t<i;){let s=t+i>>1;this.lineStarts[s]<e?t=s+1:i=s}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(t===0)return{line:0,col:e};let r=this.lineStarts[t-1];return{line:t,col:e-r+1}}}};Ok.LineCounter=qh});var jh=C(Mk=>{"use strict";var Ak=wl(),rO=Mh();function Yi(n,e){for(let t=0;t<n.length;++t)if(n[t].type===e)return!0;return!1}function Ik(n){for(let e=0;e<n.length;++e)switch(n[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function xk(n){switch(n?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Pl(n){switch(n.type){case"document":return n.start;case"block-map":{let e=n.items[n.items.length-1];return e.sep??e.start}case"block-seq":return n.items[n.items.length-1].start;default:return[]}}function $r(n){if(n.length===0)return[];let e=n.length;e:for(;--e>=0;)switch(n[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;n[++e]?.type==="space";);return n.splice(e,n.length)}function Lk(n){if(n.start.type==="flow-seq-start")for(let e of n.items)e.sep&&!e.value&&!Yi(e.start,"explicit-key-ind")&&!Yi(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,xk(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}var Bh=class{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new rO.Lexer,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let i of this.lexer.lex(e,t))yield*this.next(i);t||(yield*this.end())}*next(e){if(this.source=e,process.env.LOG_TOKENS&&console.log("|",Ak.prettyToken(e)),this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}let t=Ak.tokenType(e);if(t)if(t==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{let i=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:i,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){let t=e??this.stack.pop();if(!t)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield t;else{let i=this.peek(1);switch(t.type==="block-scalar"?t.indent="indent"in i?i.indent:0:t.type==="flow-collection"&&i.type==="document"&&(t.indent=0),t.type==="flow-collection"&&Lk(t),i.type){case"document":i.value=t;break;case"block-scalar":i.props.push(t);break;case"block-map":{let r=i.items[i.items.length-1];if(r.value){i.items.push({start:[],key:t,sep:[]}),this.onKeyLine=!0;return}else if(r.sep)r.value=t;else{Object.assign(r,{key:t,sep:[]}),this.onKeyLine=!r.explicitKey;return}break}case"block-seq":{let r=i.items[i.items.length-1];r.value?i.items.push({start:[],value:t}):r.value=t;break}case"flow-collection":{let r=i.items[i.items.length-1];!r||r.value?i.items.push({start:[],key:t,sep:[]}):r.sep?r.value=t:Object.assign(r,{key:t,sep:[]});return}default:yield*this.pop(),yield*this.pop(t)}if((i.type==="document"||i.type==="block-map"||i.type==="block-seq")&&(t.type==="block-map"||t.type==="block-seq")){let r=t.items[t.items.length-1];r&&!r.sep&&!r.value&&r.start.length>0&&Ik(r.start)===-1&&(t.indent===0||r.start.every(s=>s.type!=="comment"||s.indent<t.indent))&&(i.type==="document"?i.end=r.start:i.items.push({start:r.start}),t.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{Ik(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}let t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){let t=Pl(this.peek(2)),i=$r(t),r;e.end?(r=e.end,r.push(this.sourceToken),delete e.end):r=[this.sourceToken];let s={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:i,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let t=this.source.indexOf(`
`)+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf(`
`,t)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){let t=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){let i="end"in t.value?t.value.end:void 0;(Array.isArray(i)?i[i.length-1]:void 0)?.type==="comment"?i?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){let r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){let i=!this.onKeyLine&&this.indent===e.indent,r=i&&(t.sep||t.explicitKey)&&this.type!=="seq-item-ind",s=[];if(r&&t.sep&&!t.value){let o=[];for(let a=0;a<t.sep.length;++a){let c=t.sep[a];switch(c.type){case"newline":o.push(a);break;case"space":break;case"comment":c.indent>e.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(s=t.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":r||t.value?(s.push(this.sourceToken),e.items.push({start:s}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"explicit-key-ind":!t.sep&&!t.explicitKey?(t.start.push(this.sourceToken),t.explicitKey=!0):r||t.value?(s.push(this.sourceToken),e.items.push({start:s,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(t.explicitKey)if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Yi(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]});else if(xk(t.key)&&!Yi(t.sep,"newline")){let o=$r(t.start),a=t.key,c=t.sep;c.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:a,sep:c}]})}else s.length>0?t.sep=t.sep.concat(s,this.sourceToken):t.sep.push(this.sourceToken);else if(Yi(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{let o=$r(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||r?e.items.push({start:s,key:null,sep:[this.sourceToken]}):Yi(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let o=this.flowScalar(this.type);r||t.value?(e.items.push({start:s,key:o,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(o):(Object.assign(t,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{let o=this.startBlockValue(e);if(o){i&&o.type!=="block-seq"&&e.items.push({start:s}),this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){let t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){let i="end"in t.value?t.value.end:void 0;(Array.isArray(i)?i[i.length-1]:void 0)?.type==="comment"?i?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){let r=e.items[e.items.length-2]?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;t.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;t.value||Yi(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return}if(this.indent>e.indent){let i=this.startBlockValue(e);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){let t=e.items[e.items.length-1];if(this.type==="flow-error-end"){let i;do yield*this.pop(),i=this.peek(1);while(i&&i.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return;case"map-value-ind":!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let r=this.flowScalar(this.type);!t||t.value?e.items.push({start:[],key:r,sep:[]}):t.sep?this.stack.push(r):Object.assign(t,{key:r,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}let i=this.startBlockValue(e);i?this.stack.push(i):(yield*this.pop(),yield*this.step())}else{let i=this.peek(2);if(i.type==="block-map"&&(this.type==="map-value-ind"&&i.indent===e.indent||this.type==="newline"&&!i.items[i.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&i.type!=="flow-collection"){let r=Pl(i),s=$r(r);Lk(e);let o=e.end.splice(1,e.end.length);o.push(this.sourceToken);let a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let t=this.source.indexOf(`
`)+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf(`
`,t)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let t=Pl(e),i=$r(t);return i.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;let t=Pl(e),i=$r(t);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return this.type!=="comment"||this.indent<=t?!1:e.every(i=>i.type==="newline"||i.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}};Mk.Parser=Bh});var Uk=C(no=>{"use strict";var qk=_h(),sO=Ks(),to=Xs(),oO=Nd(),aO=ce(),cO=Fh(),Fk=jh();function Bk(n){let e=n.prettyErrors!==!1;return{lineCounter:n.lineCounter||e&&new cO.LineCounter||null,prettyErrors:e}}function lO(n,e={}){let{lineCounter:t,prettyErrors:i}=Bk(e),r=new Fk.Parser(t?.addNewLine),s=new qk.Composer(e),o=Array.from(s.compose(r.parse(n)));if(i&&t)for(let a of o)a.errors.forEach(to.prettifyError(n,t)),a.warnings.forEach(to.prettifyError(n,t));return o.length>0?o:Object.assign([],{empty:!0},s.streamInfo())}function jk(n,e={}){let{lineCounter:t,prettyErrors:i}=Bk(e),r=new Fk.Parser(t?.addNewLine),s=new qk.Composer(e),o=null;for(let a of s.compose(r.parse(n),!0,n.length))if(!o)o=a;else if(o.options.logLevel!=="silent"){o.errors.push(new to.YAMLParseError(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return i&&t&&(o.errors.forEach(to.prettifyError(n,t)),o.warnings.forEach(to.prettifyError(n,t))),o}function uO(n,e,t){let i;typeof e=="function"?i=e:t===void 0&&e&&typeof e=="object"&&(t=e);let r=jk(n,t);if(!r)return null;if(r.warnings.forEach(s=>oO.warn(r.options.logLevel,s)),r.errors.length>0){if(r.options.logLevel!=="silent")throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:i},t))}function fO(n,e,t){let i=null;if(typeof e=="function"||Array.isArray(e)?i=e:t===void 0&&e&&(t=e),typeof t=="string"&&(t=t.length),typeof t=="number"){let r=Math.round(t);t=r<1?void 0:r>8?{indent:8}:{indent:r}}if(n===void 0){let{keepUndefined:r}=t??e??{};if(!r)return}return aO.isDocument(n)&&!i?n.toString(t):new sO.Document(n,i,t).toString(t)}no.parse=uO;no.parseAllDocuments=lO;no.parseDocument=jk;no.stringify=fO});var Wk=C(me=>{"use strict";var dO=_h(),hO=Ks(),pO=oh(),Uh=Xs(),mO=Os(),vi=ce(),gO=gi(),yO=ze(),bO=bi(),TO=Ti(),vO=wl(),SO=Mh(),kO=Fh(),EO=jh(),Dl=Uk(),$k=Ps();me.Composer=dO.Composer;me.Document=hO.Document;me.Schema=pO.Schema;me.YAMLError=Uh.YAMLError;me.YAMLParseError=Uh.YAMLParseError;me.YAMLWarning=Uh.YAMLWarning;me.Alias=mO.Alias;me.isAlias=vi.isAlias;me.isCollection=vi.isCollection;me.isDocument=vi.isDocument;me.isMap=vi.isMap;me.isNode=vi.isNode;me.isPair=vi.isPair;me.isScalar=vi.isScalar;me.isSeq=vi.isSeq;me.Pair=gO.Pair;me.Scalar=yO.Scalar;me.YAMLMap=bO.YAMLMap;me.YAMLSeq=TO.YAMLSeq;me.CST=vO;me.Lexer=SO.Lexer;me.LineCounter=kO.LineCounter;me.Parser=EO.Parser;me.parse=Dl.parse;me.parseAllDocuments=Dl.parseAllDocuments;me.parseDocument=Dl.parseDocument;me.stringify=Dl.stringify;me.visit=$k.visit;me.visitAsync=$k.visitAsync});var zk=C((c$,Kk)=>{"use strict";Kk.exports=Hk;function Hk(n,e,t){n instanceof RegExp&&(n=Vk(n,t)),e instanceof RegExp&&(e=Vk(e,t));var i=Yk(n,e,t);return i&&{start:i[0],end:i[1],pre:t.slice(0,i[0]),body:t.slice(i[0]+n.length,i[1]),post:t.slice(i[1]+e.length)}}function Vk(n,e){var t=e.match(n);return t?t[0]:null}Hk.range=Yk;function Yk(n,e,t){var i,r,s,o,a,c=t.indexOf(n),l=t.indexOf(e,c+1),u=c;if(c>=0&&l>0){if(n===e)return[c,l];for(i=[],s=t.length;u>=0&&!a;)u==c?(i.push(u),c=t.indexOf(n,u+1)):i.length==1?a=[i.pop(),l]:(r=i.pop(),r<s&&(s=r,o=l),l=t.indexOf(e,u+1)),u=c<l&&c>=0?c:l;i.length&&(a=[s,o])}return a}});var nE=C((l$,tE)=>{var Gk=zk();tE.exports=_O;var Xk="\0SLASH"+Math.random()+"\0",Qk="\0OPEN"+Math.random()+"\0",Wh="\0CLOSE"+Math.random()+"\0",Jk="\0COMMA"+Math.random()+"\0",Zk="\0PERIOD"+Math.random()+"\0";function $h(n){return parseInt(n,10)==n?parseInt(n,10):n.charCodeAt(0)}function NO(n){return n.split("\\\\").join(Xk).split("\\{").join(Qk).split("\\}").join(Wh).split("\\,").join(Jk).split("\\.").join(Zk)}function wO(n){return n.split(Xk).join("\\").split(Qk).join("{").split(Wh).join("}").split(Jk).join(",").split(Zk).join(".")}function eE(n){if(!n)return[""];var e=[],t=Gk("{","}",n);if(!t)return n.split(",");var i=t.pre,r=t.body,s=t.post,o=i.split(",");o[o.length-1]+="{"+r+"}";var a=eE(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function _O(n){return n?(n.substr(0,2)==="{}"&&(n="\\{\\}"+n.substr(2)),io(NO(n),!0).map(wO)):[]}function PO(n){return"{"+n+"}"}function DO(n){return/^-?0\d/.test(n)}function RO(n,e){return n<=e}function CO(n,e){return n>=e}function io(n,e){var t=[],i=Gk("{","}",n);if(!i)return[n];var r=i.pre,s=i.post.length?io(i.post,!1):[""];if(/\$$/.test(i.pre))for(var o=0;o<s.length;o++){var a=r+"{"+i.body+"}"+s[o];t.push(a)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),u=c||l,d=i.body.indexOf(",")>=0;if(!u&&!d)return i.post.match(/,.*\}/)?(n=i.pre+"{"+i.body+Wh+i.post,io(n)):[n];var p;if(u)p=i.body.split(/\.\./);else if(p=eE(i.body),p.length===1&&(p=io(p[0],!1).map(PO),p.length===1))return s.map(function(qe){return i.pre+p[0]+qe});var g;if(u){var _=$h(p[0]),b=$h(p[1]),N=Math.max(p[0].length,p[1].length),R=p.length==3?Math.abs($h(p[2])):1,v=RO,T=b<_;T&&(R*=-1,v=CO);var w=p.some(DO);g=[];for(var L=_;v(L,b);L+=R){var M;if(l)M=String.fromCharCode(L),M==="\\"&&(M="");else if(M=String(L),w){var H=N-M.length;if(H>0){var j=new Array(H+1).join("0");L<0?M="-"+j+M.slice(1):M=j+M}}g.push(M)}}else{g=[];for(var ie=0;ie<p.length;ie++)g.push.apply(g,io(p[ie],!1))}for(var ie=0;ie<g.length;ie++)for(var o=0;o<s.length;o++){var a=r+g[ie]+s[o];(!e||u||a)&&t.push(a)}}return t}});var Qe=X(Ub());var ec=class n{constructor(e,t,i,r){this._uri=e,this._languageId=t,this._version=i,this._content=r,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),i=this.offsetAt(e.end);return this._content.substring(t,i)}return this._content}update(e,t){for(let i of e)if(n.isIncremental(i)){let r=Wb(i.range),s=this.offsetAt(r.start),o=this.offsetAt(r.end);this._content=this._content.substring(0,s)+i.text+this._content.substring(o,this._content.length);let a=Math.max(r.start.line,0),c=Math.max(r.end.line,0),l=this._lineOffsets,u=$b(i.text,!1,s);if(c-a===u.length)for(let p=0,g=u.length;p<g;p++)l[p+a+1]=u[p];else u.length<1e4?l.splice(a+1,c-a,...u):this._lineOffsets=l=l.slice(0,a+1).concat(u,l.slice(c+1));let d=i.text.length-(o-s);if(d!==0)for(let p=a+1+u.length,g=l.length;p<g;p++)l[p]=l[p]+d}else if(n.isFull(i))this._content=i.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=t}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=$b(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),i=0,r=t.length;if(r===0)return{line:0,character:e};for(;i<r;){let o=Math.floor((i+r)/2);t[o]>e?r=o:i=o+1}let s=i-1;return{line:s,character:e-t[s]}}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let i=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(i+e.character,r),i)}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let t=e;return t!=null&&typeof t.text=="string"&&t.range!==void 0&&(t.rangeLength===void 0||typeof t.rangeLength=="number")}static isFull(e){let t=e;return t!=null&&typeof t.text=="string"&&t.range===void 0&&t.rangeLength===void 0}},tc;(function(n){function e(r,s,o,a){return new ec(r,s,o,a)}n.create=e;function t(r,s,o){if(r instanceof ec)return r.update(s,o),r;throw new Error("TextDocument.update: document must be created by TextDocument.create")}n.update=t;function i(r,s){let o=r.getText(),a=Jf(s.map(w_),(u,d)=>{let p=u.range.start.line-d.range.start.line;return p===0?u.range.start.character-d.range.start.character:p}),c=0,l=[];for(let u of a){let d=r.offsetAt(u.range.start);if(d<c)throw new Error("Overlapping edit");d>c&&l.push(o.substring(c,d)),u.newText.length&&l.push(u.newText),c=r.offsetAt(u.range.end)}return l.push(o.substr(c)),l.join("")}n.applyEdits=i})(tc||(tc={}));function Jf(n,e){if(n.length<=1)return n;let t=n.length/2|0,i=n.slice(0,t),r=n.slice(t);Jf(i,e),Jf(r,e);let s=0,o=0,a=0;for(;s<i.length&&o<r.length;)e(i[s],r[o])<=0?n[a++]=i[s++]:n[a++]=r[o++];for(;s<i.length;)n[a++]=i[s++];for(;o<r.length;)n[a++]=r[o++];return n}function $b(n,e,t=0){let i=e?[t]:[];for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);(s===13||s===10)&&(s===13&&r+1<n.length&&n.charCodeAt(r+1)===10&&r++,i.push(t+r+1))}return i}function Wb(n){let e=n.start,t=n.end;return e.line>t.line||e.line===t.line&&e.character>t.character?{start:t,end:e}:n}function w_(n){let e=Wb(n.range);return e!==n.range?{newText:n.newText,range:e}:n}var nc=["namespace","class","enum","interface","struct","typeParameter","type","parameter","variable","property","enumMember","decorator","event","function","method","macro","label","comment","string","keyword","number","regexp","operator"],ic=["declaration","definition","readonly","static","deprecated","abstract","async","modification","documentation","defaultLibrary"];var Vb=X(te());var ne=n=>({start:{line:n.tokenIndexes?.start?.pos.line??0,character:n.tokenIndexes?.start?.pos.col??0},end:{line:n.tokenIndexes?.end?.pos.line??0,character:(n.tokenIndexes?.end?.pos.col??0)+(n.tokenIndexes?.end?.pos.len??0)}}),ti=n=>nc.findIndex(e=>e===n),ni=n=>ic.findIndex(e=>e===n),Mi=(n,e,t)=>!!(n.uri===e&&n.tokenIndexes?.start&&n.tokenIndexes?.end&&(n.tokenIndexes.start.pos.line<t.line||n.tokenIndexes.start.pos.line===t.line&&n.tokenIndexes.start.pos.col<=t.character)&&(n.tokenIndexes.end.pos.line>t.line||n.tokenIndexes.end.pos.line===t.line&&n.tokenIndexes.end.pos.col+n.tokenIndexes.end.pos.len>=t.character)),Hb=(n,e,t)=>!!(n.uri===e&&n.lastToken.value!==";"&&n.tokenIndexes?.start&&n.tokenIndexes?.end&&(n.tokenIndexes.start.pos.line===t.line||n.tokenIndexes.end.pos.line===t.line)&&t.character>=n.tokenIndexes.end.pos.col+n.tokenIndexes.end.pos.len),Yb=(n,e,t)=>{if(!n)return!1;let r=n.filter(s=>s.pos.line===t.line).at(-1);return r&&r.pos.col>=t.character?!1:e.tokenIndexes?.end===r};var ii=(n,e,t)=>{let i=n,r=n;for(;r;)i=r,r=[...i.children].reverse().find(s=>Mi(s,e,t));return i},A=(n,e,t=Vb.DiagnosticSeverity.Error,i=[],r=void 0,s=[])=>({issues:Array.isArray(n)?n:[n],astElement:e,severity:t,linkedTo:i,tags:r,templateStrings:s}),Kb=n=>[...n].sort((t,i)=>{if(t.sortKey===void 0||i.sortKey===void 0)throw new Error("Sort keys must be set");if(t.sortKey!==i.sortKey)return t.sortKey-i.sortKey;if(!t.tokenIndexes?.end||!i.tokenIndexes?.end)throw new Error("Must have token indexes");return t.tokenIndexes.end.pos.line!==i.tokenIndexes.end.pos.line?t.tokenIndexes.end.pos.line-i.tokenIndexes.end.pos.line:t.tokenIndexes.end.pos.col-i.tokenIndexes.end.pos.col});async function St(n,e,t,i){let r=n.textDocument.uri.replace("file://",""),s=await ks(e,r,i);if(!s)return[];console.time("search");let a=(await s.context.getRuntime()).getDeepestAstNode(r,n.position),c=a?.ast?.sortKey;return console.timeEnd("search"),t(a,u=>{let d=n.position;return u.uri===r?!!(u.tokenIndexes?.end&&(u.tokenIndexes.end.pos.line<d.line||u.tokenIndexes.end.pos.line===d.line&&u.tokenIndexes.end.pos.col+u.tokenIndexes.end.pos.len<=d.character)):c!==void 0&&u.sortKey<=c})}function z(n,e){return{start:n,end:e??n}}var F=(n,e)=>n?.tokens.some(t=>t===e),Ge=n=>e=>e?.value&&n===e.value?"yes":__(n)(e),ve=n=>e=>e?.tokens.some(t=>t===n)?"yes":"no",__=n=>e=>e?.value&&n.startsWith(e.value)?"partial":"no",xn=(n,e)=>!!n&&!!e&&n.pos.line===e.pos.line,ri=(n,e)=>!!n&&!!e&&xn(n,e)&&n.pos.col+n.pos.len===e.pos.col,rc=async n=>Promise.all(n.map(async(e,t)=>({index:t,context:e,files:(await e.getOrderedParsers()).map(i=>i.uri)}))),ks=async(n,e,t=0)=>(await rc(n)).sort(r=>r.index===t?-1:0).find(r=>r.files.some(s=>s===e)),zb=async(n,e)=>(await rc(n)).filter(i=>i.files.some(r=>r===e));var $=class{constructor(e){this._children=[];this._fisrtToken=e?.start,this._lastToken=e?.end}get sortKey(){return this._sortKey??this.parentNode?.sortKey??-1}set sortKey(e){this._sortKey??=e}get firstToken(){return this._fisrtToken??this._children[0].tokenIndexes.start}set firstToken(e){this._fisrtToken=e}get lastToken(){return this._lastToken??this._children.at(-1)?.lastToken??this.firstToken}set lastToken(e){this._lastToken=e}get uri(){return this._uri??this.parentNode?.uri}set uri(e){this._uri=e}get tokenIndexes(){return{start:this.firstToken,end:this.lastToken}}getDocumentSymbols(){if(!this.docSymbolsMeta)return this.children.flatMap(t=>t.getDocumentSymbols()??[]);let e=ne(this);return[{name:this.docSymbolsMeta.name?this.docSymbolsMeta.name:"__UNSET__",kind:this.docSymbolsMeta.kind,range:e,selectionRange:e,children:[...this.children.flatMap(t=>t.getDocumentSymbols()??[])]}]}buildSemanticTokens(e){this._children.forEach(t=>t.buildSemanticTokens(e)),!(!this.semanticTokenType||!this.semanticTokenModifiers)&&e(ti(this.semanticTokenType),ni(this.semanticTokenModifiers),this.tokenIndexes)}get children(){return this._children}get allDescendants(){return[...this._children,...this._children.flatMap(e=>e.allDescendants)]}addChild(e){e&&(e.parentNode=this,e.uri=this.uri,this.children.push(e))}insertAt(e,t){e&&(e.parentNode=this,e.uri=this.uri,this.children.splice(t,0,e))}};var Er=X(te());var Zb=X(te());var Gb=X(te()),mt=class extends ${constructor(t,i){super(i);this.value=t;this.semanticTokenType="string",this.semanticTokenModifiers="declaration",this.docSymbolsMeta={name:this.value,kind:Gb.SymbolKind.String}}toString(){return`"${this.value.toString()}"`}};var Xb=X(te()),Ye=class extends ${constructor(t){super();this.values=t;this.docSymbolsMeta={name:"Cell Array",kind:Xb.SymbolKind.Array},this.values.forEach(i=>this.addChild(i))}toString(){return`<${this.values.map(t=>t.toString()).join(" ")}>`}};var Qb=X(te());var yn=class extends ${},Es=class extends yn{constructor(t,i){super();this.expression=t;this.join=i;this.addChild(t),i&&(this.addChild(i.operator),this.addChild(i.expression))}addExpression(t,i){this.addChild(t),this.addChild(i)}toString(){return`(${this.children.map(t=>t.toString()).join(" ")})`}};var gt=class extends yn{constructor(t,i){super(i);this.value=t;this.docSymbolsMeta={name:this.value.toString(),kind:Qb.SymbolKind.Number},this.semanticTokenType="number",this.semanticTokenModifiers="declaration"}toString(){return this.value.toString()}};var Jb=X(te()),si=class extends ${constructor(t){super();this.values=t;this.docSymbolsMeta={name:"Byte String Value",kind:Jb.SymbolKind.Array},this.values.forEach(i=>this.addChild(i))}toString(){return`[${this.values.map(t=>t.toString()).join(" ")}]`}};var Ne=class extends ${constructor(t,i){super(i);this.name=t;this.semanticTokenType="property",this.semanticTokenModifiers="declaration"}toString(){return this.name}},Le=class extends ${constructor(t,i=[]){super();this.propertyName=t;this.labels=i;this._values=void 0;this.docSymbolsMeta={name:this.propertyName?.name??"Unknown",kind:Zb.SymbolKind.Property},this.labels.forEach(r=>this.addChild(r)),this.addChild(t)}set values(t){if(this._values)throw new Error("Only one property name is allowed");this._values=t,this.addChild(t)}get values(){return this._values}get quickValues(){return this.values?.values.map(t=>t?t.value instanceof mt?t.value.value:t.value instanceof Ye?t.value.values.map(i=>i.value instanceof gt?i.value.value:NaN):t.value instanceof si?t.value.values.map(i=>i.value?.value??NaN):NaN:null)}toString(){return`${this.propertyName?.toString()??"__UNSET__"}${this._values?.values.length?` = ${this._values.values.map(t=>t?.toString()??"NULL").join(", ")}`:""};`}};var eT=X(te()),bn=class extends ${constructor(t,i){super();this.keyword=i;this.addChild(i),this.docSymbolsMeta={name:t,kind:eT.SymbolKind.Function}}};var Yt=class extends bn{constructor(t){super("Delete Node",t);this._nodeNameOrRef=null}set nodeNameOrRef(t){if(this._nodeNameOrRef)throw new Error("Only one property name is allowed");this._nodeNameOrRef=t,this.addChild(t)}get nodeNameOrRef(){return this._nodeNameOrRef}};var Ce=class extends bn{constructor(t){super("Delete Property",t);this._propertyName=null}set propertyName(t){if(this._propertyName)throw new Error("Only only property name is allowed");this._propertyName=t,this.addChild(t)}get propertyName(){return this._propertyName}};var xe=class n extends ${constructor(){super()}get path(){if(!this.pathName)return["__UNDEFINED__"];if(!this.parentNode||this instanceof Mt)return[this.pathName];if(!(this.parentNode instanceof n))return;let e=this.parentNode.path;return e?[...e,this.pathName]:[this.pathName]}get pathName(){}get nodes(){return this.children.filter(e=>e instanceof n)}get deleteNodes(){return this.children.filter(e=>e instanceof Yt)}addNodeChild(e){this.addChild(e)}insertIncludeAt(e,t){this.insertAt(e,t)}},Mt=class extends xe{constructor(){super(),this.docSymbolsMeta={name:"/",kind:Er.SymbolKind.Class}}get properties(){return this.children.filter(e=>e instanceof Le)}get deleteProperties(){return this.children.filter(e=>e instanceof Ce)}get nodes(){return this.children.filter(e=>e instanceof he)}get pathName(){return"/"}},et=class extends xe{constructor(t=[]){super();this.labels=t;this._labelReference=null;this.docSymbolsMeta={name:"DTC Name",kind:Er.SymbolKind.Namespace},t.forEach(i=>{super.addChild(i)})}set labelReference(t){if(this._labelReference)throw new Error("Only on label reference is allowed");this._labelReference=t,this.docSymbolsMeta={name:this.labelReference?.value??"DTC Name",kind:Er.SymbolKind.Namespace},this.addChild(t)}get path(){return this.resolveNodePath?this.resolveNodePath:super.path}get labelReference(){return this._labelReference}get nodes(){return this.children.filter(t=>t instanceof he)}get pathName(){return this.labelReference?.label?`&${this.labelReference?.label?.value}`:void 0}get properties(){return this.children.filter(t=>t instanceof Le)}get deleteProperties(){return this.children.filter(t=>t instanceof Ce)}},he=class n extends xe{constructor(t=[],i){super();this.labels=t;this.omitIfNoRef=i;this._name=null;this.docSymbolsMeta={name:"DTC Name",kind:Er.SymbolKind.Constructor},i&&this.addChild(i),t.forEach(r=>{this.addChild(r)})}set name(t){if(this._name)throw new Error("Only on label reference is allowed");this._name=t,this.docSymbolsMeta={name:this._name?.toString()??"DTC Name",kind:Er.SymbolKind.Constructor},this.addChild(t)}get name(){return this._name}get nodes(){return this.children.filter(t=>t instanceof n)}get pathName(){return this._name?.toString()}get properties(){return this.children.filter(t=>t instanceof Le)}get deleteProperties(){return this.children.filter(t=>t instanceof Ce)}},we=class extends ${constructor(t,i,r){super(i);this.name=t;this.address=r;this.semanticTokenType="variable",this.semanticTokenModifiers="declaration"}get value(){return this.name}toString(){return this.address!==void 0?`${this.name}@${this.address.toString(16)}`:this.name}buildSemanticTokens(t){if(!this.tokenIndexes?.start||!this.tokenIndexes.start.value)return;let i={...this.tokenIndexes.start,pos:{...this.tokenIndexes.start.pos,len:this.name.length}};if(t(ti("type"),ni("declaration"),{start:i,end:i}),this.address!==void 0){let r={...this.tokenIndexes.start,pos:{line:this.tokenIndexes.start.pos.line,col:this.tokenIndexes.start.pos.col+this.name.length+1,len:this.tokenIndexes.start.pos.len-this.name.length-1}},s={...this.tokenIndexes.start,pos:{line:this.tokenIndexes.start.pos.line,col:this.name.length+2,len:1}};t(ti("decorator"),ni("declaration"),{start:s,end:s}),t(ti("number"),ni("declaration"),{start:r,end:r})}}};var tT=X(te()),pe=class extends ${constructor(t){super();this.label=t;this.docSymbolsMeta={name:`&${this.label?.value??"NULL"}`,kind:tT.SymbolKind.Key},this.addChild(t)}get value(){return this.label?.value}toString(){return`&${this.label?.value??"NULL"}`}};var vn=X(te());var ot=n=>n instanceof bn?!0:n instanceof xe?!1:n.parentNode?ot(n.parentNode):!1;var sc=n=>[...n.filter(t=>t instanceof he||t instanceof et).map(t=>t instanceof he?t.name:t.labelReference)].filter(t=>!!t);var kt=X(te());var nT=X(te());var Mn=class extends ${constructor(){super();this._pathParts=[]}addPath(t,i){this._pathParts.push(t),i&&this.addChild(i),this.addChild(t)}get pathParts(){return[...this._pathParts]}toString(){return this._pathParts.map(t=>t?.toString()??"<NULL>").join("/")}},sn=class extends ${constructor(t){super();this.path=t;this.docSymbolsMeta={name:`/${this.path?.toString()??""}`,kind:nT.SymbolKind.Namespace},this.semanticTokenType="variable",this.semanticTokenModifiers="declaration",this.addChild(t)}toString(){return`&${this.path?.toString()??"NULL"}`}};var K=class{constructor(e,t,i="optional",r=void 0,s=[],o){this.name=e;this.type=t;this.def=r;this.additionalTypeCheck=o;this.hideAutoComplete=!1;this.list=!1;this.onHover=()=>({kind:kt.MarkupKind.Markdown,value:[...this.desctiption?["### Desctiption",this.desctiption.join(`

`)]:[],...this.examples?["### Example",this.examples.join(`

`)]:[]].join(`
`)});typeof i!="function"?this.required=()=>i:this.required=i,typeof s!="function"?this.values=()=>r&&s.indexOf(r)===-1?[r,...s]:s:this.values=s}getNameMatch(e){return typeof this.name=="string"?this.name===e:this.name(e)}validateProperty(e,t,i,r){let s=this.required(t);if(r){if(s==="omitted")return[A(12,r.ast,kt.DiagnosticSeverity.Error,void 0,[],[i])]}else{if(s==="required"){let l=e.getOrderedNodeAst(t),u=sc(l);return[A(0,u[0],kt.DiagnosticSeverity.Error,u.slice(1),[],[i])]}return[]}let o=P_(r),a=[],c=(l,u,d)=>{if(l.some(g=>g===8))return[];if(d??=r.ast,!(l.some(g=>g==u)||l.some(g=>g==5)&&(u===3||u===5)||l.some(g=>g==4)&&(u===1||u===2))){let g=[];l.forEach(_=>{switch(_){case 0:g.push(1);break;case 3:g.push(2);break;case 5:g.push(3);break;case 1:g.push(5);break;case 2:g.push(6);break;case 4:g.push(7);break}}),g.length&&a.push(A(g,d,kt.DiagnosticSeverity.Error,[],[],[r.name]))}};if(this.type.length>1){let l=this.type;!this.list&&this.type.length!==o.length?a.push(A(4,r.ast.values??r.ast,kt.DiagnosticSeverity.Error,[],[],[i,this.type.length.toString()])):o.forEach((u,d)=>{l[0].types.every(p=>p!==u)&&a.push(A(3,r.ast.values?.values[d]??r.ast))})}else if(this.type[0].types.some(l=>l===5)?o.some(l=>c([5],l,r.ast.values?.values[0]?.value)):this.list||this.type.length===1&&this.type[0].types.filter(l=>l!==0).every(l=>l===4)?o.some(l=>c(this.type[0].types,l,r.ast.values?.values[0]?.value)):o.length>1&&this.type[0].types.some(l=>l!==0)?a.push(A(8,r.ast.propertyName??r.ast,kt.DiagnosticSeverity.Error,(r.ast.values?.values.slice(1)??[]).filter(l=>!!l),[],[r.name])):o.length===1&&c(this.type[0].types,o[0],r.ast.values?.values[0]?.value),a.length===0&&(a.push(...this.additionalTypeCheck?.(r)??[]),this.values(r).length&&this.type[0].types.some(l=>l===3))){let l=r.ast.values?.values[0]?.value;this.values(r).some(u=>l.value===u)||a.push(A(9,r.ast.values?.values[0]?.value??r.ast,kt.DiagnosticSeverity.Error,[],[],[this.values(r).map(u=>`'${u}'`).join(" or ")]))}return a}validate(e,t){if(typeof this.name=="string"){let r=t.getProperty(this.name);return this.validateProperty(e,t,this.name,r)}return t.properties.filter(r=>this.getNameMatch(r.name)).flatMap(r=>this.validateProperty(e,t,r.name,r))}getPropertyCompletionItems(e){let t=this.type.at(e.ast.values?.values.length??0);return t?.types.some(i=>i===3)?e.ast.values?.values&&e.ast.values.values?.length>1?[]:this.values(e).map(i=>({label:`"${i}"`,kind:kt.CompletionItemKind.Variable,sortText:i===this.def?`A${i}`:`Z${i}`})):t?.types.some(i=>i===1||i===2)?this.values(e).map(i=>({label:`<${i}>`,kind:kt.CompletionItemKind.Variable,sortText:i===this.def?`A${i}`:`Z${i}`})):[]}},P_=n=>n.ast.values?n.ast.values.values.map(e=>D_(e)):[0],D_=n=>n?n.value instanceof mt?3:n.value instanceof Ye?n.value.values.length===1?1:n.value.values.length===2?2:4:n.value instanceof pe||n.value instanceof sn?1:6:7,oc=class{constructor(){this._properties=[]}getIssue(e,t){let i=[],r=t.getProperty("status"),s=r?.ast.values?.values.at(0)?.value;return s instanceof mt&&s.value==="disabled"?([...t.definitions,...t.referencedBy].forEach(o=>i.push(A(23,o,kt.DiagnosticSeverity.Hint,[...r?.ast.parentNode?[r?.ast.parentNode]:[]],[kt.DiagnosticTag.Unnecessary]))),i):[...i,...this.properties.flatMap(o=>o.validate(e,t))]}get properties(){return this._properties}addProperty(e){Array.isArray(e)?e.forEach(t=>this._properties.push(t)):this._properties.push(e),this._properties.sort(t=>typeof t.name=="string"?1:0)}get childNodeType(){return this._childNodeType}set childNodeType(e){e&&(e.bindingsPath=this.bindingsPath,this._childNodeType=e)}getOnPropertyHover(e){let t=this.properties.find(i=>i.getNameMatch(e));return t?.onHover.bind(t)()}};var Tn=class extends ${constructor(t,i){super();this.value=t;this.endLabels=i;this.addChild(t),this.endLabels.forEach(r=>{this.addChild(r)})}toString(){return`${[this.value?.toString()??"NULL",...this.endLabels.map(t=>t.toString())].join(" ")}`}};var Et=n=>{if(!n?.values.some(e=>!(e?.value instanceof Ye)))return n?.values.flatMap(e=>e.value.values.map(t=>t.value))??[]},_e=(n,e,t)=>{let i=n.ast.values?.values.at(e)?.value;if(i instanceof Ye){let r=i.values.at(t);if(r?.value instanceof gt)return r.value.value}},on=(n,e,t=0)=>{if(n instanceof Tn){if(n?.value instanceof Ye){let i=n.value.values.at(t);if(i?.value instanceof gt)return e.getPhandle(i.value.value);if(i?.value instanceof pe)return i.value.linksTo;if(i?.value instanceof sn)return i.value.path?.pathParts.at(-1)?.linksTo}}else{if(n instanceof gt)return e.getPhandle(n.value);if(n instanceof pe)return n.linksTo;if(n instanceof sn)return n.path?.pathParts.at(-1)?.linksTo}},iT=n=>{let e=n.getProperty("#interrupt-cells"),t=e?.ast.values?.values.at(0)?.value;if(t instanceof Ye){let i=t.values.at(0)?.value;if(i instanceof gt)return{cellsProperty:e,node:n,value:i.value}}return{cellsProperty:e,node:n}},V=n=>Array.isArray(n)?[{types:n}]:[{types:[n]}];var rT=()=>{let n=new K("compatible",V(5));return n.desctiption=["The compatible property value consists of one or more strings that define the specific programming model for the device. This list of strings should be used by a client program for device driver selection. The property value consists of a concatenated list of null terminated strings, from most specific to most general. They allow a device to express its compatibility with a family of similar devices, potentially allowing a single device driver to match against several devices.",'The recommended format is "manufacturer, model", where manufacturer is a string describing the name of the manufacturer (such as a stock ticker symbol), and model specifies the model number.',"The compatible string should consist only of lowercase letters, digits and dashes, and should start with a letter. A single comma is typically only used following a vendor prefix. Underscores should not be used."],n.examples=['```devicetree\ncompatible = "fsl,mpc8641", "ns16550";\n```',"In this example, an operating system would first try to locate a device driver that supported fsl, mpc8641. If a driver was not found, it would then try to locate a driver that supported the more general ns 16550 device type."],n};var Zf=X(te()),sT=()=>{let n=new K("device_type",V(3),e=>e.name==="cpu"||e.name==="memory"?"optional":"omitted",void 0,e=>e.parent.name==="cpu"||e.parent.name==="memory"?[e.parent.name]:[],e=>{if(e.parent.name==="cpu"||e.parent.name==="memory"){let t=e.ast.values?.values.at(0)?.value;if(t instanceof mt&&t.value!==e.parent.name)return e.parent.name==="cpu"?[A(13,e.ast,Zf.DiagnosticSeverity.Error,[],[],[e.name])]:[A(14,e.ast,Zf.DiagnosticSeverity.Error,[],[],[e.name])]}return[]});return n.desctiption=["The device_type property was used in IEEE 1275 to describe the device's FCode programming model. Because DTSpec does not have FCode, new use of the property is deprecated, and it should be included only on cpu and memory nodes for compatibility with IEEE 1275-derived devicetrees."],n};var oT=()=>{let n=new K("#interrupt-cells",V(1));return n.desctiption=["The #interrupt-cells property defines the number of cells required to encode an interrupt specifier for an interrupt domain."],n};var aT=()=>{let n=new K("interrupt-controller",V(0),"optional");return n.desctiption=["The presence of an interrupt-controller property defines a node as an interrupt controller node."],n};var cT=()=>{let n=new K("interrupt-parent",V(1));return n.desctiption=["Because the hierarchy of the nodes in the interrupt tree might not match the devicetree, the interrupt-parent property is available to make the definition of an interrupt parent explicit. The value is the phandle to the interrupt parent. If this property is missing from a device, its interrupt parent is assumed to be its devicetree parent."],n};var lT=X(te()),uT=()=>{let n=new K("interrupts",V(4),"optional",void 0,[],e=>{let t=[],i=e.parent,r=i.getProperty("interrupt-parent"),s=i.root;return(r?on(r?.ast.values?.values.at(0),s):i.parent)?t:r?(t.push(A(19,r.ast.values?.values.at(0)?.value??r.ast)),t):(t.push(A(17,e.ast,lT.DiagnosticSeverity.Error,[...e.parent.nodeNameOrLabelRef],[],[e.name,"interrupt-parent",`/${e.parent.path.slice(1).join("/")}`])),t)});return n.desctiption=["The interrupts property of a device node defines the interrupt or interrupts that are generated by the device.The value of the interrupts property consists of an arbitrary number of interrupt specifiers. The format of an interrupt specifier is defined by the binding of the interrupt domain root.","interrupts is overridden by the interrupts-extended property and normally only one or the other should be used."],n.examples=["A common definition of an interrupt specifier in an open PIC-compatible interrupt domain consists of two cells; an interrupt number and level/sense information. See the following example, which defines a single interrupt specifier, with an interrupt number of OxA and level/sense encoding of 8.","```devicetree\ninterrupts = <0xA 8>;\n```"],n};var Nr=X(te()),fT=()=>{let n=new K("interrupts-extended",V(4),"optional",void 0,[],e=>{let t=[],i=e.parent,r=i.getProperty("interrupts");r&&t.push(A(16,r.ast,Nr.DiagnosticSeverity.Warning,[e.ast],[],[r.name,"is ignored when 'interrupts-extended' is used"]));let s=i.getProperty("interrupt-parent");s&&t.push(A(16,s.ast,Nr.DiagnosticSeverity.Warning,[e.ast],[],[s.name,"is ignored when 'interrupts-extended' is used "]));let o=i.root,a=Et(e.ast.values);if(!a?.length)return[];let c=0;for(;c<a.length;){let l=on(a[c],o);if(!l)return t.push(A(19,a[c],Nr.DiagnosticSeverity.Error)),t;let u=iT(l);if(!u.cellsProperty)return t.push(A(17,e.ast,Nr.DiagnosticSeverity.Error,[...u.node.nodeNameOrLabelRef],[],[e.name,"#interrupt-cells",`/${u.node.path.slice(1).join("/")}`])),t;let d=a.length-c-1;if(u.value==null)return t;if(u.value!=null&&u.value>d)return t.push(A(18,a[c],Nr.DiagnosticSeverity.Error,[u.cellsProperty.ast],[],[e.name,u.value.toString()])),t;c+=u.value+1}return t});return n.desctiption=["The interrupts-extended property lists the interrupts) generated by a device. interrupts-extended should be used instead of interrupts when a device is connected to multiple interrupt controllers as it encodes a parent phandle with each interrupt specifier.","The interrupts and interrupts-extended properties are mutually exclusive. A device node should use one or the other, but not both. Using both is only permissible when required for compatibility with software that does not understand interrupts-extended. If both interrupts-extended and interrupts are present then interrupts-extended takes precedence."],n.examples=["This example shows how a device with two interrupt outputs connected to two separate interrupt controllers would describe the connection using an interrupts-extended property. pic is an interrupt controller with an #interrupt-cells specifier of 2, while gic is an interrupt controller with an #interrupts-cells specifier of 1.","```devicetree\ninterrupts-extended = <&pic OXA 8>, <&gic Oxda>;\n```"],n};var dT=()=>{let n=new K("dma-noncoherent",V(0));return n.desctiption=["For architectures which are by default coherent for 1/O, the dma-noncoherent property is used to indicate a device is not capable of coherent DMA operations. Some architectures have non-coherent DMA by default and this property is not applicable."],n};var hT=()=>{let n=new K("dma-coherent",V(0));return n.desctiption=["For architectures which are by default non-coherent for I/O, the dma-coherent property is used to indicate a device is capable of coherent DMA operations. Some architectures have coherent DMA by default and this property is not applicable."],n};var pT=X(te()),mT=()=>{let n=new K("dma-ranges",V([0,4]),"optional",void 0,[],e=>{let t=[],i=Et(e.ast.values);if(!i?.length)return[];let r=e.parent?.getProperty("#size-cells"),s=e.parent?.getProperty("#address-cells"),o=e.parent.parent?.getProperty("#address-cells"),a=r?_e(r,0,0)??1:1,c=s?_e(s,0,0)??2:2,l=o?_e(o,0,0)??2:2;return i.length%(c+l+a)!==0&&t.push(A(21,i[i.length-i.length%(c+l+a)],pT.DiagnosticSeverity.Error,[],[],[e.name,`<${[...Array.from({length:c},()=>"child-bus-address"),...Array.from({length:l},()=>"parent-bus-address"),...Array.from({length:l},()=>"length")].join(" ")}>`])),t});return n.desctiption=["The dma-ranges property is used to describe the direct memory access (DMA) structure of a memory-mapped bus whose devicetree parent can be accessed from DMA operations originating from the bus. It provides a means of defining a mapping or translation between the physical address space of the bus and the physical address space of the parent of the bus.","The format of the value of the dma-ranges property is an arbitrary number of triplets of (child-bus-address, parent-bus-address, length). Each triplet specified describes a contiguous DMA address range.","- The child-bus-address is a physical address within the child bus' address space. The number of cells to represent the address depends on the bus and can be determined from the #address-cells of this node (the node in which the dma-ranges property appears).","- The parent-bus-address is a physical address within the parent bus' address space. The number of cells to represent the parent address is bus dependent and can be determined from the #address-cells property of the node that defines the parent's address space.","- The length specifies the size of the range in the child's address space. The number of cells to represent the size can be determined from the #size-cells of this node (the node in which the dma-ranges property appears)."],n};var gT=X(te()),yT=()=>{let n=new K("ranges",V([0,4]),"optional",void 0,[],e=>{let t=[],i=Et(e.ast.values);if(!i?.length)return[];let r=e.parent?.getProperty("#size-cells"),s=e.parent?.getProperty("#address-cells"),o=e.parent.parent?.getProperty("#address-cells"),a=r?_e(r,0,0)??1:1,c=s?_e(s,0,0)??2:2,l=o?_e(o,0,0)??2:2;return i.length%(c+l+a)!==0&&t.push(A(21,i[i.length-i.length%(c+l+a)],gT.DiagnosticSeverity.Error,[],[],[e.name,`<${[...Array.from({length:c},()=>"child-bus-address"),...Array.from({length:l},()=>"parent-bus-address"),...Array.from({length:l},()=>"length")].join(" ")}>`])),t});return n.desctiption=["The ranges property provides a means of defining a mapping or translation between the address space of the bus (the child address space) and the address space of the bus node's parent (the parent address space).","The format of the value of the ranges property is an arbitrary number of triplets of (child-bus-address, parent-bus-address, length)","- The child-bus-address is a physical address within the child bus' address space. The number of cells to represent the address is bus dependent and can be determined from the #address-cells of this node (the node in which the ranges property appears).","- The parent-bus-address is a physical address within the parent bus' address space. The number of cells to represent the parent address is bus dependent and can be determined from the #address-cells property of the node that defines the parent's address space.","- The length specifies the size of the range in the child's address space. The number of cells to represent the size can be determined from the #size-cells of this node (the node in which the ranges property appears).","If the property is defined with an < empty> value, it specifies that the parent and child address space is identical, and no address translation is required.","If the property is not present in a bus node, it is assumed that no mapping exists between children of the node and the parent address space."],n.examples=["Address Translation Example:",["```devicetree",`soc {
	compatible = "simple-bus";
	#address-cells = <1>;
	#size-cells = <1>;
	ranges = <0x0 0xe0000000 0x00100000>;
		serial@4600 {
		device_type = "serial";
		compatible = "ns16550";
		reg = <0x4600 0x100>;
		clock-frequency = <0>;
		interrupts = <0xA 0x8>;
		interrupt-parent = <&ipic>;
	};
};`,"```"].join(`
`),"The soc node specifies a ranges property of",["```devicetree","<Ox0 Oxe0000000 0x00100000>;","```"].join(`
`),"This property value specifies that for a 1024 KB range of address space, a child node addressed at physical OxO maps to a parent address of physical 0xe0000000. With this mapping, the serial device node can be addressed by a load or store at address 0xe0004600, an offset of 0x4600 (specified in reg) plus the 0xe0000000 mapping specified in ranges."],n};var bT=()=>{let n=new K("virtual-reg",V(1));return n.desctiption=["The virtual-res property specifies an effective address that maps to the first physical address specified in the reg property of the device node. This property enables boot programs to provide client programs with virtual-to-physical mappings that have been set up."],n};var ed=X(te()),TT=()=>{let n=new K("reg",V(4),e=>e.address!==void 0?"required":"omitted",void 0,[],e=>{let t=[],i=Et(e.ast.values);if(!i?.length)return[];let r=e.parent.parent?.getProperty("#size-cells"),s=e.parent.parent?.getProperty("#address-cells"),o=r?_e(r,0,0)??1:1,a=s?_e(s,0,0)??2:2;if(i.length%(o+a)!==0)return t.push(A(21,i[i.length-i.length%(o+a)],ed.DiagnosticSeverity.Error,[],[],[e.name,`<${[...Array.from({length:a},()=>"address"),...Array.from({length:o},()=>"cell")].join(" ")}>`])),t;for(let c=0;c<i.length;c+=o+a){let l=new ArrayBuffer(a*4),u=new DataView(l);i.slice(0,a).map((d,p)=>_e(e,0,p)??0).forEach((d,p)=>{u.setUint32(p*4,d)}),e.parent.address&&(a===2&&u.getBigUint64(0)!==BigInt(e.parent.address)||a===1&&u.getUint32(0)!==e.parent.address)&&t.push(A(11,e.ast,ed.DiagnosticSeverity.Error,[],[],[e.name]))}return t});return n.desctiption=["The reg property describes the address of the device's resources within the address space defined by its parent bus. Most commonly this means the offsets and lengths of memory-mapped IO register blocks, but may have a different meaning on some bus types. Addresses in the address space defined by the root node are CPU real addresses.","The value is a <prop-encoded-array>, composed of an arbitrary number of pairs of address and length, <ad-dress length>. The number of <u32> cells required to specify the address and length are bus-specific and are specified by the #address-cells and #size-cells properties in the parent of the device node. If the parent node specifies a value of 0 for #size-cells, the length field in the value of reg shall be omitted."],n.examples=["Suppose a device within a system-on-a-chip had two blocks of registers, a 32-byte block at offset 0x3000 in the SOC and a 256-byte block at offset OxFE00. The reg property would be encoded as follows (assuming #address-cells and #size-cells values of 1):","```devicetree\nreg = <0x3000 0x20 0xFE00 0x100>;\n```"],n};var vT=()=>new K("#size-cells",V(1),"optional",1);var ST=()=>{let n=new K("#address-cells",V(1),"optional",2);return n.desctiption=["The #address-cells and #size-cells properties may be used in any device node that has children in the devicetree hierarchy and describes how child device nodes should be addressed. The #address-cells property defines the number of <u32> cells used to encode the address field in a child node's reg property. The #size-cells property defines the number of <u32 > cells used to encode the size field in a child node's reg property.","The #address-cells and #size-cells properties are not inherited from ancestors in the devicetree. They shall be explicitly defined.","A DTSpec-compliant boot program shall supply #address-cells and #size-cells on all nodes that have children.","If missing, a client program should assume a default value of 2 for #address-cells, and a value of 1 for #size-cells."],n.examples=["See the following devicetree excerpt:",["```devicetree",`SOC {
	#address-cells = <1>;
		#size-cells = <1>;
		serial@4600 {
		compatible = "ns16550";
		reg = <0x4600 0x100>;
		clock-frequency = <0>;
		interrupts = <0xA 0x8>;
		interrupt-parent = <&ipic>;
	};
};`,"```"].join(`
`),"In this example, the #address-cells and #size-cells properties of the soc node are both set to 1. This setting specifies that one cell is required to represent an address and one cell is required to represent the size of nodes that are children of this node.","The serial device reg property necessarily follows this specification set in the parent (soc) node\u2014 the address is represented by a single cell (0x4600), and the size is represented by a single cell (0x100)."],n};var kT=()=>{let n=new K("status",V(3),"optional","okay",["okay","disabled","reserved","fail","fail-sss"]);return n.desctiption=[`The status property indicates the operational status of a device.
   The lack of a status property should betreated as if the property existed with the value of "okay"`],n};var ET=X(te()),NT=()=>{let n=new K("phandle",V(1),"optional",void 0,[],e=>{let t=_e(e,0,0);if(t){let i=e.parent.root.getAllPhandle(t);if(i.length>1&&i.at(-1)===e.parent)return[A(20,e.ast.values?.values.at(0)??e.ast,ET.DiagnosticSeverity.Error,i.slice(0,-1).flatMap(r=>r.getProperty("phandle")?.ast).filter(r=>!!r),[],[e.name])]}return[]});return n.desctiption=["The phandle property specifies a numerical identifier for a node that is unique within the devicetree. The phandle property value is used by other nodes that need to refer to the node associated with the property."],n.examples=["See the following devicetree excerpt:",["```devicetree",`pic@10000000 {
	phandle = <1>;
	interrupt-controller;
	reg = <0x10000000 0x100>;
};`,"```"].join(`
`),"A phandle value of 1 is defined. Another device node could reference the pic node with a phandle value of 1:",["```devicetree",`another-device-node {
	interrupt-parent = <1>;
};`,"```"].join(`
`)],n};var wT=()=>{let n=new K("model",V(3));return n.desctiption=["The model property value is a <string> that specifies the manufacturer's model number of the device.",'The recommended format is: "manufacturer, model" , where manufacturer is a string describing the name of the manufacturer (such as a stock ticker symbol), and model specifies the model number.'],n.examples=['```devicetree\nmodel = "{sl, MPC8349EMITX" ;\n```'],n};var ac=X(te()),_T=()=>{let n=new K("name",V(3),"optional",void 0,[],e=>[A(15,e.ast,ac.DiagnosticSeverity.Warning,[],[ac.DiagnosticTag.Deprecated],[e.name])]);return n.hideAutoComplete=!0,n};var oi=X(te());var PT=()=>{let n=new K("interrupt-map",V(4),"optional",void 0,[],e=>{let t=[],i=e.parent,r=e.parent.root,s=Et(e.ast.values);if(!s?.length)return[];let o=i.getProperty("#address-cells"),a=i.getProperty("#interrupt-cells");if(o||t.push(A(17,e.ast,oi.DiagnosticSeverity.Error,[...i.nodeNameOrLabelRef],[],[e.name,"#address-cells",`/${i.path.slice(1).join("/")}`])),a||t.push(A(17,e.ast,oi.DiagnosticSeverity.Error,[...i.nodeNameOrLabelRef],[],[e.name,"#interrupt-cells",`/${i.path.slice(1).join("/")}`])),t.length)return t;let c=0;for(;c<s.length;){let l=_e(o,0,0),u=_e(a,0,0);if(l==null||u==null)return t;let d=0;if(c+=l+u,s.length<c+1){let R=l+u+1;t.push(A(22,s[s.length-1],oi.DiagnosticSeverity.Error,[],[],[e.name,`after the last value of ${[...Array.from({length:l},()=>"ChildAddress"),...Array.from({length:u},()=>"ChildInterruptSpecifier"),"InterruptParent ParentUnitAddress... ParentInterruptSpecifier..."].slice((s.length-d)%R===0?R:(s.length-d)%R).join(" ")}`]));break}let p=on(s[c],r);if(!p){t.push(A(19,s[c],oi.DiagnosticSeverity.Error));break}let g=p.getProperty("#address-cells"),_=p.getProperty("#interrupt-cells");if(g||t.push(A(17,s[c],oi.DiagnosticSeverity.Error,[...p.nodeNameOrLabelRef],[],[e.name,"#address-cells",`/${i.path.slice(1).join("/")}`])),_||t.push(A(17,s[c],oi.DiagnosticSeverity.Error,[...p.nodeNameOrLabelRef],[],[e.name,"#interrupt-cells",`/${i.path.slice(1).join("/")}`])),t.length)break;c++;let b=_e(g,0,0),N=_e(_,0,0);if(b==null||N==null)break;if(c+=b+N,s.length<c){let R=l+u+1+b+N;t.push(A(22,s[s.length-1],oi.DiagnosticSeverity.Error,[],[],[e.name,`after the last value of ${[...Array.from({length:l},()=>"ChildAddress"),...Array.from({length:u},()=>"ChildInterruptSpecifier"),"InterruptParent",...Array.from({length:b},()=>"ParentUnitAddress"),...Array.from({length:N},()=>"ParentInterruptSpecifier")].slice((s.length-d)%R===0?R:(s.length-d)%R).join(" ")}`]));break}d=c}if(!e.ast.values)return[];for(let l=0;l<e.ast.values.values.length;l++){let u=e.ast.values.values.at(l);if(!u)continue;if(t.length)return t;let d=_e(o,0,0),p=_e(a,0,0);if(d==null||p==null||!(u.value instanceof Ye))return t}return t});return n.desctiption=["An interrupt-map is a property on a nexus node that bridges one interrupt domain with a set of parent interrupt domains and specifies how interrupt specifiers in the child domain are mapped to their respective parent domains.","The interrupt map is a table where each row is a mapping entry consisting of five components: child unit address, child interrupt specifier, interrupt-parent, parent unit address, parent interrupt specifier.","- child unit address: The unit address of the child node being mapped. The number of 32-bit cells required to specify this is described by the #address-cells property of the bus node on which the child is located.","- child interrupt specifier: The interrupt specifier of the child node being mapped. The number of 32-bit cells required to specify this component is described by the #interrupt-cells property of this node-the nexus node containing the interrupt-map property.","- interrupt-parent: A single <phandle > value that points to the interrupt parent to which the child domain is being mapped.","- parent unit address: The unit address in the domain of the interrupt parent. The number of 32-bit cells required to specify this address is described by the #address-cells property of the node pointed to by the interrupt-parent field.","- parent interrupt specifier: The interrupt specifier in the parent domain. The number of 32-bit cells required to specify this component is described by the #interrupt-cells property of the node pointed to by the interrupt-parent field.","Lookups are performed on the interrupt mapping table by matching a unit-address/interrupt specifier pair against the child components in the interrupt-map. Because some fields in the unit interrupt specifier may not be relevant, a mask is applied before the lookup is done. This mask is defined in the interrupt-map-mask property","Note: Both the child node and the interrupt parent node are required to have #address-cells and #interrupt-cells properties defined. If a unit address component is not required ,#address-cells shall be explicitly defined to be zero."],n};var DT=()=>{let n=new K("interrupt-map-mask",V(4));return n.desctiption=["An interrupt-map-mask property is specified for a nexus node in the interrupt tree. This property specifies a mask that is ANDed with the incoming unit interrupt specifier being looked up in the table specified in the interrupt-mapproperty."],n};var wr=X(te()),RT=()=>{let n=new K(e=>e.startsWith("interrupt-")?!1:!!e.match(/^[A-Z-a-z]+-map$/),V(4),"optional",void 0,[],e=>{let t=e.name.split("-map",1)[0],i=[],r=e.parent,s=e.parent.root,o=r.getProperty(`#${t}-cells`);if(!o)return i.push(A(17,e.ast,wr.DiagnosticSeverity.Error,[...r.nodeNameOrLabelRef],[],[e.name,`#${t}-cells`,`/${r.path.slice(1).join("/")}`])),i;let a=_e(o,0,0);if(a==null)return i;let c=Et(e.ast.values);if(!c?.length)return[];let l=0,u=0;for(;l<c.length;){if(l+=a,c.length<l+1){let _=a+1;i.push(A(22,c[c.length-1],wr.DiagnosticSeverity.Error,[],[],[e.name,`after the last value of ${[...Array.from({length:a},()=>"ChildSpecifier"),"SpecifierParent ParentSpecifier..."].slice((c.length-u)%_===0?_:(c.length-u)%_).join(" ")}`]));break}let d=on(c[l],s);if(!d){i.push(A(19,c[l],wr.DiagnosticSeverity.Error));break}let p=d.getProperty(`#${t}-cells`);if(!p)return i.push(A(17,c[l],wr.DiagnosticSeverity.Error,[...d.nodeNameOrLabelRef],[],[e.name,`#${t}-cells`,`/${r.path.slice(1).join("/")}`])),i;l++;let g=_e(p,0,0);if(g==null)break;if(l+=g,c.length<l){let _=a+1+g;i.push(A(22,c[c.length-1],wr.DiagnosticSeverity.Error,[],[],[e.name,`after the last value of ${[...Array.from({length:a},()=>"ChildSpecifier"),"InterruptParent",...Array.from({length:g},()=>"ParentSpecifier")].slice((c.length-u)%_===0?_:(c.length-u)%_).join(" ")}`]));break}u=l}return i});return n.desctiption=["A `\u2039specifier>-map` is a property in a nexus node that bridges one specifier domain with a set of parent specifier domains and describes how specifiers in the child domain are mapped to their respective parent domains.","The map is a table where each row is a mapping entry consisting of three components: child specifier, specifier parent, and parent specifier.","- child specifier The specifier of the child node being mapped. The number of 32-bit cells required to specify this component is described by the `#<specifier>-cells` property of this node-the nexus node containing the \u2039specifier>-map property.","- Specifier parent A single <phandle > value that points to the specifier parent to which the child domain is being mapped.","- Parent specifier: The specifier in the parent domain. The number of 32-bit cells required to specify this component is described by the `#<specifier>-cells` property of the specifier parent node.","Lookups are performed on the mapping table by matching a specifier against the child specifier in the map. Because some fields in the specifier may not be relevant or need to be modified, a mask is applied before the lookup is done. This mask is defined in the `<specifier>-map-mask` property","Similarly, when the specifier is mapped, some fields in the unit specifier may need to be kept unmodified and passed through from the child node to the parent node. In this case, a `<specifier>-map-pass-thru` property may be specified to apply a mask to the child specifier and copy any bits that match to the parent unit specifier."],n};var CT=()=>{let n=new K(e=>e.startsWith("interrupt-")?!1:!!e.match(/^[A-Z-a-z]+-map-mask$/),V(4));return n.desctiption=["A `<specifier>-map-mask` property may be specified for a nexus node. This property specifies a mask that is ANDed with the child unit specifier being looked up in the table specified in the `<specifier>-map` property. If this propertyis notspecified, the maskis assumedto be a mask with all bits set."],n};var OT=()=>{let n=new K(e=>e.startsWith("interrupt-")?!1:!!e.match(/^[A-Z-a-z]+-map-pass-thru$/),V(4));return n.desctiption=["A `<specifier>-map-pass-thru` property may be specified for a nexus node. This property specifies a mask that is applied to the child unit specifier being looked up in the table specified in the `<specifier>-map` property. Any matching bits in the child unit specifier are copied over to the parent specifier. If this property is not specified, the mask isassumedtobe amaskwithno bits set."],n};var AT=()=>{let n=new K(e=>e.startsWith("#address-")||e.startsWith("#interrupt-")||e.startsWith("#size-")?!1:!!e.match(/^#[A-Z-a-z]+-cells$/),V(1));return n.list=!0,n.desctiption=["The `#<specifier>-cells` propertydefines the number of cells required to encode a specifier for adomain."],n};function qi(){let n=new oc;return n.addProperty([rT(),wT(),NT(),kT(),ST(),vT(),TT(),bT(),yT(),mT(),hT(),dT(),_T(),sT(),uT(),cT(),fT(),oT(),aT(),PT(),DT(),RT(),CT(),OT(),AT()]),n}var be=class{constructor(e,t,i,r=null){this.bindingLoader=e;this.name=t;this.address=i;this.parent=r;this.referencedBy=[];this.definitions=[];this._properties=[];this._deletedProperties=[];this._deletedNodes=[];this.deletes=[];this._nodes=[];this.linkedNodeNamePaths=[];this.linkedRefLabels=[];this._nodeTypes=[qi()];r?.addNode(this)}get nodeTypes(){let e=this.parent?.nodeTypes.at(0)?.childNodeType;return e?[e]:this._nodeTypes??[qi()]}get nodeType(){return this.nodeTypes.find(e=>!e.onBus||this.parent?.nodeType?.bus?.some(t=>t===e.onBus))}getReferenceBy(e){return this.referencedBy.some(t=>t===e)?this:[...this._nodes,...this._deletedNodes.map(t=>t.node)].map(t=>t.getReferenceBy(e)).find(t=>t)}get nodeNameOrLabelRef(){return sc([...this.definitions,...this.referencedBy])}getDeepestAstNode(e,t){let i=[...this.definitions,...this.referencedBy].find(r=>Mi(r,e,t));if(i){let r=this.deletes.map(c=>({item:this,ast:ii(c,e,t)})).find(c=>Mi(c.ast,e,t));if(r)return r;let s=[...this._properties.flatMap(c=>[c,...c.allReplaced]),...this._deletedProperties.flatMap(c=>[c.property,...c.property.allReplaced])].map(c=>({item:c,ast:c.ast})).find(c=>c.ast.lastToken.value===";"?Mi(c.ast,e,t):Hb(c.ast,e,t));if(s)return s.item.getDeepestAstNode(e,t);let o=[...this._nodes,...this._deletedNodes.map(c=>c.node)].map(c=>c.getDeepestAstNode(e,t)).find(c=>c);if(o)return o;let a=ii(i,e,t);return{item:this,ast:a}}}get labels(){return[...this.referencedBy.flatMap(e=>e.labels),...this.definitions.filter(e=>e instanceof he).flatMap(e=>e.labels)]}get labelsMapped(){return this.labels.map(e=>({label:e,owner:this}))}get allBindingsProperties(){return[...this.properties.filter(e=>e.name==="compatible"),...this._nodes.flatMap(e=>e.allBindingsProperties)]}get allDescendantsLabels(){return[...this.labels,...this._nodes.flatMap(e=>e.allDescendantsLabels)]}get allDescendantsLabelsMapped(){return[...this.labelsMapped,...this.properties.flatMap(e=>e.labelsMapped),...this._nodes.flatMap(e=>e.allDescendantsLabelsMapped)]}get issues(){return[...this.properties.flatMap(e=>e.issues),...this._nodes.flatMap(e=>e.issues),...this._deletedNodes.flatMap(e=>e.node.issues),...this.deletedPropertiesIssues,...this.deletedNodesIssues]}get deletedPropertiesIssues(){return[...this._deletedProperties.flatMap(e=>[{issues:[6],severity:vn.DiagnosticSeverity.Hint,astElement:e.property.ast,linkedTo:[e.by],tags:[vn.DiagnosticTag.Deprecated],templateStrings:[e.property.name]},...e.property.allReplaced.map(t=>({issues:[6],severity:vn.DiagnosticSeverity.Hint,astElement:t.ast,linkedTo:[e.by],tags:[vn.DiagnosticTag.Deprecated],templateStrings:[e.property.name]})),...e.property.issues])]}get deletedNodesIssues(){return this._deletedNodes.flatMap(e=>[...[...e.node.definitions.filter(t=>t instanceof he),...e.node.referencedBy].flatMap(t=>({issues:[7],severity:vn.DiagnosticSeverity.Hint,astElement:t,linkedTo:[e.by],tags:[vn.DiagnosticTag.Deprecated],templateStrings:[t instanceof he?t.name.toString():t.labelReference.label.value]}))])}get path(){return this.parent?[...this.parent.path,this.fullName]:[this.fullName]}get properties(){return this._properties}get deletedProperties(){return this._deletedProperties}get nodes(){return this._nodes}get deletedNodes(){return this._deletedNodes}get propertyNames(){return this._properties.map(e=>e.name)}hasNode(e,t){return this._nodes.some(i=>i.name===e&&i.address===t)}hasProperty(e){return this._properties.some(t=>t.name===e)}getProperty(e){return this._properties.find(t=>t.name===e)}deleteNode(e,t,i){let r=this._nodes.findIndex(s=>s.name===e&&i===s.address);r!==-1&&(this._deletedNodes.push({node:this._nodes[r],by:t}),this._nodes.splice(r,1))}get root(){return this.parent?this.parent.root:this}getAllPhandle(e){let t=this.getProperty("phandle")?.ast.values?.values.at(0)?.value;if(t instanceof Ye){let i=t.values[0].value;if(i instanceof gt&&i.value===e)return[this,...this._nodes.flatMap(r=>r.getAllPhandle(e))]}return this._nodes.flatMap(i=>i.getAllPhandle(e))}getPhandle(e){let t=this.getProperty("phandle")?.ast.values?.values.at(0)?.value;if(t instanceof Ye){let i=t.values[0].value;if(i instanceof gt&&i.value===e)return this}return this._nodes.flatMap(i=>i.getPhandle(e)).find(i=>!!i)}getNode(e,t,i=!0){let r=i||this._nodes.filter(o=>o.name===e).length>1,s=this._nodes.findIndex(o=>o.name===e&&(!r||o.address===t));if(s!==-1)return this._nodes[s]}deleteProperty(e,t){let i=this._properties.findIndex(r=>r.name===e);i!==-1&&(this._deletedProperties.push({property:this._properties[i],by:t}),this._properties.splice(i,1))}addNode(e){this._nodes.push(e)}addProperty(e){let t=this._properties.findIndex(i=>i.name===e.name);if(t===-1)this._properties.push(e);else{let i=this._properties.splice(t,1)[0];this._properties.push(e),e.replaces=i,i.replacedBy=e}e.name==="compatible"&&(this._nodeTypes=this.bindingLoader.getNodeTypes(this))}getChild(e,t=!0){let i=[...e];i.splice(0,1);let r=i[0].split("@"),s=r[0],o=r[1]!==void 0?Number.parseInt(r[1],16):void 0,a=this.getNode(s,o,t);return i.length===1||!a?a:a.getChild(i)}getChildFromScope(e,t){if(e.length===1&&e[0]===this.fullName)return this;if(e[0]!==this.fullName)return;let i=[...e];return i.splice(0,1),[...this._nodes,...this._deletedNodes.filter(s=>!t(s.by)).map(s=>s.node)].find(s=>s.fullName===i[0])?.getChildFromScope(i,t)}get fullName(){return this.address!==void 0?`${this.name}@${this.address.toString(16)}`:this.name}toString(){return`${this.labels.map(e=>e.toString()).join(" ")} ${this.fullName} {${this.properties.length?`
	`:""}${this.properties.map(e=>e.toString()).join(`
	`)}${this.nodes.length?`
	${this.nodes.map(e=>`${e.fullName}{ /* ... */ };`).join(`
	`)}`:""} 
};`}toMarkupContent(){return{kind:vn.MarkupKind.Markdown,value:[...this.nodeType?.description?["### Description",this.nodeType?.description]:[],"### Current State","```devicetree",this.toString(),"```"].join(`
`)}}};var lc=X(te());var td=X(te());var ai=class extends ${constructor(t,i){super(i);this.label=t;this.docSymbolsMeta={name:this.label.value,kind:td.SymbolKind.Constant},this.semanticTokenType="variable",this.semanticTokenModifiers="declaration",this.addChild(t)}toString(){return`${this.label.value}:`}},at=class extends ${constructor(t,i){super(i);this.value=t;this.docSymbolsMeta={name:this.value,kind:td.SymbolKind.Variable},this.semanticTokenType="variable",this.semanticTokenModifiers="declaration"}buildSemanticTokens(t){let i=this.parentNode;if(!(i instanceof pe&&i.linksTo)){super.buildSemanticTokens(t);return}t(ti("type"),ni("declaration"),{start:this.firstToken,end:this.lastToken})}};var Ke=class{constructor(e,t){this.ast=e;this.parent=t}getDeepestAstNode(e,t){return{item:this,ast:ii(this.ast,e,t)}}get name(){return this.ast.propertyName?.name??"[UNSET]"}get labels(){return this.ast.allDescendants.filter(e=>e instanceof ai)}get labelsMapped(){return this.labels.map(e=>({label:e,owner:this.ast.labels.some(t=>t===e)?this:null}))}get issues(){return this.replacedIssues}get replacedIssues(){return[...this.replaces?.replacedIssues??[],...this.replaces?[{issues:[0],severity:lc.DiagnosticSeverity.Hint,astElement:this.replaces.ast,linkedTo:[this.ast],tags:[lc.DiagnosticTag.Unnecessary],templateStrings:[this.name]}]:[]]}get allReplaced(){return this.replaces?[this.replaces,...this.replaces.allReplaced]:[]}toString(){return this.ast.toString()}};var xT=X(te());var LT=require("fs");var uc=class n{constructor(e){this.text=e;this.inComment=!1;this.lineNumber=0;this.columnNumber=0;this.lineNumberOfEscapedChars=0;this.numberOfEscapedCharsLastString=0;this._tokens=[];this.lines=this.text.replace(`\r
`,`
`).split(/\n/).map(t=>`${t}
`),this.lines[this.lines.length-1]=this.lines[this.lines.length-1].slice(0,-1),e.endsWith(`
`)&&this.lines.splice(-1,1),this.lexIt()}get tokens(){return this._tokens}isWhiteSpace(){return!!this.currentChar?.match(/\s/)}get endOfFile(){return this.isOnLastLine&&this.isOnLastCharOfLine}get isOnLastLine(){return this.lineNumber===this.lines.length-1}get isOnLastCharOfLine(){return this.lines[this.lineNumber].length<=this.columnNumber}moveToNextLine(){return this.isOnLastLine?!1:(this.columnNumber=0,this.lineNumberOfEscapedChars=0,this.lineNumber++,this.lines[this.lineNumber].length===0&&this.moveToNextLine(),!0)}moveOnLine(){return this.isOnLastCharOfLine?this.moveToNextLine():(this.columnNumber++,this.isOnLastCharOfLine&&this.moveToNextLine(),!0)}move(){return this.endOfFile?!1:this.moveOnLine()}get currentChar(){return this.endOfFile?null:this.lines[this.lineNumber].at(this.columnNumber)}static isSyntaxChar(e){return e==="^"||e==="~"||e==="|"||e==="!"||e==="\\"||e==="<"||e===">"||e===";"||e==="="||e==="/"||e==="{"||e==="}"||e==="["||e==="]"||e==="("||e===")"||e==="*"||e==="%"||e==="&"||e==="."||e===":"||e==="+"||e==="@"||e==="-"||e==="_"||e===","||e==="x"||e==="?"}getWord(){let e="";for(;!this.isWhiteSpace()&&(e.length&&!n.isSyntaxChar(this.currentChar)||!e.length);){if(e+=this.currentChar??"",e.length===1&&n.isSyntaxChar(this.currentChar)){this.move();break}let t=this.lineNumber;if(!this.move()||this.lineNumber!==t)return e}return e==="/"&&this.currentChar==="*"?this.inComment=!0:this.inComment&&e==="*"&&this.currentChar==="/"&&(this.inComment=!1),e}getString(e){let t=e;for(this.numberOfEscapedCharsLastString=0;this.currentChar!==e;){if(t+=this.currentChar??"",this.currentChar==="\\"){let i=this.lineNumber;if(this.move())this.lineNumberOfEscapedChars++,this.numberOfEscapedCharsLastString++,i===this.lineNumber&&(t+=this.currentChar??"");else return t}if(!this.move())return t}return this.move(),t+=e,t}lexIt(){for(;!this.endOfFile&&(this.whiteSpace(),!this.endOfFile);){let e=this.getWord();e&&this.process(e)}}process(e){let t=this.isString(e)||this.isCDefine(e)||this.isCInclude(e)||this.isCLine(e)||this.isCUndef(e)||this.isCError(e)||this.isCPragma(e)||this.isCDefined(e)||this.isCIfDef(e)||this.isCIfNDef(e)||this.isCIf(e)||this.isCElIf(e)||this.isCElse(e)||this.isCEndIf(e)||this.isCFalse(e)||this.isCTrue(e)||this.isDigit(e)||this.isHexDigit(e)||this.isLetters(e)||this.isComma(e)||this.isBitwiseNot(e)||this.isBitwiseXOr(e)||this.isBitwiseOr(e)||this.isLogicalNot(e)||this.isGtSym(e)||this.isLtSym(e)||this.isSemicolon(e)||this.isColon(e)||this.isAssignOperator(e)||this.isForwardSlash(e)||this.isRoundOpen(e)||this.isRoundClose(e)||this.isCurlyOpen(e)||this.isCurlyClose(e)||this.isSquareOpen(e)||this.isSquareClose(e)||this.isBackSlash(e)||this.isMultiplicationOperator(e)||this.isModulusOperator(e)||this.isAmpersand(e)||this.isNegateOperator(e)||this.isAddOperator(e)||this.isQuestionMark(e)||this.isPeriod(e)||this.isHash(e)||this.isUnderScore(e)||this.isAt(e)||this.unknownToken(e);if(!t)throw new Error(`Lexer is not complete!!! Could not find token for "${e}"`);let i=this._tokens.at(-1);return t&&!i?.tokens.some(r=>r===21)&&i&&i.pos.len<e.length?this.process(e.slice(i.pos.len)):!0}whiteSpace(){for(;this.isWhiteSpace();)this.move()}pushToken(e){let t=this._tokens.at(-1);e.prevToken=t,t&&(t.nextToken=e),this._tokens.push(e)}isLetters(e){let t=e.match(/^[A-Za-z]+/);return t?.[0]?(this.pushToken({tokens:[47],value:t?.[0],pos:this.generatePos(e,t?.[0])}),!0):!1}isDigit(e){let t=e.match(/^[0-9]/);return t?.[0]?(this.pushToken({tokens:[20,19],value:t[0],pos:this.generatePos(e,t[0])}),!0):!1}isHexDigit(e){let t=e.match(/^[A-Fa-f]/);return t?.[0]?(this.pushToken({tokens:[20,47],value:t[0],pos:this.generatePos(e,t[0])}),!0):!1}isCurlyOpen(e){let t="{";return e===t?(this.pushToken({tokens:[2],pos:this.generatePos(e,t),value:"{"}),!0):!1}isCurlyClose(e){let t="}";return e===t?(this.pushToken({tokens:[3],pos:this.generatePos(e,t),value:"}"}),!0):!1}isSemicolon(e){let t=";";return e===t?(this.pushToken({tokens:[1],pos:this.generatePos(e,t),value:t}),!0):!1}isColon(e){let t=":";return e===t?(this.pushToken({tokens:[50],pos:this.generatePos(e,t),value:t}),!0):!1}isHash(e){let t="#";return e.startsWith(t)?(this.pushToken({tokens:[46],pos:this.generatePos(e,t),value:t}),!0):!1}unknownToken(e){return this.pushToken({tokens:[41],pos:this.generatePos(e," "),value:e}),!0}isAssignOperator(e){let t="=";return e===t?(this.pushToken({tokens:[0],pos:this.generatePos(e,t),value:t}),!0):!1}isGtSym(e){let t=">";return e===t?(this.pushToken({tokens:[4],pos:this.generatePos(e,t),value:t}),!0):!1}isLtSym(e){let t="<";return e===t?(this.pushToken({tokens:[5],pos:this.generatePos(e,t),value:t}),!0):!1}isLogicalNot(e){let t="!";return e===t?(this.pushToken({tokens:[6],pos:this.generatePos(e,t),value:t}),!0):!1}isBitwiseOr(e){let t="|";return e===t?(this.pushToken({tokens:[8],pos:this.generatePos(e,t),value:t}),!0):!1}isBitwiseXOr(e){let t="^";return e===t?(this.pushToken({tokens:[9],pos:this.generatePos(e,t),value:t}),!0):!1}isAmpersand(e){let t="&";return e===t?(this.pushToken({tokens:[40,7],pos:this.generatePos(e,t),value:t}),!0):!1}isBitwiseNot(e){let t="~";return e===t?(this.pushToken({tokens:[10],pos:this.generatePos(e,t),value:t}),!0):!1}isRoundOpen(e){let t="(";return e===t?(this.pushToken({tokens:[42],pos:this.generatePos(e,t),value:t}),!0):!1}isRoundClose(e){let t=")";return e===t?(this.pushToken({tokens:[43],pos:this.generatePos(e,t),value:t}),!0):!1}isSquareOpen(e){let t="[";return e===t?(this.pushToken({tokens:[11],pos:this.generatePos(e,t),value:t}),!0):!1}isSquareClose(e){let t="]";return e===t?(this.pushToken({tokens:[12],pos:this.generatePos(e,t),value:t}),!0):!1}isComma(e){let t=",";return e===t?(this.pushToken({tokens:[24],pos:this.generatePos(e,t),value:t}),!0):!1}rewind(e){if(this.columnNumber+1<e.length)throw new Error("Error while rewinding");this.columnNumber-=e.length}isString(e){if(this.inComment)return!1;let t=e.match(/^["']/);if(t?.[0]){this.rewind(e.slice(1));let i=this.lineNumber,r=this.columnNumber,s=this.getString(t[0]);return this.pushToken({tokens:[21],value:s,pos:{col:r-1,line:i,len:s.length+this.numberOfEscapedCharsLastString}}),!0}return!1}isForwardSlash(e){let t="/";return e===t?(this.pushToken({tokens:[13],pos:this.generatePos(e,t),value:"/"}),!0):!1}isBackSlash(e){let t="\\";return e===t?(this.pushToken({tokens:[14],pos:this.generatePos(e,t),value:"\\"}),!0):!1}isAddOperator(e){let t="+";return e===t?(this.pushToken({tokens:[15],pos:this.generatePos(e,t),value:t}),!0):!1}isQuestionMark(e){let t="?";return e===t?(this.pushToken({tokens:[44],pos:this.generatePos(e,t),value:t}),!0):!1}isPeriod(e){let t=".";return e===t?(this.pushToken({tokens:[45],pos:this.generatePos(e,t),value:t}),!0):!1}isNegateOperator(e){let t="-";return e===t?(this.pushToken({tokens:[16],pos:this.generatePos(e,t),value:t}),!0):!1}isUnderScore(e){let t="_";return e===t?(this.pushToken({tokens:[48],pos:this.generatePos(e,t),value:t}),!0):!1}isAt(e){let t="@";return e===t?(this.pushToken({tokens:[49],pos:this.generatePos(e,t),value:t}),!0):!1}isMultiplicationOperator(e){let t="*";return e===t?(this.pushToken({tokens:[17],pos:this.generatePos(e,t),value:t}),!0):!1}isModulusOperator(e){let t="%";return e===t?(this.pushToken({tokens:[18],pos:this.generatePos(e,t),value:t}),!0):!1}isCDefine(e){let t="#define";return e.toLowerCase()===t?(this.pushToken({tokens:[25],pos:this.generatePos(e,t),value:t}),!0):!1}isCInclude(e){let t="#include";return e.toLowerCase()===t?(this.pushToken({tokens:[26],pos:this.generatePos(e,t),value:t}),!0):!1}isCLine(e){let t="#line";return e.toLowerCase()===t?(this.pushToken({tokens:[27],pos:this.generatePos(e,t),value:t}),!0):!1}isCUndef(e){let t="#undef";return e.toLowerCase()===t?(this.pushToken({tokens:[28],pos:this.generatePos(e,t),value:t}),!0):!1}isCError(e){let t="#error";return e.toLowerCase()===t?(this.pushToken({tokens:[29],pos:this.generatePos(e,t),value:t}),!0):!1}isCPragma(e){let t="#pragma";return e.toLowerCase()===t?(this.pushToken({tokens:[30],pos:this.generatePos(e,t),value:t}),!0):!1}isCDefined(e){let t="#defined";return e.toLowerCase()===t?(this.pushToken({tokens:[31],pos:this.generatePos(e,t),value:t}),!0):!1}isCIf(e){let t="#if";return e.toLowerCase()===t?(this.pushToken({tokens:[32],pos:this.generatePos(e,t),value:t}),!0):!1}isCIfDef(e){let t="#ifdef";return e.toLowerCase()===t?(this.pushToken({tokens:[33],pos:this.generatePos(e,t),value:t}),!0):!1}isCIfNDef(e){let t="#ifndef";return e.toLowerCase()===t?(this.pushToken({tokens:[34],pos:this.generatePos(e,t),value:t}),!0):!1}isCElIf(e){let t="#elif";return e.toLowerCase()===t?(this.pushToken({tokens:[35],pos:this.generatePos(e,t),value:t}),!0):!1}isCElse(e){let t="#else";return e.toLowerCase()===t?(this.pushToken({tokens:[36],pos:this.generatePos(e,t),value:t}),!0):!1}isCEndIf(e){let t="#endif";return e.toLowerCase()===t?(this.pushToken({tokens:[37],pos:this.generatePos(e,t),value:t}),!0):!1}isCTrue(e){let t="true";return e==t?(this.pushToken({tokens:[38],value:t,pos:this.generatePos(e,t)}),!0):!1}isCFalse(e){let t="false";return e==t?(this.pushToken({tokens:[39],value:t,pos:this.generatePos(e,t)}),!0):!1}generatePos(e,t){return{line:this.lineNumber,col:this.columnNumber-e.length+this.lineNumberOfEscapedChars,len:t.length}}};var IT,nd=class{constructor(){this.fileMap=new Map}renewLexer(e,t){t??=(0,LT.readFileSync)(e).toString();let i=new uc(t);return this.fileMap.set(e,i),[...i.tokens]}requestTokens(e,t){let i=this.fileMap.get(e)?.tokens;return!i&&t?[...this.renewLexer(e)]:[...i??[]]}};function ci(){return IT??=new nd,IT}var fc=class{constructor(e){this.bindingLoader=e;this.roots=[];this.references=[];this.unlinkedDeletes=[];this.unlinkedRefNodes=[];this.globalDeletes=[];this.rootNode=new be(this.bindingLoader,"/");this.labelsUsedCache=new Map}getDeepestAstNode(e,t){let i=[...this.roots,...this.references,...this.unlinkedDeletes,...this.unlinkedRefNodes,...this.globalDeletes].find(r=>Mi(r,e,t)||Yb(ci().requestTokens(e,!1),r,t));if(i instanceof et){let s=this.rootNode.getReferenceBy(i)?.getDeepestAstNode(e,t);return s?{...s,runtime:this}:{item:null,runtime:this,ast:ii(i,e,t)}}else if(i instanceof Mt&&i.path){let r=this.rootNode.getDeepestAstNode(e,t);return r?{...r,runtime:this}:void 0}else if(i)return{runtime:this,item:null,ast:ii(i,e,t)}}resolvePath(e,t){if(!e.at(0)?.startsWith("&"))return e;let i=this.labelsUsedCache.get(e[0].slice(1));return i||(t??=this.rootNode.allDescendantsLabels,t.find(s=>s.label.value===e.at(0)?.slice(1)&&s.parentNode instanceof xe)?.lastLinkedTo?.path)}get issues(){return[...this.labelIssues(),...this.rootNode.issues]}labelIssues(){let e=[],t=new Map;return this.rootNode.allDescendantsLabelsMapped.forEach(i=>{t.has(i.label.label.value)?t.get(i.label.label.value)?.push(i):t.set(i.label.label.value,[i])}),Array.from(t).forEach(i=>{let r=i[1];if(r.length>1){let s=r.find(a=>a.owner instanceof be);if(!r.every(a=>a&&a.owner===s?.owner)||!s){let a=r.filter(c=>!(c&&c.owner===s?.owner));e.push(A(4,r.at(0).label,xT.DiagnosticSeverity.Error,r.slice(1).map(c=>c.label),[],[r.at(0).label.label.value]))}}}),e}get typesIssues(){let e=t=>[...t.nodeTypes.at(0)?.getIssue(this,t)??[],...t.nodes.flatMap(i=>e(i))];return e(this.rootNode)}getOrderedNodeAst(e){return Kb([...e.definitions,...e.referencedBy])}};var tt=class extends ${constructor(e){super(e),this.semanticTokenType="keyword",this.semanticTokenModifiers="declaration"}};var MT=X(te()),dc=class extends ${constructor(t,i){super();this.values=t;this.labels=i;this.docSymbolsMeta={name:"Values",kind:MT.SymbolKind.String},this.labels.forEach(r=>{this.addChild(r)}),this.values.forEach(r=>this.addChild(r))}};var qT=X(te()),hc=class extends ${constructor(t){super();this.keyword=t;this.addChild(t),this.docSymbolsMeta={name:"DTS Douument version",kind:qT.SymbolKind.Function}}};var Sn=class extends ${constructor(t,i){super();this.value=t;this.labels=i;this.labels.forEach(r=>{this.addChild(r)}),this.addChild(this.value)}toString(){return`${this.labels.map(t=>t.toString()).join(" ")}${this.value?.toString()??"NULL"}`}};var id=X(te());var pc=class extends yn{constructor(t,i,r){super(i);this.value=t;this.docSymbolsMeta={name:`param${r+1}`,kind:id.SymbolKind.Variable},this.semanticTokenType="variable",this.semanticTokenModifiers="declaration"}},mc=class extends yn{constructor(t,i){super();this.functionName=t;this.params=i;this.addChild(t),this.params.forEach(r=>this.addChild(r))}getDocumentSymbols(){return[{name:this.functionName.name,kind:id.SymbolKind.Function,range:ne(this),selectionRange:ne(this),children:this.params.flatMap(t=>t.getDocumentSymbols())}]}toString(){return`${this.functionName.toString()}(${this.params.map(t=>t.toString()).join(",")})`}};var FT=X(te());var _r=class extends yn{constructor(t,i){super(i);this.name=t;this.docSymbolsMeta={name:this.name.toString(),kind:FT.SymbolKind.Variable},this.semanticTokenType="macro",this.semanticTokenModifiers="declaration"}toString(){return this.name}};var gc=class extends ${constructor(t,i){super(i);this.operator=t;this.semanticTokenType="operator",this.semanticTokenModifiers="declaration"}toString(){return this.operator}};var li=class{constructor(){this.positionStack=[];this.issues=[];this.childParsers=[];this.moveEndOfLine=(e,t=!0)=>{if(this.currentToken?.pos.line!==e)return;let i=this.currentToken,r=i;for(;this.currentToken?.pos.line===e;)r=this.moveToNextToken;if(t){let s=new $(z(i,r));this.issues.push(A(26,s))}return r};this.parsing=new Promise(e=>{setTimeout(()=>{this.parse().then(e)})})}reset(){this.positionStack=[],this.issues=[],this.childParsers=[]}get allParsers(){return this instanceof ui?[this,...this.childParsers.flatMap(e=>e.orderedParsers)]:this.childParsers.flatMap(e=>e.orderedParsers)}get orderedParsers(){return(this instanceof ui?[this,...this.childParsers.flatMap(e=>e.orderedParsers)]:this.childParsers.flatMap(e=>e.orderedParsers)).reverse()}get stable(){return this.parsing}get done(){return this.peekIndex()>=this.tokens.length}get moveToNextToken(){let e=this.currentToken;return this.moveStackIndex(),e}enqueueToStack(){this.positionStack.push(this.peekIndex())}popStack(){this.positionStack.pop()}mergeStack(){let e=this.positionStack.pop();if(e===void 0)throw new Error("Index out of bounds");this.positionStack[this.positionStack.length-1]=e}peekIndex(e=1){let t=this.positionStack.at(-1*e);if(t===void 0)throw new Error("Index out of bounds");return t}get currentToken(){return this.tokens.at(this.peekIndex())}get prevToken(){let e=this.peekIndex()-1;if(e!==-1)return this.tokens[e]}moveStackIndex(){if(this.positionStack[this.positionStack.length-1]===void 0)throw new Error("Index out of bounds");this.positionStack[this.positionStack.length-1]++}checkConcurrentTokens(e){this.enqueueToStack();let t=[];return e.every(i=>{let r=this.currentToken,s=i(r),o=!1;return s!=="no"&&r&&(t.push(r),this.moveToNextToken,o=ri(r,this.currentToken)),s==="yes"&&o}),this.mergeStack(),t}consumeAnyConcurrentTokens(e){this.enqueueToStack();let t=[],i,r=!0;for(;e.some(s=>s(this.currentToken)==="yes"&&r);)t.push(this.currentToken),i=this.currentToken,this.moveToNextToken,r=ri(i,this.currentToken);return this.mergeStack(),t}getDocumentSymbols(){return this.allAstItems.flatMap(e=>e.getDocumentSymbols())}buildSemanticTokens(e){let t=[],i=(r,s,o)=>{if(!o?.start||!o?.end)return;let a=o.end.pos.col-o.start.pos.col+o.end.pos.len;t.push({line:o.start.pos.line,char:o.start.pos.col,length:o.end===o.start?o.end.pos.len:a,tokenType:r,tokenModifiers:s})};this.allAstItems.forEach(r=>r.buildSemanticTokens(i)),t.sort((r,s)=>r.line===s.line?r.char-s.char:r.line-s.line).forEach(r=>e.push(r.line,r.char,r.length,r.tokenType,r.tokenModifiers))}processCIdentifier(){this.enqueueToStack();let e=this.consumeAnyConcurrentTokens([19,47,48].map(ve));if(!e.length){this.popStack();return}let t=e.map(r=>r.value).join("");if(!t.match(/^[_A-Za-z]/)){this.popStack();return}let i=new _r(t,z(e[0],e.at(-1)));return this.mergeStack(),i}isOperator(){this.enqueueToStack();let e=this.moveToNextToken;if(!e){this.popStack();return}let t=e,i;if(F(e,40)?(i="&",F(this.currentToken,40)&&(i="&&",t=this.moveToNextToken)):F(e,10)?(i="!",F(this.currentToken,0)&&(i="==",t=this.moveToNextToken)):F(e,8)?(i="|",F(this.currentToken,8)&&(i="||",t=this.moveToNextToken)):F(e,9)?i="^":F(e,4)?(i=">",F(this.currentToken,4)?(i="<<",t=this.moveToNextToken):F(this.currentToken,0)&&(i=">=",t=this.moveToNextToken)):F(e,5)?(i=">",F(this.currentToken,5)?(i=">>",t=this.moveToNextToken):F(this.currentToken,0)&&(i="<=",t=this.moveToNextToken)):F(e,15)?i="+":F(e,16)?i="-":F(e,17)?i="*":F(e,13)?i="/":F(e,18)?i="%":F(e,46)&&F(this.currentToken,46)&&(i="##",t=this.moveToNextToken),i){let r=new gc(i,z(e,t));return this.mergeStack(),r}this.popStack()}parseScopedBlock(e,t,i){this.enqueueToStack();let r=this.moveToNextToken;if(!r||!e(r)){this.popStack();return}let s=[],o=[];for(o[0]=[];!t(this.currentToken);){let l=this.moveToNextToken;if(i?.(l)&&(o[o.length]=[]),l&&(s.push(l),o[o.length-1].push(l)),e(this.currentToken)){let u=this.parseScopedBlock(e,t,i);u&&(s.push(u),o[o.length-1].push(u.startToken,...u.splitTokens.flat(),u.endToken))}}let a=this.moveToNextToken,c={startToken:r,items:s,splitTokens:o,endToken:a};return this.mergeStack(),c}getTokenIndex(e){return e?this.tokens.findIndex(t=>t===e):-1}};var Pr=class extends ${constructor(e){super(e),this.semanticTokenType="comment",this.semanticTokenModifiers="documentation"}};var bc=class n extends li{constructor(t){super();this.uri=t;this.comments=[];this.tokens=[]}cleanUpComments(){let t=[];for(let i=0;i<this.tokens.length;i++){let r=n.processBlockComments(this.tokens,i)||n.processLineComments(this.tokens,i);r&&(i=r.index,t.push(...r.tokenUsed),this.comments.push(...r.comments))}t.reverse().forEach(i=>this.tokens.splice(i,1))}get allAstItems(){return this.comments}reset(){super.reset(),this.comments=[]}reparse(){return this.reset(),this.parse()}async parse(){this.tokens=ci().requestTokens(this.uri,!0),this.cleanUpComments()}static processBlockComments(t,i){let r=[],s=()=>(r.push(i++),t[i]),o=()=>t[i],a=()=>t[i-1],c=o(),l=c;if(!c||!F(c,13)||(l=s(),!F(l,17)||c.pos.line!==l.pos.line||c.pos.col+1!==l.pos.col))return;let u=()=>!(!F(a(),17)||!F(o(),13)||!ri(a(),o())),d=l.pos.line,p=c,g=[];l=s();do{if(o()?.pos.line!==d){let b=new Pr(z(p,a()));g.push(b),d=o().pos.line??0,p=o()}l=s()}while(i<t.length&&!u());let _=new Pr(z(p,o()));return g.push(_),s(),{comments:g,tokenUsed:r,index:i-1}}static processLineComments(t,i){let r=[];if(!F(t[i],13)||t.length===i+1||!F(t[i+1],13))return;let s=[];for(;t[i].pos.line===t.at(i+1)?.pos.line;)r.push(i++);r.push(i++);let o=t[r.at(-1)],a=new Pr(z(t[r[0]],t[r.at(-1)]));return s.push(a),{comments:s,tokenUsed:r,index:i-1}}};var Tc=class extends ${constructor(t,i){super(t);this.content=i}toString(){let t=this.content.filter(i=>!F(i,14));return t.map((i,r)=>{let s=i.value;return i.pos.line===t.at(r+1)?.pos.line?s=s.padEnd(t[r+1].pos.col-i.pos.col," "):t.at(r+1)&&(s=s.padEnd(s.length+1," ")),s}).join("")}},vc=class extends ${constructor(t,i,r){super();this.keyword=t;this.identifier=i;this.content=r;this.addChild(t),this.addChild(this.identifier),this.content&&this.addChild(this.content)}get name(){return this.identifier instanceof _r?this.identifier.name:this.identifier.functionName.name}toString(){return[this.identifier.toString(),...this.content?[this.content?.toString()]:[]].join(" ")}};var BT=X(te());var Sc=class extends tt{toString(){return"..."}},kc=class extends ${constructor(t,i){super();this.functionName=t;this.params=i;this.addChild(t),this.params.forEach(r=>this.addChild(r))}getDocumentSymbols(){return[{name:this.functionName.name,kind:BT.SymbolKind.Function,range:ne(this),selectionRange:ne(this),children:this.params.flatMap(t=>t.getDocumentSymbols())}]}toString(){return`${this.functionName}(${this.params.map(t=>t.toString()).join(",")})`}};var ws=class extends ${constructor(e){super(e)}},Ec=class extends ${constructor(t,i){super();this.keyword=t;this.content=i;this.addChild(t)}},_s=class extends Ec{constructor(t,i,r){super(t,r);this.identifier=i;this.addChild(i),this.addChild(r)}useBlock(t){return this.identifier&&t.has(this.identifier.name)}},Nc=class extends _s{useBlock(e){return this.identifier&&!e.has(this.identifier.name)}},wc=class extends Ec{};var _c=class extends ${constructor(t,i,r){super();this.ifDef=t;this.endIf=i;this.elseOption=r;this.addChild(t),r&&this.addChild(r),this.addChild(i)}getInValidTokenRange(t,i){let r=[],s=a=>i.findIndex(c=>c===a);if(!this.ifDef.identifier?.name)return[{start:s(this.tokenIndexes.start),end:s(this.tokenIndexes.end)}];r.push({start:s(this.ifDef.tokenIndexes.start),end:s(this.ifDef.identifier.tokenIndexes.end)});let o=this.ifDef.useBlock(t);return!o&&this.ifDef.content&&r.push({start:s(this.ifDef.content.tokenIndexes.start),end:s(this.ifDef.content.tokenIndexes.end)}),this.elseOption&&(r.push({start:s(this.elseOption.tokenIndexes.start),end:s(this.elseOption.keyword.tokenIndexes.end)}),o&&this.elseOption.content&&r.push({start:s(this.elseOption.content.tokenIndexes.start),end:s(this.elseOption.content.tokenIndexes.end)})),this.endIf&&r.push({start:s(this.endIf.tokenIndexes.start),end:s(this.endIf.tokenIndexes.end)}),r}};var Pc=class extends li{constructor(t,i,r=new Map){super();this.uri=t;this.incudes=i;this.macros=r;this.tokens=[];this.nodes=[];this.macroSnapShot=new Map;this.commentsParser=new bc(this.uri),Array.from(r).forEach(([s,o])=>this.macroSnapShot.set(s,o))}reset(){super.reset(),this.macros.clear(),Array.from(this.macroSnapShot).forEach(([t,i])=>this.macros.set(t,i)),this.nodes=[]}async reparse(){let t=this.stable;return this.parsing=new Promise(i=>{t.then(()=>{this.reset(),this.commentsParser.reparse().then(()=>{this.parse().then(i)})})}),this.parsing}async parse(){if(await this.commentsParser.stable,this.tokens=this.commentsParser.tokens,this.positionStack.push(0),this.tokens.length!==0){for(;!this.done;)this.lineProcessor();if(this.positionStack.length!==1)throw new Error("Incorrect final stack size")}}lineProcessor(){if(this.enqueueToStack(),this.prevToken&&this.prevToken.pos.line===this.currentToken?.pos.line){this.moveEndOfLine(this.prevToken.pos.line,!1),this.mergeStack();return}let t=this.currentToken?.pos.line,i=this.processDefinitions()||this.processIfDefBlocks();t!==void 0&&this.moveEndOfLine(t,!!i),this.mergeStack()}processDefinitions(){this.enqueueToStack();let t=this.peekIndex(),i=this.moveToNextToken;if(!i||!F(i,25))return this.popStack(),!1;let r=new tt(z(i)),s=this.isFunctionDefinition()||this.processCIdentifier();if(!s)return this.issues.push(A(35,r)),this.mergeStack(),!0;let o=this.consumeDefinitionContent(),a;o.length&&(a=new Tc(z(o[0],o.at(-1)),o));let c=new vc(r,s,a);this.macros.set(c.name,c),this.nodes.push(c);let l=this.peekIndex();return this.tokens.splice(t,l-t),this.positionStack[this.positionStack.length-1]=t,this.mergeStack(),!0}consumeDefinitionContent(){let t=[],i=this.prevToken;for(;xn(i,this.currentToken)||i&&F(i,14)&&i.pos.line+1===this.currentToken?.pos.line;)i=this.moveToNextToken,i&&t.push(i);return t}isFunctionDefinition(){this.enqueueToStack();let t=this.processCIdentifier();if(!t){this.popStack();return}let i=this.moveToNextToken;if(!F(i,42)){this.popStack();return}let r=[],s=this.processCIdentifier()||this.processVariadic();for(;s;)r.push(s),!F(this.currentToken,24)&&!F(this.currentToken,43)?this.issues.push(A(33,s)):F(this.currentToken,43)||(i=this.moveToNextToken),s=this.processCIdentifier()||this.processVariadic();let o=new kc(t,r);return F(this.currentToken,43)?(i=this.moveToNextToken,o.lastToken=i):(o.lastToken=this.prevToken,this.issues.push(A(30,r.at(-1)??o))),o.uri=this.uri,this.mergeStack(),o}processVariadic(){this.enqueueToStack();let t=this.checkConcurrentTokens([ve(45),ve(45),ve(45)]);if(t.length!==3){this.popStack();return}let i=new Sc(z(t[0],t.at(-1)));return this.mergeStack(),i}processIfDefBlocks(){let t=this.peekIndex(),i=this.parseScopedBlock(r=>{let s=this.getTokenIndex(r)-1;return!!r&&[33,34].some(o=>F(r,o))&&!xn(this.tokens.at(s),r)},r=>{let s=this.getTokenIndex(r)-1;return!!r&&[37].some(o=>F(r,o))&&!xn(this.tokens.at(s),r)},r=>{let s=this.getTokenIndex(r)-1;return!!r&&[36].some(o=>F(r,o))&&!xn(this.tokens.at(s),r)});if(i&&(F(i.startToken,33)||F(i.startToken,34))){let r;F(i.startToken,33)?r=this.processIfDefBlock(i,(o,a,c)=>new _s(o,a??null,c)):r=this.processIfDefBlock(i,(o,a,c)=>new Nc(o,a??null,c)),this.nodes.push(r),r.getInValidTokenRange(this.macros,this.tokens).reverse().forEach(o=>{this.tokens.splice(o.start,o.end-o.start+1)}),this.positionStack[this.positionStack.length-1]=t;return}}processIfDefBlock(t,i){this.enqueueToStack();let r=new tt(z(t.startToken)),s=new tt(z(t.endToken));this.positionStack[this.positionStack.length-1]=this.getTokenIndex(t.startToken)+1;let o=this.processCIdentifier();o||this.issues.push(A(36,r));let a=this.getTokenIndex(t.splitTokens[0].at(-1)),c=new ws(z(this.currentToken,this.tokens[a])),l=i(r,o??null,c),u;if(t.splitTokens.length>1){let p=this.getTokenIndex(t.splitTokens[1][0]),g=new tt(z(this.tokens[p])),_=new ws(z(this.tokens[p+1],t.splitTokens[1].at(-1)));u=new wc(g,_)}let d=new _c(l,s,u);return this.mergeStack(),d}get allAstItems(){return[...this.nodes,...this.commentsParser.allAstItems]}};var rd=X(te());var jT=require("path"),Fi=class extends ${constructor(t,i){super();this.keyword=t;this.path=i;this.docSymbolsMeta={name:"Include",kind:rd.SymbolKind.File},this.addChild(t),this.addChild(i)}},Dc=class extends ${constructor(t,i,r){super(r);this._path=t;this.relative=i;this.docSymbolsMeta={name:(0,jT.basename)(this.path),kind:rd.SymbolKind.File},this.semanticTokenType="string",this.semanticTokenModifiers="declaration"}get path(){return this.relative?this._path.slice(1,-1):this._path}};var sd=require("fs"),Dr=require("path"),ui=class n extends li{constructor(t,i,r=new Map,s=-1){super();this.uri=t;this.incudes=i;this.sortKey=s;this.tokens=[];this.others=[];this.rootDocument=new xe;this.issues=[];this.unhandledStatements=new Mt;this.originalSortKey=s,this.cPreprocessorParser=new Pc(this.uri,this.incudes,r),this.rootDocument.uri=t}reset(){super.reset(),this.others=[],this.rootDocument=new xe,this.rootDocument.uri=this.uri,this.issues=[],this.sortKey=this.originalSortKey,this.unhandledStatements=new Mt}async reparse(){let t=performance.now(),i=this.stable;return this.parsing=new Promise(r=>{i.then(async()=>{this.reset(),await this.cPreprocessorParser.reparse(),await this.parse(),console.log("parsing",performance.now()-t),r()})}),this.parsing}async parse(){let t=performance.now();if(await this.cPreprocessorParser.stable,this.tokens=this.cPreprocessorParser.tokens,this.uri.endsWith(".h")||(this.positionStack.push(0),this.tokens.length===0))return;let i=async()=>{if(!(this.isDtsDocumentVersion()||this.isRootNodeDefinition(this.rootDocument)||this.isDeleteNode(this.rootDocument,"Ref")||await this.processInclude(this.rootDocument)||this.isChildNode(this.rootDocument,"Ref")||this.isProperty(this.unhandledStatements)||this.isDeleteProperty(this.unhandledStatements))){let r=this.moveToNextToken;if(r){let s=new $(z(r));this.issues.push(A(26,s)),this.reportExtraEndStatements()}}};for(;!this.done;)await i();if(this.allParsers,this.allAstItems.forEach(r=>r.sortKey=this.sortKey),this.unhandledStatements.properties.forEach(r=>{this.issues.push(A(38,r))}),this.unhandledStatements.deleteProperties.forEach(r=>{this.issues.push(A(39,r))}),this.positionStack.length!==1)throw new Error("Incorrect final stack size")}isRootNodeDefinition(t){this.enqueueToStack();let i=this.moveToNextToken,r=i,s=13;if(!i||!F(i,s))return this.popStack(),!1;if(r=this.moveToNextToken,s=2,!r||!F(r,s))return this.popStack(),!1;let o=new Mt;o.openScope=r,t.addNodeChild(o),this.processNode(o,"Name");let a=this.nodeEnd(o)??r;return o.firstToken=i,o.lastToken=a,this.mergeStack(),!0}nodeEnd(t){let i=this.currentToken;if(F(i,3))this.moveToNextToken;else{let r=this.prevToken;if(r){let s=new $(z(r));this.issues.push(A(3,s))}return this.endStatement(!1)}return this.prevToken?.value==="}"&&(t.closeScope=this.prevToken),this.endStatement()}isNodeEnd(){return F(this.currentToken,3)||F(this.currentToken,1)}endStatement(t=!0){let i=this.currentToken;if(!F(i,1)){let r=this.prevToken;if(r&&t){let s=new $(z(this.prevToken));return this.issues.push(A(1,s)),r}}return this.moveToNextToken,this.reportExtraEndStatements(),i}reportExtraEndStatements(){for(;F(this.currentToken,1);){let t=this.moveToNextToken;if(t){let i=new $(z(t));this.issues.push(A(27,i))}}}processNode(t,i){if(this.done)return!1;let r=!1,s=!1;do{if(s=this.isChildNode(t,i)||this.isProperty(t)||this.isDeleteNode(t,i)||this.isDeleteProperty(t),!s&&!this.isNodeEnd()&&!this.done){let o=this.moveToNextToken;if(o){let a=new $(z(o));this.issues.push(A(26,a)),this.reportExtraEndStatements()}}else if(this.done)break;r=r||s}while(!this.isNodeEnd());return r}processOptionalLabelAssign(t=!1){let i=[],r=this.isLabelAssign(t);for(;r;)i.push(r),r=this.isLabelAssign(t);return i}isChildNode(t,i){this.enqueueToStack();let r;i==="Name"&&(r=this.isOmitIfNoRefNode());let s=this.processOptionalLabelAssign(),o,a,c=i==="Ref"?new et(s):new he(s,r);if(i==="Ref"?a=this.isLabelRef():i==="Name"&&(o=this.isNodeName()),!a&&!o){if(!F(this.currentToken,2))return this.popStack(),!1;c.firstToken=this.currentToken,this.issues.push(A(i==="Name"?[7]:[13,14],c))}let l=!1;if(a&&c instanceof et?(c.labelReference=a,l=!0):o&&c instanceof he&&(l=o.address!==void 0,c.name=o),F(this.currentToken,2)){this.moveToNextToken,c.openScope=this.prevToken;let u=!1;do u=this.processNode(c,"Name");while(u);let d=this.nodeEnd(c);c.lastToken=d}else if(l){let u=a??o;u&&this.issues.push(A(2,u))}else return this.popStack(),!1;return t.addNodeChild(c),this.mergeStack(),!0}isNodeName(){this.enqueueToStack();let t=this.consumeAnyConcurrentTokens([19,47,24,45,48,15,16].map(ve));if(!t.length){this.popStack();return}let i=t.map(o=>o.value).join("");if(!i.match(/^[A-Za-z]/)){this.popStack();return}let r=this.checkConcurrentTokens([ve(49)]);if(r.length){let o=this.consumeAnyConcurrentTokens([19,20].map(ve)),a=o.length?Number.parseInt(o.map(l=>l.value).join(""),16):NaN,c=new we(i,z(t[0],o.at(-1)??t.at(-1)),a);if(!ri(t.at(-1),r[0])){let l=new $(z(t.at(-1),r[0]));this.issues.push(A(34,l))}if(Number.isNaN(a)&&this.issues.push(A(8,c)),!Number.isNaN(a)&&!ri(r.at(-1),o[0])){let l=new $(z(r[0],o.at(0)));this.issues.push(A(34,l))}return this.mergeStack(),c}let s=new we(i,z(t[0],t.at(-1)));return this.mergeStack(),s}isPropertyName(){this.enqueueToStack();let t=this.consumeAnyConcurrentTokens([19,47,24,45,48,15,16,44,46].map(ve));if(!t.length){this.popStack();return}let i=new Ne(t.map(r=>r.value).join(""),z(t[0],t.at(-1)));return this.mergeStack(),i}isLabelName(){this.enqueueToStack();let t=this.consumeAnyConcurrentTokens([19,47,48].map(ve));if(!t.length){this.popStack();return}let i=t.map(s=>s.value).join("");if(!i.match(/^[A-Za-z]/)){this.popStack();return}let r=new at(i,z(t[0],t.at(-1)));return this.mergeStack(),r}isLabelAssign(t){this.enqueueToStack();let i=this.consumeAnyConcurrentTokens([19,47,48].map(ve));if(!i.length){this.popStack();return}let r=i.map(c=>c.value).join("");if(!r.match(/^[A-Za-z]/)){this.popStack();return}let s=this.currentToken,o=s&&F(s,50),a=new ai(new at(r,z(i[0],i.at(-1))),z(i[0],o?s:i.at(-1)));if(o){let c=i.at(-1);c&&(s.pos.line!==a.firstToken.pos.line||s.pos.col!==c.pos.col+c.pos.len)&&this.issues.push(A(34,new $(z(c,s)))),this.moveToNextToken}else if(t)this.issues.push(A(28,a));else{this.popStack();return}return this.mergeStack(),a}isProperty(t){this.enqueueToStack();let i=this.processOptionalLabelAssign(),r=this.isPropertyName();if(!r)return this.popStack(),!1;if(F(this.currentToken,2)||F(this.currentToken,49))return this.popStack(),!1;let s=new Le(r,i),o;F(this.currentToken,0)?(this.moveToNextToken,o=this.processValue(s),o?.values.filter(c=>!!c).length||this.issues.push(A(0,s)),s.values=o??null):s.values=void 0;let a=this.endStatement();return s.lastToken=a,t.addNodeChild(s),this.mergeStack(),!0}isDtsDocumentVersion(){this.enqueueToStack();let t=this.checkConcurrentTokens([ve(13),Ge("d"),Ge("ts"),ve(16),Ge("v"),Ge("1")]);if(!t.length)return this.popStack(),!1;let i=t[0],r=i;if(t.length===1&&!F(this.currentToken,2))return this.popStack(),!1;if(t.length!==6)return this.popStack(),!1;let s=new tt;s.firstToken=i;let o=new hc(s);if(this.others.push(o),F(this.currentToken,13))r=this.moveToNextToken;else return s.lastToken=t.at(-1),this.issues.push(A(25,o)),this.mergeStack(),!0;return s.lastToken=r,o.lastToken=this.endStatement(),this.mergeStack(),!0}isOmitIfNoRefNode(){this.enqueueToStack();let t=this.checkConcurrentTokens([ve(13),Ge("omit"),ve(16),Ge("if"),ve(16),Ge("no"),ve(16),Ge("ref"),ve(13)]);if(t.length!==9){this.popStack();return}let i=new tt(z(t[0],t.at(-1)));return this.mergeStack(),i}isDeleteNode(t,i){this.enqueueToStack();let r=this.checkConcurrentTokens([ve(13),Ge("d"),Ge("e"),Ge("lete"),ve(16),Ge("node")]);if(!r.length)return this.popStack(),!1;let s=r[0],o=s,a=new tt;if(a.firstToken=s,r.length===1&&!F(this.currentToken,2)){this.issues.push(A(29,a)),a.lastToken=r.at(-1);let d=new Yt(a);return t.addNodeChild(d),this.mergeStack(),!0}let c=r.map(d=>d.value??"").join("");if(!"/delete-node/".startsWith(c)||c.endsWith("-"))return this.popStack(),!1;a.lastToken=r.at(-1),c!=="/delete-node"?this.issues.push(A(c.startsWith("/delete-n")?40:29,a)):F(this.currentToken,13)?(o=this.moveToNextToken,a.lastToken=o):this.issues.push(A(25,a));let l=new Yt(a);if(xn(a.tokenIndexes?.end,s)){let d=this.processNodePathRef();d&&i==="Name"&&this.issues.push(A(7,d));let p=d?void 0:this.isLabelRef();p&&i==="Name"&&this.issues.push(A(7,p));let g=d||p?void 0:this.isNodeName();g&&i==="Ref"&&this.issues.push(A(13,g)),!d&&!g&&!p&&this.issues.push(A([7,13],l)),l.nodeNameOrRef=d??p??g??null}else i==="Name"?this.issues.push(A(7,a)):i==="Ref"&&this.issues.push(A(13,a));let u=this.endStatement();return l.lastToken=u,t.addNodeChild(l),this.mergeStack(),!0}isDeleteProperty(t){this.enqueueToStack();let i=this.checkConcurrentTokens([ve(13),Ge("d"),Ge("e"),Ge("lete"),ve(16),Ge("property")]);if(!i.length)return this.popStack(),!1;let r=i[0],s=r,o=new tt;if(o.firstToken=r,i.length===1&&!F(this.currentToken,2)){this.issues.push(A(29,o)),o.lastToken=i.at(-1);let u=new Ce(o);return t.addNodeChild(u),this.mergeStack(),!0}let a=i.map(u=>u.value??"").join("");if(!"/delete-property/".startsWith(a)||a.endsWith("-"))return this.popStack(),!1;o.lastToken=i.at(-1),a!=="/delete-property"?this.issues.push(A(a.startsWith("/delete-p")?41:29,o)):F(this.currentToken,13)?(s=this.moveToNextToken,o.lastToken=s):this.issues.push(A(25,o));let c=new Ce(o);if(xn(o.tokenIndexes?.end,r)){let u=this.isPropertyName();u||this.issues.push(A(6,c)),c.propertyName=u??null}else this.issues.push(A(6,o));let l=this.endStatement();return c.lastToken=l,t.addNodeChild(c),this.mergeStack(),!0}isNodePathRef(){let t=this.processNodePathRef();if(!t)return;let i=[];return this.currentToken&&this.currentToken.pos.line===this.currentToken.prevToken?.pos.line&&(i=this.processOptionalLabelAssign(!0)),new Tn(t,[...i])}processValue(t){this.enqueueToStack();let i=this.processOptionalLabelAssign(!0),s=(()=>{let a=()=>(this.processStringValue()||this.isNodePathRef()||this.isLabelRefValue(t)||this.arrayValues(t)||this.processByteStringValue())??null,c=a();if(!c)return[];let l=[c];for(;!F(this.currentToken,1);){let u=this.prevToken,d=this.currentToken,p=F(this.currentToken,24);p&&this.moveToNextToken;let g=a();if(d&&g===null&&p){let _=new $(z(d,this.currentToken));this.issues.push(A(0,_))}if(!p&&g===null)break;if(u&&!p&&g){let _=new $(z(u));this.issues.push(A(33,_))}l.push(g)}return l})();if(s.length===0){this.popStack();return}return this.mergeStack(),new dc(s,i)}processStringValue(){this.enqueueToStack();let t=this.moveToNextToken;if(!F(t,21)){this.popStack();return}if(!t?.value)throw new Error("Token must have value");let i=t.value;i.match(/["']$/)&&(i=i.slice(1,-1));let r=new mt(i,z(t));t.value.match(/["']$/)||this.issues.push(A(t.value.startsWith('"')?19:20,r));let s=[];this.currentToken&&this.currentToken.pos.line===this.currentToken.prevToken?.pos.line&&(s=this.processOptionalLabelAssign(!0));let o=new Tn(r,s);return this.mergeStack(),o}arrayValues(t){this.enqueueToStack();let i=this.currentToken;if(F(i,5))this.moveToNextToken;else{this.popStack();return}let r=this.processArrayValues(t)??null,s=this.processOptionalLabelAssign(!0)??[],o=new Tn(r,[...s]);F(this.currentToken,4)?this.moveToNextToken:this.issues.push(A(15,o));let a=[];return this.currentToken&&this.currentToken.pos.line===this.currentToken.prevToken?.pos.line&&(a=this.processOptionalLabelAssign(!0)),this.mergeStack(),o.endLabels.push(...a),r||this.issues.push(A(37,o)),o.firstToken=i,o.lastToken=this.prevToken,o}processByteStringValue(){this.enqueueToStack();let t=this.moveToNextToken;if(!F(t,11)){this.popStack();return}let r=this.processLabeledValue(()=>this.processHexString()),s=this.processOptionalLabelAssign(!0)??[];r.forEach(l=>{let u=0;l.value?.tokenIndexes?.start===l.value?.tokenIndexes?.end&&(u=l.value?.tokenIndexes?.start?.pos.len??0),u%2!==0&&this.issues.push(A(18,l))});let o=new si(r??[]);o.values.length===0&&(o.firstToken=t,this.issues.push(A(17,o)));let a=new Tn(o,[...s]);F(this.currentToken,12)?this.moveToNextToken:this.issues.push(A(5,a));let c=[];return this.currentToken&&this.currentToken.pos.line===this.currentToken.prevToken?.pos.line&&(c=this.processOptionalLabelAssign(!0)),this.mergeStack(),a.endLabels.push(...c),a.firstToken=t,o.lastToken=this.prevToken,a}processLabeledValue(t){this.enqueueToStack();let i=t(),r=[];if(!i)return this.popStack(),[];for(;i;)r=[...r,i],i=t();if(r){let s=t();s&&(r=[...r,s])}return this.mergeStack(),r}processArrayValues(t){this.enqueueToStack();let i=this.processLabeledValue(()=>this.processRefValue(!1,t)||this.processLabeledHex(!1)||this.processLabeledDec(!1)||this.processLabeledExpression(!0,!1));if(i.length===0){this.popStack();return}let r=new Ye(i);return this.mergeStack(),r}processLabeledHex(t){this.enqueueToStack();let i=this.processOptionalLabelAssign(t),r=this.processHex();if(!r){this.popStack();return}let s=new Sn(r,i);return this.mergeStack(),s}processHex(){this.enqueueToStack();let t=this.checkConcurrentTokens([Ge("0"),Ge("x")]);if(t.length!==2){this.popStack();return}let i=this.consumeAnyConcurrentTokens([19,20].map(ve));if(!i.length){this.popStack();return}let r=Number.parseInt(i.map(o=>o.value).join(""),16),s=new gt(r,z(t[0],i.at(-1)));return this.mergeStack(),s}processHexString(){this.enqueueToStack();let t=this.processOptionalLabelAssign(!1),i=this.checkConcurrentTokens([20,20].map(ve));if(!i.length){this.popStack();return}let r=Number.parseInt(i.map(a=>a.value).join(""),16),s=new gt(r,z(i[0],i.at(-1))),o=new Sn(s,t);return this.mergeStack(),o}processLabeledDec(t){this.enqueueToStack();let i=this.processOptionalLabelAssign(t),r=this.processDec();if(!r){this.popStack();return}let s=new Sn(r,i);return this.mergeStack(),s}processDec(){this.enqueueToStack();let t=this.consumeAnyConcurrentTokens([19].map(ve));if(!t.length){this.popStack();return}let i=Number.parseInt(t.map(s=>s.value).join(""),10),r=new gt(i,z(t[0],t.at(-1)));return this.mergeStack(),r}processLabeledExpression(t=!0,i=t){this.enqueueToStack();let r=[];t&&(r=this.processOptionalLabelAssign(i));let s=this.processExpression();if(!s){this.popStack();return}let o=new Sn(s,r);return this.mergeStack(),o}isFunctionCall(){this.enqueueToStack();let t=this.processCIdentifier();if(!t){this.popStack();return}let i=this.processMacroCallParams();if(!i){this.popStack();return}let r=new mc(t,i);return this.mergeStack(),r}processExpression(){this.enqueueToStack();let t=!1,i,r;F(this.currentToken,42)&&(t=!0,i=this.moveToNextToken,r=i);let s=this.isFunctionCall()||this.processCIdentifier()||this.processHex()||this.processDec();if(!s){this.popStack();return}if(t){let o=this.isOperator();for(;o;){let a=this.processExpression();a?s instanceof Es?s.addExpression(o,a):s=new Es(s,{operator:o,expression:a}):this.issues.push(A(31,o)),o=this.isOperator()}F(this.currentToken,43)?r=this.moveToNextToken:this.issues.push(A(30,o??s))}return this.mergeStack(),s}processMacroCallParams(){return F(this.currentToken,42)?this.parseScopedBlock(i=>!!F(i,42),i=>!!F(i,43),i=>!!F(i,24))?.splitTokens.map((i,r)=>{let s=r?i.slice(1):i;return new pc(s.map((o,a)=>{let c=o.value;return o.pos.line===s.at(a+1)?.pos.line&&(c=c.padEnd(s[a+1].pos.col-o.pos.col," ")),c}).join(""),z(s[0],s.at(-1)),r)}):void 0}isLabelRef(t){this.enqueueToStack();let i=this.currentToken;if(F(i,40))this.moveToNextToken;else{this.popStack();return}let r=this.isLabelName();if(!r){let o=new pe(null);return this.issues.push(A(22,t??o)),o.firstToken=i,this.mergeStack(),o}i&&(r.firstToken.pos.line!==i.pos.line||r.firstToken.pos.col!==i.pos.col+i.pos.len)&&this.issues.push(A(34,new $(z(i,r.firstToken))));let s=new pe(r);return s.firstToken=i,this.mergeStack(),s}isLabelRefValue(t){this.enqueueToStack();let i=this.isLabelRef(t);if(!i){this.popStack();return}let r=[];this.currentToken&&this.currentToken.pos.line===this.currentToken.prevToken?.pos.line&&(r=this.processOptionalLabelAssign(!0));let s=new Tn(i,r);return this.mergeStack(),s}processRefValue(t,i){this.enqueueToStack();let r=this.processOptionalLabelAssign(t),s=this.currentToken;if(!F(this.currentToken,40)){this.popStack();return}let o=this.processNodePathRef();if(o!==void 0){let l=new Sn(o,r);return this.mergeStack(),l}let a=this.isLabelRef(i);if(a===void 0){this.issues.push(A([22,12],i));let l=new Sn(null,r);return l.firstToken=r.at(0)?.firstToken??s,this.mergeStack(),l}let c=new Sn(a,r);return c.firstToken=r.at(0)?.firstToken??s,this.mergeStack(),c}processNodePath(t=!0,i=new Mn){this.enqueueToStack();let r;if(F(this.currentToken,13))r=this.moveToNextToken;else{if(!t){this.popStack();return}this.prevToken&&this.issues.push(A(23,new $(z(this.prevToken))))}let s=this.isNodeName();return s||this.issues.push(A(7,new $(z(r??this.prevToken)))),i.addPath(s??null,r?new $(z(r)):void 0),this.processNodePath(!1,i),this.mergeStack(),i}processNodePathRef(){this.enqueueToStack();let t=this.moveToNextToken,i=t;if(!F(i,40)){this.popStack();return}let r=this.moveToNextToken;if(i=r,!F(i,2)){this.popStack();return}let s=this.processNodePath(),o=new sn(s??null),a=this.currentToken??this.prevToken,c=a;return s?.children.forEach((l,u)=>{if(u===s?.children.length-1&&l&&c&&l.lastToken.pos.col+l.lastToken.pos.len!==c.pos.col){this.issues.push(A(34,new $(z(l.lastToken,c))));return}if(u===0&&r&&r.pos.col+r.pos.len!==l?.firstToken.pos.col){this.issues.push(A(34,new $(z(r,l?.firstToken))));return}let d=s?.children[u+1];l&&d&&l.lastToken.pos.col+l.lastToken.pos.len!==d?.firstToken.pos.col&&this.issues.push(A(34,new $(z(l.lastToken,d?.firstToken))))}),F(a,3)?this.moveToNextToken:this.prevToken&&this.issues.push(A(3,new $(z(this.prevToken)))),o.firstToken=t,o.lastToken=a??this.prevToken,this.mergeStack(),o}get includes(){return this.allAstItems.filter(t=>t instanceof Fi)}resolveInclude(t){return t.path.relative?[(0,Dr.resolve)((0,Dr.dirname)(this.uri),t.path.path),...this.incudes.map(i=>(0,Dr.resolve)(i,t.path.path))].find(i=>(0,sd.existsSync)(i)):this.incudes.map(i=>(0,Dr.resolve)(i,t.path.path)).find(i=>(0,sd.existsSync)(i))}async processInclude(t){this.enqueueToStack();let i=this.peekIndex(),r=this.moveToNextToken,s=r;if(!s||!F(s,26))return this.popStack(),!1;let o=r?.pos.line,a=new tt(z(s));s=this.moveToNextToken;let c=s,l=!!F(s,21);if(!c||!l&&!F(s,5))return o&&this.moveEndOfLine(o),this.mergeStack(),!0;let u="";if(l)u=s?.value??"";else for(;this.currentToken?.pos.line===o&&!F(this.currentToken,4);)u+=this.currentToken?.value??"",s=this.moveToNextToken;let d=new Dc(u,l,z(c,s)),p=new Fi(a,d);p.uri=this.uri,t.addNodeChild(p),p.sortKey=this.sortKey+1,l||(this.currentToken?.pos.line!==o||!F(this.currentToken,4)?this.issues.push(A(15,p)):(s=this.moveToNextToken,d.lastToken=s));let g=this.resolveInclude(p);if(p.reolvedPath=g,g&&!g.endsWith(".h")){this.allAstItems.forEach(N=>N.sortKey=this.sortKey),ci().requestTokens(g,!0);let b=new n(g,this.incudes,this.cPreprocessorParser.macros,++this.sortKey);this.sortKey++,this.childParsers.push(b),await b.stable}this.mergeStack();let _=this.peekIndex();return this.tokens.splice(i,_-i),this.positionStack[this.positionStack.length-1]=i,!0}get allAstItems(){return[...this.cPreprocessorParser.allAstItems,...this.rootDocument.children,...this.others,...this.unhandledStatements.properties,...this.unhandledStatements.deleteProperties]}};var Rr=X(te());var R_=0,Cr=class{constructor(e,t,i,r=[]){this.bindingLoader=i;this.overlays=r;this._issues=[];this.id=++R_;this.parser=new ui(e,t),this.overlayParsers=r?.map(s=>new ui(s,t))??[]}async getContextIssues(){return[...(await this.getRuntime()).issues,...this._issues]}async stable(){await Promise.all([this.parser.stable,...this.overlayParsers.map(e=>e.stable)])}async getRuntime(){return await this.stable(),this._runtime??=this.evaluate(),this._runtime}async getOrderedParsers(){return await this.stable(),[...this.parser.orderedParsers,...this.overlayParsers.reverse()]}async getParser(e){return(await this.getAllParsers())?.find(t=>t.uri===e)}async getAllParsers(){return await this.stable(),[...this.parser.allParsers,...this.overlayParsers]}async getDocumentLinks(e){let t=await this.getParser(e),r=(await this.getRuntime()).rootNode.allBindingsProperties.filter(s=>s.ast.uri===e).flatMap(s=>s.ast.values?.values.flatMap(o=>{let c=s.parent?.nodeTypes.find(l=>o?.value instanceof mt&&l.compatible===o.value.value);return c?{range:ne(o.value),target:`file://${c.bindingsPath}`}:void 0})).filter(s=>s)??[];return[...t?.includes.map(s=>{let o=t.resolveInclude(s);if(o)return{range:ne(s.path),target:`file://${o}`}}).filter(s=>s)??[],...r]}linkPropertiesLabelsAndNodePaths(e){let t=s=>[...s.properties,...s.nodes.flatMap(t)],i=t(e.rootNode),r=e.rootNode.allDescendantsLabels;i.forEach(s=>s.ast.allDescendants.forEach(o=>{if(o instanceof pe){let a=e.resolvePath([`&${o.label?.value}`],r);if(a){let c=e.rootNode.getChild(a);o.linksTo=c,c?.linkedRefLabels.push(o)}else o.value&&this._issues.push(A(3,o,Rr.DiagnosticSeverity.Error,[],[],[o.value]))}else if(o instanceof Mn){let a=e.rootNode,c=o.pathParts;for(let l=0;l<c.length&&c[l];l++){let u=!1,d=c[l];if(d){let p=a?.getNode(d.name,d.address,!1);d.linksTo=p,!u&&!p&&(u=!0,this._issues.push(A(8,d,Rr.DiagnosticSeverity.Error,[],[],[d.toString(),`${o.pathParts.filter(g=>g?.linksTo).map(g=>g?.toString()).join("/")}`]))),p?.linkedNodeNamePaths.push(d),a=p}else break}}}))}async revaluate(e){return await(await this.getParser(e))?.reparse(),this._runtime=this.evaluate(),this._runtime}async evaluate(){let e=performance.now();await this.parser.stable;let t=new fc(this.bindingLoader);this._issues=[],await this.processRoot(this.parser.rootDocument,t);for(let i=0;i<this.overlayParsers.length;i++)await this.processRoot(this.overlayParsers[i].rootDocument,t);return this.linkPropertiesLabelsAndNodePaths(t),console.log("evaluate",performance.now()-e),t}async processRoot(e,t){for(let i=0;i<e.children.length;i++){let r=e.children[i];if(r instanceof Fi){let s=r.reolvedPath?await this.getParser(r.reolvedPath):void 0;s&&await this.processRoot(s.rootDocument,t)}else this.processChild(r,t.rootNode,t)}}processChild(e,t,i){e instanceof xe?this.processDtcBaseNode(e,t,i):e instanceof Le?this.processDtcProperty(e,t,i):e instanceof Yt?this.processDeleteNode(e,t,i):e instanceof Ce&&this.processDeleteProperty(e,t,i)}checkNodeUniqueNames(e,t){let i=(o,a)=>o.some(c=>c.name===a.name&&(c.address===void 0||a.address===void 0||c.address===a.address)),r=t.nodes.map(o=>({name:o.name,address:o.address})),s=[];e.children.forEach(o=>{if(o instanceof he&&o.name)i(s,o.name)&&this._issues.push(A(2,o.name)),s.push(o.name);else if(o instanceof Yt&&o.nodeNameOrRef instanceof we){let a=o.nodeNameOrRef;i(r,a)&&(s=s.filter(c=>i(s,c)))}})}processDtcBaseNode(e,t,i){e instanceof Mt?this.processDtcRootNode(e,i):e instanceof he?this.processDtcChildNode(e,t,i):e instanceof et&&this.processDtcRefNode(e,i)}processDtcRootNode(e,t){t.roots.push(e),t.rootNode.definitions.push(e),this.checkNodeUniqueNames(e,t.rootNode),[...e.children].sort((i,r)=>i instanceof Le&&r instanceof Ce||r instanceof Le&&i instanceof Ce?0:r instanceof Le?1:0).forEach(i=>this.processChild(i,t.rootNode,t))}processDtcChildNode(e,t,i){if(e.name?.name){let r=e.path?i.resolvePath(e.path):void 0,o=(r?i.rootNode.getChild(r):void 0)??new be(this.bindingLoader,e.name.name,e.name.address,t);o.definitions.push(e),e.labels.forEach(a=>a.lastLinkedTo=o),t=o,this.checkNodeUniqueNames(e,o)}[...e.children].sort((r,s)=>r instanceof xe&&s instanceof xe?0:r instanceof xe?-1:0).forEach(r=>this.processChild(r,t,i))}processDtcRefNode(e,t){let i;if(e.labelReference){let r=e.resolveNodePath??(e.pathName?t.resolvePath([e.pathName]):void 0);r?(e.resolveNodePath??=[...r],i=t.rootNode.getChild(r),e.labelReference.linksTo=i,e.labels.forEach(s=>s.lastLinkedTo=i),i?.linkedRefLabels.push(e.labelReference),i?.referencedBy.push(e),e.labels.forEach(s=>{t.labelsUsedCache.set(s.label.value,r)}),i?(t.references.push(e),this.checkNodeUniqueNames(e,i)):t.unlinkedRefNodes.push(e)):(this._issues.push(A(3,e.labelReference,Rr.DiagnosticSeverity.Error,[],[],[e.labelReference.label?.value??""])),t.unlinkedRefNodes.push(e))}else t.unlinkedRefNodes.push(e);[...e.children].sort((r,s)=>r instanceof xe&&s instanceof xe?0:r instanceof xe?-1:0).forEach(r=>this.processChild(r,i??new be(this.bindingLoader,""),t))}processDtcProperty(e,t,i){e.propertyName?.name&&t.addProperty(new Ke(e,t)),e.children.forEach(r=>this.processChild(r,t,i))}processDeleteNode(e,t,i){if(e.nodeNameOrRef instanceof we&&e.nodeNameOrRef.value){if(e.parentNode?.parentNode)if(!t.hasNode(e.nodeNameOrRef.name,e.nodeNameOrRef.address))this._issues.push(A(5,e.nodeNameOrRef));else{t.deletes.push(e);let r=t.getNode(e.nodeNameOrRef.name,e.nodeNameOrRef.address);e.nodeNameOrRef.linksTo=r,t.deleteNode(e.nodeNameOrRef.name,e,e.nodeNameOrRef.address),r?.labels.forEach(s=>{i.labelsUsedCache.delete(s.label.value)})}}else if(e.nodeNameOrRef instanceof pe&&e.nodeNameOrRef.value){let r=i.resolvePath([`&${e.nodeNameOrRef.value}`]),s;r?(s=i.rootNode.getChild(r),t.deletes.push(e),e.nodeNameOrRef.linksTo=s,s?.labels.forEach(o=>{i.labelsUsedCache.delete(o.label.value)}),s?.linkedRefLabels.push(e.nodeNameOrRef),s?.parent?.deleteNode(s.name,e,s.address),e.parentNode instanceof xe&&!e.parentNode.pathName&&i.globalDeletes.push(e)):(i.unlinkedDeletes.push(e),this._issues.push(A(3,e.nodeNameOrRef,Rr.DiagnosticSeverity.Error,[],[],[e.nodeNameOrRef.value])))}else if(e.nodeNameOrRef instanceof sn&&e.nodeNameOrRef.path&&!e.nodeNameOrRef.path.pathParts.some(r=>!r)){let r=["/",...e.nodeNameOrRef.path.pathParts.map(u=>u.toString())],s=i.rootNode,o=e.nodeNameOrRef.path.pathParts;for(let u=0;u<o.length&&o[u];u++){let d=o[u];if(d){let p=s?.getNode(d.name,d.address,!1);d.linksTo=p,p?.linkedNodeNamePaths.push(d),s=p}}let a=e.nodeNameOrRef.path.pathParts.every(u=>u),c=e.nodeNameOrRef.path.pathParts.find(u=>u&&!u.linksTo),l=e.nodeNameOrRef.path.pathParts.at(-1)?.linksTo;l||(i.unlinkedDeletes.push(e),c&&this._issues.push(A(8,c,Rr.DiagnosticSeverity.Error,[],[],[c.toString(),`${e.nodeNameOrRef.path.pathParts.filter(u=>u?.linksTo).map(u=>u?.toString()).join("/")}`]))),t.deletes.push(e),l?.labels.forEach(u=>{i.labelsUsedCache.delete(u.label.value)}),l?.parent?.deleteNode(l.name,e,l.address),e.parentNode instanceof xe&&!e.parentNode.pathName&&i.globalDeletes.push(e)}else i.unlinkedDeletes.push(e);e.children.forEach(r=>this.processChild(r,t,i))}processDeleteProperty(e,t,i){e.propertyName?.name&&!t.hasProperty(e.propertyName.name)?this._issues.push(A(1,e.propertyName)):e.propertyName?.name&&(t.deletes.push(e),t.deleteProperty(e.propertyName.name,e)),e.children.forEach(r=>this.processChild(r,t,i))}};var ct=X(te());var Rc=(n,e)=>[...n.labels.filter(e),...n.deletedNodes.filter(t=>!e(t.by)).flatMap(t=>Rc(t.node,e)),...n.nodes.flatMap(t=>Rc(t,e))],od=(n,e)=>[...n.labels,...n.deletedNodes.filter(t=>!e(t.by)).flatMap(t=>od(t.node,e)),...n.nodes.flatMap(t=>od(t,e))];function C_(n,e){if(!n||!(n.item instanceof Ke)||!(n.ast instanceof pe))return[];let t=i=>od(i,e);return Array.from(new Set(t(n.runtime.rootNode).map(i=>i.label.value))).map(i=>({label:`${i}`,kind:ct.CompletionItemKind.Method}))}function O_(n,e){if(!n||n.item!==null||!(n.ast instanceof pe)||!(n.ast.parentNode instanceof et))return[];let t=i=>Rc(i,e).filter(r=>e(r));return[...Array.from(new Set(t(n.runtime.rootNode).map(i=>i.label.value))).map(i=>({label:i,insertText:`${i} {
$1
};`,kind:ct.CompletionItemKind.Value,insertTextFormat:ct.InsertTextFormat.Snippet}))]}function A_(n,e){let t=r=>r?r.parentNode instanceof et||r.parentNode instanceof Mt||r.parentNode instanceof he?!1:t(r.parentNode):!0;if(!n||n.item!==null||!ot(n.ast)||!t(n.ast))return[];let i=r=>Rc(r,e).filter(s=>e(s));return n.ast instanceof tt?i(n.runtime.rootNode).length?[{label:"/delete-node/",insertText:"/delete-node/ $1;",kind:ct.CompletionItemKind.Keyword,insertTextFormat:ct.InsertTextFormat.Snippet,sortText:"~"}]:n.runtime.rootNode.nodes.length?[{label:"/delete-node/ &{}",insertText:"/delete-node/ {/$1};",kind:ct.CompletionItemKind.Keyword,insertTextFormat:ct.InsertTextFormat.Snippet,sortText:"~"}]:[]:Array.from(new Set(i(n.runtime.rootNode).map(r=>r.label.value))).map(r=>({label:`${r}`,kind:ct.CompletionItemKind.Variable}))}function I_(n,e){if(!n||!(n.item instanceof be)||n.item===null)return[];let t=i=>[...i.nodes,...i.deletedNodes.filter(r=>!e(r.by)).map(r=>r.node)].flatMap(r=>r.definitions.filter(s=>s instanceof he)).filter(r=>e(r));return n.ast instanceof we||n.ast instanceof Yt?Array.from(new Set(t(n.item).map(i=>i.name?.toString()))).map(i=>({label:`${i}`,kind:ct.CompletionItemKind.Variable})):t(n.item).length?[{label:"/delete-node/",insertText:"/delete-node/$1;",kind:ct.CompletionItemKind.Keyword,insertTextFormat:ct.InsertTextFormat.Snippet,sortText:"~"}]:[]}function L_(n,e){if(!n||!(n.item instanceof be))return[];let t=i=>[...i.properties,...i.deletedProperties.filter(r=>!e(r.by)).map(r=>r.property)].flatMap(r=>[r,...r.allReplaced]).filter(r=>e(r.ast));return n.ast instanceof Ne||n.ast instanceof Ce?Array.from(new Set(t(n.item).map(i=>i.name))).map(i=>({label:`${i}`,kind:ct.CompletionItemKind.Variable})):t(n.item).length?[{label:"/delete-property/",insertText:"/delete-property/$1;",kind:ct.CompletionItemKind.Keyword,sortText:"~",insertTextFormat:ct.InsertTextFormat.Snippet}]:[]}function x_(n,e){let t=n?.ast instanceof Mn?n.ast:n?.ast.parentNode;if(!n||!t||!(t instanceof Mn))return[];let i=t.pathParts.slice(0,-1);if(i.some(o=>!o))return[];let r=i.map(o=>o.toString());return(()=>{let o=n.runtime.rootNode.getChildFromScope(["/",...r],e);return[...o?.nodes.filter(a=>!ot(n.ast)||a.definitions.some(e))??[],...o?.deletedNodes.filter(a=>!e(a.by)).map(a=>a.node)??[]].map(a=>a.fullName)??[]})().map(o=>({label:`/${[...r,o].join("/")}`,kind:ct.CompletionItemKind.Variable}))}async function UT(n,e,t){return St(n,e,(i,r)=>[...L_(i,r),...I_(i,r),...A_(i,r),...x_(i,r),...O_(i,r),...C_(i,r)],t)}var Bi=X(te());function M_(n){if(!n||n.item===null||!(n.ast instanceof Ne))return[];let e=i=>i.replacedBy?e(i.replacedBy):i,t=i=>[i.ast,...i.allReplaced.map(r=>r.ast),i.parent.deletedProperties.find(r=>r.property=i)?.by??[]].map(r=>{if(r instanceof Le)return Bi.Location.create(`file://${r.uri}`,ne(r.propertyName??r));if(r instanceof Ce)return Bi.Location.create(`file://${r.uri}`,ne(r.propertyName??r))}).filter(r=>r);if(n.item instanceof Ke&&n.ast instanceof Ne)return t(e(n.item));if(n.item instanceof be&&n.ast instanceof Ne&&n.ast.parentNode instanceof Ce){let i=n.item.deletedProperties.find(r=>r.by===n.ast.parentNode)?.property;if(i)return t(i)}return[]}function q_(n){if(!n||!(n.ast instanceof we)&&!(n.ast instanceof at))return[];let e=t=>[...t.linkedRefLabels,...t.linkedNodeNamePaths,...t.definitions].map(i=>{if(i instanceof he)return Bi.Location.create(`file://${i.uri}`,ne(i.name??i));if(i instanceof we)return Bi.Location.create(`file://${i.uri}`,ne(i));if(i instanceof pe)return Bi.Location.create(`file://${i.uri}`,ne(i.label??i))}).filter(i=>i);return n.item instanceof be&&!ot(n.ast)?e(n.item):n.ast instanceof at&&n.ast.parentNode instanceof pe&&n.ast.parentNode.linksTo?e(n.ast.parentNode.linksTo):n.ast instanceof we&&n.ast.linksTo?ot(n.ast)?[...e(n.ast.linksTo),Bi.Location.create(`file://${n.ast.uri}`,ne(n.ast))]:e(n.ast.linksTo):[]}async function $T(n,e,t){return St(n,e,i=>[...q_(i),...M_(i)],t)}var fi=X(te());function WT(n){if(!n||n.item===null||!(n.ast instanceof Ne))return[];let e=i=>i.replacedBy?e(i.replacedBy):i,t=i=>[i.ast,...i.allReplaced.map(r=>r.ast),i.parent.deletedProperties.find(r=>r.property=i)?.by??[]].map(r=>{if((r instanceof Le||r instanceof Ce)&&r.propertyName)return fi.Location.create(`file://${r.uri}`,ne(r.propertyName))}).filter(r=>r);if(n.item instanceof Ke&&n.ast instanceof Ne)return t(e(n.item));if(n.item instanceof be&&n.ast instanceof Ne&&n.ast.parentNode instanceof Ce){let i=n.item.deletedProperties.find(r=>r.by===n.ast.parentNode)?.property;if(i)return t(i)}return[]}function VT(n,e){if(!e||!(e.ast instanceof at))return[];"newName"in n&&(e.ast.parentNode instanceof pe&&n.newName.startsWith("&")?n.newName=n.newName.slice(1):e.ast.parentNode instanceof ai&&n.newName.endsWith(":")&&(n.newName=n.newName.slice(0,-1)));let t=e.ast.value,i=r=>[...r.definitions.filter(s=>s instanceof he).flatMap(s=>s.labels.map(o=>o.label)),...r.linkedRefLabels.map(s=>s.label)].filter(s=>s?.value===t).map(s=>{if(s)return fi.Location.create(`file://${s.uri}`,ne(s))}).filter(s=>s);return e.item instanceof be&&!ot(e.ast)?i(e.item):e.ast instanceof at&&e.ast.parentNode instanceof pe&&e.ast.parentNode.linksTo?i(e.ast.parentNode.linksTo):[]}function HT(n){if(!n||!(n.ast instanceof we))return[];let e=t=>[...t.linkedNodeNamePaths,...t.definitions].map(i=>{if(i instanceof he&&i.name)return fi.Location.create(`file://${i.uri}`,ne(i.name));if(i instanceof we)return fi.Location.create(`file://${i.uri}`,ne(i))}).filter(i=>i);return n.item instanceof be&&!ot(n.ast)?e(n.item):n.ast instanceof we&&n.ast.linksTo?ot(n.ast)?[...e(n.ast.linksTo),fi.Location.create(`file://${n.ast.uri}`,ne(n.ast))]:e(n.ast.linksTo):[]}async function YT(n,e,t){let i={};return(await St(n,e,s=>[...HT(s),...VT(n,s),...WT(s)],t)).forEach(s=>{i[s.uri]??=[],i[s.uri].push(fi.TextEdit.replace(s.range,n.newName))}),{changes:i}}async function KT(n,e,t,i){let r=await St(n,e,s=>[...HT(s),...VT(n,s),...WT(s)],i);if(r.some(s=>t.some(o=>s.uri.replace("file://","").startsWith(o))))throw new Error('Path is locked by user setting "lockRenameEdits"');return{defaultBehavior:!!r.length}}var Cc=X(te());function F_(n){if(!n||n.item===null||!(n.ast instanceof Ne))return[];let e=i=>i.replacedBy?e(i.replacedBy):i,t=i=>[i.ast,...i.allReplaced.map(r=>r.ast)].map(r=>{if(r instanceof Le)return Cc.Location.create(`file://${r.uri}`,ne(r.propertyName??r))}).filter(r=>r);if(n.item instanceof Ke&&n.ast instanceof Ne)return t(e(n.item));if(n.item instanceof be&&n.ast instanceof Ne&&n.ast.parentNode instanceof Ce){let i=n.item.deletedProperties.find(r=>r.by===n.ast.parentNode)?.property;if(i)return t(i)}return[]}function B_(n){if(!n||!(n.ast instanceof we)&&!(n.ast instanceof at))return[];let e=t=>[...t.definitions,...t.referencedBy].map(i=>{if(i instanceof he)return Cc.Location.create(`file://${i.uri}`,ne(i));if(i instanceof et)return Cc.Location.create(`file://${i.uri}`,ne(i))}).filter(i=>i);return n.item instanceof be&&!ot(n.ast)?e(n.item):n.ast instanceof at&&n.ast.parentNode instanceof pe&&n.ast.parentNode.linksTo?e(n.ast.parentNode.linksTo):n.ast instanceof we&&n.ast.linksTo?e(n.ast.linksTo):[]}async function zT(n,e,t){return St(n,e,i=>[...B_(i),...F_(i)],t)}var ad=X(te());function j_(n){if(!n||n.item===null||!(n.ast instanceof Ne))return;let e=i=>i.replaces?e(i.replaces):i,t=i=>ad.Location.create(`file://${i.ast.uri}`,ne(i.ast.propertyName??i.ast));if(n.item instanceof Ke&&n.ast instanceof Ne)return t(e(n.item));if(n.item instanceof be&&n.ast instanceof Ne&&n.ast.parentNode instanceof Ce){let i=n.item.deletedProperties.find(r=>r.by===n.ast.parentNode)?.property;if(i)return t(e(i))}}function U_(n){if(!n||!(n.ast instanceof we)&&!(n.ast instanceof at))return;let e=t=>{let i=t.definitions.at(0);return i?ad.Location.create(`file://${i.uri}`,ne(i)):void 0};if(n.item instanceof be&&!ot(n.ast))return e(n.item);if(n.ast instanceof at&&n.ast.parentNode instanceof pe&&n.ast.parentNode.linksTo)return e(n.ast.parentNode.linksTo);if(n.ast instanceof we&&n.ast.linksTo)return e(n.ast.linksTo)}async function GT(n,e,t){return(await St(n,e,i=>[U_(i)||j_(i)],t)).at(0)}var J=X(te());var $_=(n,e,t,i,r)=>{switch(t){case 1:return[{title:"Add semicolon",diagnostics:[i],kind:J.CodeActionKind.SourceFixAll,isPreferred:!0,edit:{changes:{[r]:[J.TextEdit.insert(J.Position.create(i.range.end.line,i.range.end.character),";")]}}}];case 2:return[{title:"Add open curly",diagnostics:[i],kind:J.CodeActionKind.SourceFixAll,isPreferred:!0,edit:{changes:{[r]:[J.TextEdit.insert(J.Position.create(i.range.end.line,i.range.end.character)," {")]}}}];case 34:return[{title:"Remove white space",diagnostics:[i],kind:J.CodeActionKind.SourceFixAll,isPreferred:!0,edit:{changes:{[r]:[J.TextEdit.replace(J.Range.create(J.Position.create(i.range.start.line,n.pos.col+n.pos.len),J.Position.create(i.range.end.line,e.pos.col)),"")]}}}];case 3:return[{title:"Add close curly",diagnostics:[i],kind:J.CodeActionKind.QuickFix,isPreferred:!0,edit:{changes:{[r]:[J.TextEdit.insert(J.Position.create(i.range.end.line,i.range.end.character),"}")]}}}];case 23:return[{title:"Add '/'",diagnostics:[i],kind:J.CodeActionKind.QuickFix,isPreferred:!0,edit:{changes:{[r]:[J.TextEdit.insert(J.Position.create(i.range.end.line,i.range.end.character),"/")]}}}];case 33:return[{title:"Add comma",diagnostics:[i],kind:J.CodeActionKind.SourceFixAll,isPreferred:!0,edit:{changes:{[r]:[J.TextEdit.insert(J.Position.create(i.range.end.line,i.range.end.character),",")]}}}];case 25:return[{title:"Add '/'",diagnostics:[i],kind:J.CodeActionKind.SourceFixAll,isPreferred:!0,edit:{changes:{[r]:[J.TextEdit.insert(J.Position.create(i.range.end.line,i.range.end.character),"/")]}}}];case 27:return[{title:"Remove ';'",diagnostics:[i],kind:J.CodeActionKind.SourceFixAll,isPreferred:!0,edit:{changes:{[r]:[J.TextEdit.del(i.range)]}}}];case 40:return[{title:"Complete Keyword '/delete-node/",diagnostics:[i],kind:J.CodeActionKind.SourceFixAll,isPreferred:!0,edit:{changes:{[r]:[J.TextEdit.replace(i.range,"/delete-node/")]}}}];case 41:return[{title:"Complete Keyword '/delete-property/",diagnostics:[i],kind:J.CodeActionKind.SourceFixAll,isPreferred:!0,edit:{changes:{[r]:[J.TextEdit.replace(i.range,"/delete-property/")]}}}];case 29:return[{title:"Complete Keyword '/delete-property/",diagnostics:[i],kind:J.CodeActionKind.QuickFix,isPreferred:!0,edit:{changes:{[r]:[J.TextEdit.replace(i.range,"/delete-property/")]}}},{title:"Complete Keyword '/delete-node/",diagnostics:[i],kind:J.CodeActionKind.QuickFix,isPreferred:!0,edit:{changes:{[r]:[J.TextEdit.replace(i.range,"/delete-node/")]}}}];case 15:return[{title:"Add '>'",diagnostics:[i],kind:J.CodeActionKind.SourceFixAll,isPreferred:!0,edit:{changes:{[r]:[J.TextEdit.insert(J.Position.create(i.range.end.line,i.range.end.character),">")]}}}];default:return}};function XT(n){let e=n.context.diagnostics.flatMap(s=>{let o=s.data;return o?.issues.flatMap(a=>$_(o.firstToken,o.lastToken,a,s,n.textDocument.uri))}).filter(s=>!!s),t=e.filter(s=>s.kind===J.CodeActionKind.SourceFixAll),i=e.filter(s=>s.kind!==J.CodeActionKind.SourceFixAll),r=t.flatMap(s=>s.edit?.changes?.[n.textDocument.uri]??[]);return[...i,...t.map(s=>({...s,kind:J.CodeActionKind.QuickFix})),...r.length?[{title:"Fix All",kind:J.CodeActionKind.SourceFixAll,isPreferred:!0,edit:{changes:{[n.textDocument.uri]:r}}}]:[]]}var $e=X(te());function QT(n,e){let t=e.find(i=>i.parser.uri===n.textDocument.uri.replace("file://",""));return t?t.parser.allAstItems.flatMap(i=>JT(n,i)):[]}var Or=(n,e=1)=>{if(n.prevToken){let t=n.pos.line-n.prevToken.pos.line;if(t-e&&(t!==2&&e!==0||e===0))return $e.TextEdit.replace($e.Range.create($e.Position.create(n.prevToken.pos.line,n.prevToken.pos.col+n.prevToken.pos.len),$e.Position.create(n.pos.line-e,n.pos.col)),"".padEnd(e-1,`
`))}},Oc=(n,e,t)=>{let i=n.options.tabSize,r=t*i;if(e.pos.line===e.prevToken?.pos.line)return $e.TextEdit.replace($e.Range.create($e.Position.create(e.pos.line,e.pos.col),$e.Position.create(e.pos.line,e.pos.col)),`
${"".padStart(r," ")}`)},Ar=(n,e)=>$e.TextEdit.replace($e.Range.create($e.Position.create(n.pos.line,0),$e.Position.create(n.pos.line,n.pos.col)),"".padStart(e," ")),yt=(n,e=1)=>{if(!n.nextToken)return[];if(n.nextToken?.pos.line!==n.pos.line){let i=Or(n.nextToken,0);if(!i)throw new Error("remove new LinesEdit must be defined");return[$e.TextEdit.insert($e.Position.create(n.pos.line,n.pos.col+n.pos.len),"".padEnd(e," ")),i]}return n.nextToken.pos.col-(n.pos.col+n.pos.len)===e?[]:[$e.TextEdit.replace($e.Range.create($e.Position.create(n.pos.line,n.pos.col+n.pos.len),$e.Position.create(n.nextToken.pos.line,n.nextToken.pos.col)),"".padEnd(e," "))]},W_=(n,e,t)=>{let i=[],r=n.options.tabSize,s=t*r,o=Oc(n,e.firstToken,t);if(o)i.push(o);else{i.push(Ar(e.firstToken,s));let c=Or(e.firstToken);c&&i.push(c)}if(e instanceof he||e instanceof et)if(i.push(...e.labels.flatMap(c=>yt(c.lastToken))),e instanceof he){let c=e.name&&e.openScope?yt(e.name.lastToken):[];i.push(...c)}else{let c=e.labelReference&&e.openScope?yt(e.labelReference.lastToken):[];i.push(...c)}if(i.push(...e.children.flatMap(c=>JT(n,c,t+1))),e.closeScope){let c=Oc(n,e.closeScope,t);if(c)i.push(c);else{i.push(Ar(e.closeScope,s));let l=Or(e.closeScope);l&&i.push(l)}}let a=e.lastToken.value===";"&&e.lastToken.prevToken?yt(e.lastToken.prevToken,0):[];return i.push(...a),i},V_=(n,e,t,i)=>{let r=[],s=n.options.tabSize;if(e.firstToken.prevToken&&e.firstToken.pos.line===e.firstToken.prevToken.pos.line)r.push(...yt(e.firstToken.prevToken,i===0?0:1));else if(e.firstToken.pos.line!==e.firstToken.prevToken?.pos.line){let o=Or(e.firstToken);o&&r.push(o),r.push(Ar(e.firstToken,(t+1)*s))}return e.value,r},H_=(n,e,t)=>{let i=[];if(e instanceof Ye||e instanceof si){i.push(...e.values.flatMap((s,o)=>V_(n,s,t,o)));let r=e.values.at(-1);r?.lastToken&&i.push(...yt(r.lastToken,0))}return i},Y_=(n,e,t)=>{let i=n.options.tabSize,r=[];if(e.firstToken.prevToken?.value===",")if(e.firstToken.prevToken.pos.line===e.firstToken.pos.line)r.push(...yt(e.firstToken.prevToken,1));else{let s=Or(e.firstToken);s&&r.push(s),r.push(Ar(e.firstToken,(t+1)*i))}return e.lastToken.nextToken?.value===","&&r.push(...yt(e.lastToken,0)),r.push(...H_(n,e.value,t)),r.push(...e.endLabels.flatMap(s=>yt(s.lastToken))),r},K_=(n,e,t)=>[...e.labels.flatMap(i=>yt(i.lastToken)),...e.values.flatMap(i=>i?Y_(n,i,t):[])],z_=(n,e,t)=>{let i=[],r=n.options.tabSize,s=t*r,o=Oc(n,e.firstToken,t);if(o)i.push(o);else{i.push(Ar(e.firstToken,s));let c=Or(e.firstToken);c&&i.push(c)}i.push(...e.labels.flatMap(c=>yt(c.lastToken))),e.values&&(e.propertyName&&(i.push(...yt(e.propertyName?.lastToken)),e.propertyName?.lastToken.nextToken?.value==="="&&i.push(...yt(e.propertyName?.lastToken.nextToken))),i.push(...K_(n,e.values,t)));let a=e.lastToken.value===";"&&e.lastToken.prevToken?yt(e.lastToken.prevToken,0):[];return i.push(...a),i},G_=(n,e,t)=>{let i=[],r=n.options.tabSize,s=t*r,o=Oc(n,e.firstToken,t);o?i.push(o):i.push(Ar(e.firstToken,s));let a=yt(e.keyword.lastToken);i.push(...a);let c=e.lastToken.value===";"&&e.lastToken.prevToken?yt(e.lastToken.prevToken,0):[];return i.push(...c),i},JT=(n,e,t=0)=>{let i=n.options.tabSize,r=t*i;return e instanceof xe?W_(n,e,t):e instanceof Le?z_(n,e,t):e instanceof bn?G_(n,e,t):[]};var ZT=X(te());function X_(n){return!n||!(n.item instanceof Ke)||!(n.ast instanceof Le&&(n.ast.values||n.ast.values===null))?[]:n.item.parent.nodeType?.properties.find(e=>e.name===n.item?.name)?.getPropertyCompletionItems(n.item)??[]}function Q_(n){if(!n||!(n.item instanceof Ke&&n.ast instanceof Ne&&n.item.ast.values===null||n.item instanceof be)||ot(n.ast))return[];let e=t=>t.nodeType?.properties.filter(i=>!i.hideAutoComplete&&i.required(t)!=="omitted"&&typeof i.name=="string").map(i=>{let r=t&&i.required(t),s=!!t.properties.some(a=>i.getNameMatch(a.name)),o="a";return r?o=s?"Y":"A":o=s?"Z":"B",{label:`${i.name}`,kind:ZT.CompletionItemKind.Property,sortText:`${o}${i.name}`}})??[];return n.item instanceof Ke?e(n.item.parent):e(n.item)}async function ev(n,e,t){return St(n,e,i=>[...X_(i),...Q_(i)],t)}function J_(n){if(n?.item instanceof be)return{contents:n.item.toMarkupContent(),range:ne(n.ast)};if(n?.ast instanceof we){let e=n.ast.linksTo;if(e)return{contents:e.toMarkupContent(),range:ne(n.ast)}}if(n?.ast.parentNode instanceof pe){let e=n.ast.parentNode.linksTo;if(e)return{contents:e.toMarkupContent(),range:ne(n.ast)}}}function Z_(n){if(n?.item instanceof Ke&&n.ast instanceof Ne){let e=n.item.parent.nodeType?.getOnPropertyHover(n.item.name);if(e)return{contents:e,range:ne(n.ast)}}}function tv(n,e,t){return St(n,e,i=>[J_(i)||Z_(i)],t)}var YE=X(Wk());var uE=X(nE(),1);var ro=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>65536)throw new TypeError("pattern is too long")};var OO={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},so=n=>n.replace(/[[\]\\-]/g,"\\$&"),AO=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),iE=n=>n.join(""),rE=(n,e)=>{let t=e;if(n.charAt(t)!=="[")throw new Error("not in a brace expression");let i=[],r=[],s=t+1,o=!1,a=!1,c=!1,l=!1,u=t,d="";e:for(;s<n.length;){let b=n.charAt(s);if((b==="!"||b==="^")&&s===t+1){l=!0,s++;continue}if(b==="]"&&o&&!c){u=s+1;break}if(o=!0,b==="\\"&&!c){c=!0,s++;continue}if(b==="["&&!c){for(let[N,[R,v,T]]of Object.entries(OO))if(n.startsWith(N,s)){if(d)return["$.",!1,n.length-t,!0];s+=N.length,T?r.push(R):i.push(R),a=a||v;continue e}}if(c=!1,d){b>d?i.push(so(d)+"-"+so(b)):b===d&&i.push(so(b)),d="",s++;continue}if(n.startsWith("-]",s+1)){i.push(so(b+"-")),s+=2;continue}if(n.startsWith("-",s+1)){d=b,s+=2;continue}i.push(so(b)),s++}if(u<s)return["",!1,0,!1];if(!i.length&&!r.length)return["$.",!1,n.length-t,!0];if(r.length===0&&i.length===1&&/^\\?.$/.test(i[0])&&!l){let b=i[0].length===2?i[0].slice(-1):i[0];return[AO(b),!1,u-t,!1]}let p="["+(l?"^":"")+iE(i)+"]",g="["+(l?"":"^")+iE(r)+"]";return[i.length&&r.length?"("+p+"|"+g+")":i.length?p:g,a,u-t,!0]};var ln=(n,{windowsPathsNoEscape:e=!1}={})=>e?n.replace(/\[([^\/\\])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var IO=new Set(["!","?","+","*","@"]),sE=n=>IO.has(n),LO="(?!(?:^|/)\\.\\.?(?:$|/))",Rl="(?!\\.)",xO=new Set(["[","."]),MO=new Set(["..","."]),qO=new Set("().*{}+?[]^$\\!"),FO=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Vh="[^/]",oE=Vh+"*?",aE=Vh+"+?",Wr=class n{type;#e;#t;#s=!1;#i=[];#o;#v;#l;#f=!1;#a;#c;#r=!1;constructor(e,t,i={}){this.type=e,e&&(this.#t=!0),this.#o=t,this.#e=this.#o?this.#o.#e:this,this.#a=this.#e===this?i:this.#e.#a,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#f&&this.#l.push(this),this.#v=this.#o?this.#o.#i.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#i)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#i.map(e=>String(e)).join("|")+")":this.#c=this.#i.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#f)return this;this.toString(),this.#f=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let t=e,i=t.#o;for(;i;){for(let r=t.#v+1;!i.type&&r<i.#i.length;r++)for(let s of e.#i){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(i.#i[r])}t=i,i=t.#o}}return this}push(...e){for(let t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof n&&t.#o===this))throw new Error("invalid part: "+t);this.#i.push(t)}}toJSON(){let e=this.type===null?this.#i.slice().map(t=>typeof t=="string"?t:t.toJSON()):[this.type,...this.#i.map(t=>t.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#f&&this.#o?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#o?.isStart())return!1;if(this.#v===0)return!0;let e=this.#o;for(let t=0;t<this.#v;t++){let i=e.#i[t];if(!(i instanceof n&&i.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#o?.type==="!")return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();let e=this.#o?this.#o.#i.length:0;return this.#v===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let t=new n(this.type,e);for(let i of this.#i)t.copyIn(i);return t}static#y(e,t,i,r){let s=!1,o=!1,a=-1,c=!1;if(t.type===null){let g=i,_="";for(;g<e.length;){let b=e.charAt(g++);if(s||b==="\\"){s=!s,_+=b;continue}if(o){g===a+1?(b==="^"||b==="!")&&(c=!0):b==="]"&&!(g===a+2&&c)&&(o=!1),_+=b;continue}else if(b==="["){o=!0,a=g,c=!1,_+=b;continue}if(!r.noext&&sE(b)&&e.charAt(g)==="("){t.push(_),_="";let N=new n(b,t);g=n.#y(e,N,g,r),t.push(N);continue}_+=b}return t.push(_),g}let l=i+1,u=new n(null,t),d=[],p="";for(;l<e.length;){let g=e.charAt(l++);if(s||g==="\\"){s=!s,p+=g;continue}if(o){l===a+1?(g==="^"||g==="!")&&(c=!0):g==="]"&&!(l===a+2&&c)&&(o=!1),p+=g;continue}else if(g==="["){o=!0,a=l,c=!1,p+=g;continue}if(sE(g)&&e.charAt(l)==="("){u.push(p),p="";let _=new n(g,u);u.push(_),l=n.#y(e,_,l,r);continue}if(g==="|"){u.push(p),p="",d.push(u),u=new n(null,t);continue}if(g===")")return p===""&&t.#i.length===0&&(t.#r=!0),u.push(p),p="",t.push(...d,u),l;p+=g}return t.type=null,t.#t=void 0,t.#i=[e.substring(i-1)],l}static fromGlob(e,t={}){let i=new n(null,void 0,t);return n.#y(e,i,0,t),i}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[t,i,r,s]=this.toRegExpSource();if(!(r||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return i;let a=(this.#a.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${t}$`,a),{_src:t,_glob:e})}get options(){return this.#a}toRegExpSource(e){let t=e??!!this.#a.dot;if(this.#e===this&&this.#g(),!this.type){let c=this.isStart()&&this.isEnd(),l=this.#i.map(g=>{let[_,b,N,R]=typeof g=="string"?n.#d(g,this.#t,c):g.toRegExpSource(e);return this.#t=this.#t||N,this.#s=this.#s||R,_}).join(""),u="";if(this.isStart()&&typeof this.#i[0]=="string"&&!(this.#i.length===1&&MO.has(this.#i[0]))){let _=xO,b=t&&_.has(l.charAt(0))||l.startsWith("\\.")&&_.has(l.charAt(2))||l.startsWith("\\.\\.")&&_.has(l.charAt(4)),N=!t&&!e&&_.has(l.charAt(0));u=b?LO:N?Rl:""}let d="";return this.isEnd()&&this.#e.#f&&this.#o?.type==="!"&&(d="(?:$|\\/)"),[u+l+d,ln(l),this.#t=!!this.#t,this.#s]}let i=this.type==="*"||this.type==="+",r=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#h(t);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let c=this.toString();return this.#i=[c],this.type=null,this.#t=void 0,[c,ln(this.toString()),!1,!1]}let o=!i||e||t||!Rl?"":this.#h(!0);o===s&&(o=""),o&&(s=`(?:${s})(?:${o})*?`);let a="";if(this.type==="!"&&this.#r)a=(this.isStart()&&!t?Rl:"")+aE;else{let c=this.type==="!"?"))"+(this.isStart()&&!t&&!e?Rl:"")+oE+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=r+s+c}return[a,ln(s),this.#t=!!this.#t,this.#s]}#h(e){return this.#i.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");let[i,r,s,o]=t.toRegExpSource(e);return this.#s=this.#s||o,i}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#d(e,t,i=!1){let r=!1,s="",o=!1;for(let a=0;a<e.length;a++){let c=e.charAt(a);if(r){r=!1,s+=(qO.has(c)?"\\":"")+c;continue}if(c==="\\"){a===e.length-1?s+="\\\\":r=!0;continue}if(c==="["){let[l,u,d,p]=rE(e,a);if(d){s+=l,o=o||u,a+=d-1,t=t||p;continue}}if(c==="*"){i&&e==="*"?s+=aE:s+=oE,t=!0;continue}if(c==="?"){s+=Vh,t=!0;continue}s+=FO(c)}return[s,ln(e),!!t,o]}};var Vr=(n,{windowsPathsNoEscape:e=!1}={})=>e?n.replace(/[?*()[\]]/g,"[$&]"):n.replace(/[?*()[\]\\]/g,"\\$&");var Nt=(n,e,t={})=>(ro(e),!t.nocomment&&e.charAt(0)==="#"?!1:new qt(e,t).match(n)),BO=/^\*+([^+@!?\*\[\(]*)$/,jO=n=>e=>!e.startsWith(".")&&e.endsWith(n),UO=n=>e=>e.endsWith(n),$O=n=>(n=n.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(n)),WO=n=>(n=n.toLowerCase(),e=>e.toLowerCase().endsWith(n)),VO=/^\*+\.\*+$/,HO=n=>!n.startsWith(".")&&n.includes("."),YO=n=>n!=="."&&n!==".."&&n.includes("."),KO=/^\.\*+$/,zO=n=>n!=="."&&n!==".."&&n.startsWith("."),GO=/^\*+$/,XO=n=>n.length!==0&&!n.startsWith("."),QO=n=>n.length!==0&&n!=="."&&n!=="..",JO=/^\?+([^+@!?\*\[\(]*)?$/,ZO=([n,e=""])=>{let t=fE([n]);return e?(e=e.toLowerCase(),i=>t(i)&&i.toLowerCase().endsWith(e)):t},e0=([n,e=""])=>{let t=dE([n]);return e?(e=e.toLowerCase(),i=>t(i)&&i.toLowerCase().endsWith(e)):t},t0=([n,e=""])=>{let t=dE([n]);return e?i=>t(i)&&i.endsWith(e):t},n0=([n,e=""])=>{let t=fE([n]);return e?i=>t(i)&&i.endsWith(e):t},fE=([n])=>{let e=n.length;return t=>t.length===e&&!t.startsWith(".")},dE=([n])=>{let e=n.length;return t=>t.length===e&&t!=="."&&t!==".."},hE=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",cE={win32:{sep:"\\"},posix:{sep:"/"}},i0=hE==="win32"?cE.win32.sep:cE.posix.sep;Nt.sep=i0;var ut=Symbol("globstar **");Nt.GLOBSTAR=ut;var r0="[^/]",s0=r0+"*?",o0="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",a0="(?:(?!(?:\\/|^)\\.).)*?",c0=(n,e={})=>t=>Nt(t,n,e);Nt.filter=c0;var Gt=(n,e={})=>Object.assign({},n,e),l0=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return Nt;let e=Nt;return Object.assign((i,r,s={})=>e(i,r,Gt(n,s)),{Minimatch:class extends e.Minimatch{constructor(r,s={}){super(r,Gt(n,s))}static defaults(r){return e.defaults(Gt(n,r)).Minimatch}},AST:class extends e.AST{constructor(r,s,o={}){super(r,s,Gt(n,o))}static fromGlob(r,s={}){return e.AST.fromGlob(r,Gt(n,s))}},unescape:(i,r={})=>e.unescape(i,Gt(n,r)),escape:(i,r={})=>e.escape(i,Gt(n,r)),filter:(i,r={})=>e.filter(i,Gt(n,r)),defaults:i=>e.defaults(Gt(n,i)),makeRe:(i,r={})=>e.makeRe(i,Gt(n,r)),braceExpand:(i,r={})=>e.braceExpand(i,Gt(n,r)),match:(i,r,s={})=>e.match(i,r,Gt(n,s)),sep:e.sep,GLOBSTAR:ut})};Nt.defaults=l0;var pE=(n,e={})=>(ro(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:(0,uE.default)(n));Nt.braceExpand=pE;var u0=(n,e={})=>new qt(n,e).makeRe();Nt.makeRe=u0;var f0=(n,e,t={})=>{let i=new qt(e,t);return n=n.filter(r=>i.match(r)),i.options.nonull&&!n.length&&n.push(e),n};Nt.match=f0;var lE=/[?*]|[+@!]\(.*?\)|\[|\]/,d0=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),qt=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){ro(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||hE,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let i=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(i),this.debug(this.pattern,this.globParts);let r=this.globParts.map((s,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=s[0]===""&&s[1]===""&&(s[2]==="?"||!lE.test(s[2]))&&!lE.test(s[3]),l=/^[a-z]:/i.test(s[0]);if(c)return[...s.slice(0,4),...s.slice(4).map(u=>this.parse(u))];if(l)return[s[0],...s.slice(1).map(u=>this.parse(u))]}return s.map(c=>this.parse(c))});if(this.debug(this.pattern,r),this.set=r.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let o=this.set[s];o[0]===""&&o[1]===""&&this.globParts[s][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let i=0;i<e.length;i++)for(let r=0;r<e[i].length;r++)e[i][r]==="**"&&(e[i][r]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let i=-1;for(;(i=t.indexOf("**",i+1))!==-1;){let r=i;for(;t[r+1]==="**";)r++;r!==i&&t.splice(i,r-i)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((i,r)=>{let s=i[i.length-1];return r==="**"&&s==="**"?i:r===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(i.pop(),i):(i.push(r),i)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let r=1;r<e.length-1;r++){let s=e[r];r===1&&s===""&&e[0]===""||(s==="."||s==="")&&(t=!0,e.splice(r,1),r--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let i=0;for(;(i=e.indexOf("..",i+1))!==-1;){let r=e[i-1];r&&r!=="."&&r!==".."&&r!=="**"&&(t=!0,e.splice(i-1,2),i-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let i of e){let r=-1;for(;(r=i.indexOf("**",r+1))!==-1;){let o=r;for(;i[o+1]==="**";)o++;o>r&&i.splice(r+1,o-r);let a=i[r+1],c=i[r+2],l=i[r+3];if(a!==".."||!c||c==="."||c===".."||!l||l==="."||l==="..")continue;t=!0,i.splice(r,1);let u=i.slice(0);u[r]="**",e.push(u),r--}if(!this.preserveMultipleSlashes){for(let o=1;o<i.length-1;o++){let a=i[o];o===1&&a===""&&i[0]===""||(a==="."||a==="")&&(t=!0,i.splice(o,1),o--)}i[0]==="."&&i.length===2&&(i[1]==="."||i[1]==="")&&(t=!0,i.pop())}let s=0;for(;(s=i.indexOf("..",s+1))!==-1;){let o=i[s-1];if(o&&o!=="."&&o!==".."&&o!=="**"){t=!0;let c=s===1&&i[s+1]==="**"?["."]:[];i.splice(s-1,2,...c),i.length===0&&i.push(""),s-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let i=t+1;i<e.length;i++){let r=this.partsMatch(e[t],e[i],!this.preserveMultipleSlashes);if(r){e[t]=[],e[i]=r;break}}return e.filter(t=>t.length)}partsMatch(e,t,i=!1){let r=0,s=0,o=[],a="";for(;r<e.length&&s<t.length;)if(e[r]===t[s])o.push(a==="b"?t[s]:e[r]),r++,s++;else if(i&&e[r]==="**"&&t[s]===e[r+1])o.push(e[r]),r++;else if(i&&t[s]==="**"&&e[r]===t[s+1])o.push(t[s]),s++;else if(e[r]==="*"&&t[s]&&(this.options.dot||!t[s].startsWith("."))&&t[s]!=="**"){if(a==="b")return!1;a="a",o.push(e[r]),r++,s++}else if(t[s]==="*"&&e[r]&&(this.options.dot||!e[r].startsWith("."))&&e[r]!=="**"){if(a==="a")return!1;a="b",o.push(t[s]),r++,s++}else return!1;return e.length===t.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,i=0;for(let r=0;r<e.length&&e.charAt(r)==="!";r++)t=!t,i++;i&&(this.pattern=e.slice(i)),this.negate=t}matchOne(e,t,i=!1){let r=this.options;if(this.isWindows){let b=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),N=!b&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),R=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),v=!R&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),T=N?3:b?0:void 0,w=v?3:R?0:void 0;if(typeof T=="number"&&typeof w=="number"){let[L,M]=[e[T],t[w]];L.toLowerCase()===M.toLowerCase()&&(t[w]=L,w>T?t=t.slice(w):T>w&&(e=e.slice(T)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,a=0,c=e.length,l=t.length;o<c&&a<l;o++,a++){this.debug("matchOne loop");var u=t[a],d=e[o];if(this.debug(t,u,d),u===!1)return!1;if(u===ut){this.debug("GLOBSTAR",[t,u,d]);var p=o,g=a+1;if(g===l){for(this.debug("** at the end");o<c;o++)if(e[o]==="."||e[o]===".."||!r.dot&&e[o].charAt(0)===".")return!1;return!0}for(;p<c;){var _=e[p];if(this.debug(`
globstar while`,e,p,t,g,_),this.matchOne(e.slice(p),t.slice(g),i))return this.debug("globstar found match!",p,c,_),!0;if(_==="."||_===".."||!r.dot&&_.charAt(0)==="."){this.debug("dot detected!",e,p,t,g);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(i&&(this.debug(`
>>> no match, partial?`,e,p,t,g),p===c))}let b;if(typeof u=="string"?(b=d===u,this.debug("string match",u,d,b)):(b=u.test(d),this.debug("pattern match",u,d,b)),!b)return!1}if(o===c&&a===l)return!0;if(o===c)return i;if(a===l)return o===c-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return pE(this.pattern,this.options)}parse(e){ro(e);let t=this.options;if(e==="**")return ut;if(e==="")return"";let i,r=null;(i=e.match(GO))?r=t.dot?QO:XO:(i=e.match(BO))?r=(t.nocase?t.dot?WO:$O:t.dot?UO:jO)(i[1]):(i=e.match(JO))?r=(t.nocase?t.dot?e0:ZO:t.dot?t0:n0)(i):(i=e.match(VO))?r=t.dot?YO:HO:(i=e.match(KO))&&(r=zO);let s=Wr.fromGlob(e,this.options).toMMPattern();return r&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:r}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,i=t.noglobstar?s0:t.dot?o0:a0,r=new Set(t.nocase?["i"]:[]),s=e.map(c=>{let l=c.map(u=>{if(u instanceof RegExp)for(let d of u.flags.split(""))r.add(d);return typeof u=="string"?d0(u):u===ut?ut:u._src});return l.forEach((u,d)=>{let p=l[d+1],g=l[d-1];u!==ut||g===ut||(g===void 0?p!==void 0&&p!==ut?l[d+1]="(?:\\/|"+i+"\\/)?"+p:l[d]=i:p===void 0?l[d-1]=g+"(?:\\/|"+i+")?":p!==ut&&(l[d-1]=g+"(?:\\/|\\/"+i+"\\/)"+p,l[d+1]=ut))}),l.filter(u=>u!==ut).join("/")}).join("|"),[o,a]=e.length>1?["(?:",")"]:["",""];s="^"+o+s+a+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...r].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let i=this.options;this.isWindows&&(e=e.split("\\").join("/"));let r=this.slashSplit(e);this.debug(this.pattern,"split",r);let s=this.set;this.debug(this.pattern,"set",s);let o=r[r.length-1];if(!o)for(let a=r.length-2;!o&&a>=0;a--)o=r[a];for(let a=0;a<s.length;a++){let c=s[a],l=r;if(i.matchBase&&c.length===1&&(l=[o]),this.matchOne(l,c,t))return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}static defaults(e){return Nt.defaults(e).Minimatch}};Nt.AST=Wr;Nt.Minimatch=qt;Nt.escape=Vr;Nt.unescape=ln;var FE=require("node:url");var Hr=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,gE=new Set,Hh=typeof process=="object"&&process?process:{},yE=(n,e,t,i)=>{typeof Hh.emitWarning=="function"?Hh.emitWarning(n,e,t,i):console.error(`[${t}] ${e}: ${n}`)},Cl=globalThis.AbortController,mE=globalThis.AbortSignal;if(typeof Cl>"u"){mE=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(i,r){this._onabort.push(r)}},Cl=class{constructor(){e()}signal=new mE;abort(i){if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(let r of this.signal._onabort)r(i);this.signal.onabort?.(i)}}};let n=Hh.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{n&&(n=!1,yE("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var h0=n=>!gE.has(n),R$=Symbol("type"),Si=n=>n&&n===Math.floor(n)&&n>0&&isFinite(n),bE=n=>Si(n)?n<=Math.pow(2,8)?Uint8Array:n<=Math.pow(2,16)?Uint16Array:n<=Math.pow(2,32)?Uint32Array:n<=Number.MAX_SAFE_INTEGER?Yr:null:null,Yr=class extends Array{constructor(e){super(e),this.fill(0)}},Yh=class n{heap;length;static#e=!1;static create(e){let t=bE(e);if(!t)return[];n.#e=!0;let i=new n(e,t);return n.#e=!1,i}constructor(e,t){if(!n.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},oo=class n{#e;#t;#s;#i;#o;#v;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#f;#a;#c;#r;#g;#y;#h;#d;#E;#m;#N;#w;#T;#S;#k;#p;static unsafeExposeInternals(e){return{starts:e.#w,ttls:e.#T,sizes:e.#N,keyMap:e.#a,keyList:e.#c,valList:e.#r,next:e.#g,prev:e.#y,get head(){return e.#h},get tail(){return e.#d},free:e.#E,isBackgroundFetch:t=>e.#u(t),backgroundFetch:(t,i,r,s)=>e.#F(t,i,r,s),moveToTail:t=>e.#j(t),indexes:t=>e.#P(t),rindexes:t=>e.#D(t),isStale:t=>e.#b(t)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#f}get size(){return this.#l}get fetchMethod(){return this.#o}get memoMethod(){return this.#v}get dispose(){return this.#s}get disposeAfter(){return this.#i}constructor(e){let{max:t=0,ttl:i,ttlResolution:r=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:p,maxSize:g=0,maxEntrySize:_=0,sizeCalculation:b,fetchMethod:N,memoMethod:R,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:T,allowStaleOnFetchRejection:w,allowStaleOnFetchAbort:L,ignoreFetchAbort:M}=e;if(t!==0&&!Si(t))throw new TypeError("max option must be a nonnegative integer");let H=t?bE(t):Array;if(!H)throw new Error("invalid max value: "+t);if(this.#e=t,this.#t=g,this.maxEntrySize=_||this.#t,this.sizeCalculation=b,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(R!==void 0&&typeof R!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#v=R,N!==void 0&&typeof N!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#o=N,this.#k=!!N,this.#a=new Map,this.#c=new Array(t).fill(void 0),this.#r=new Array(t).fill(void 0),this.#g=new H(t),this.#y=new H(t),this.#h=0,this.#d=0,this.#E=Yh.create(t),this.#l=0,this.#f=0,typeof l=="function"&&(this.#s=l),typeof u=="function"?(this.#i=u,this.#m=[]):(this.#i=void 0,this.#m=void 0),this.#S=!!this.#s,this.#p=!!this.#i,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!w,this.allowStaleOnFetchAbort=!!L,this.ignoreFetchAbort=!!M,this.maxEntrySize!==0){if(this.#t!==0&&!Si(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Si(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#C()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!T,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Si(r)||r===0?r:1,this.ttlAutopurge=!!s,this.ttl=i||0,this.ttl){if(!Si(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#R()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let j="LRU_CACHE_UNBOUNDED";h0(j)&&(gE.add(j),yE("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",j,n))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#R(){let e=new Yr(this.#e),t=new Yr(this.#e);this.#T=e,this.#w=t,this.#A=(s,o,a=Hr.now())=>{if(t[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#b(s)&&this.#O(this.#c[s],"expire")},o+1);c.unref&&c.unref()}},this.#_=s=>{t[s]=e[s]!==0?Hr.now():0},this.#n=(s,o)=>{if(e[o]){let a=e[o],c=t[o];if(!a||!c)return;s.ttl=a,s.start=c,s.now=i||r();let l=s.now-c;s.remainingTTL=a-l}};let i=0,r=()=>{let s=Hr.now();if(this.ttlResolution>0){i=s;let o=setTimeout(()=>i=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#a.get(s);if(o===void 0)return 0;let a=e[o],c=t[o];if(!a||!c)return 1/0;let l=(i||r())-c;return a-l},this.#b=s=>{let o=t[s],a=e[s];return!!a&&!!o&&(i||r())-o>a}}#_=()=>{};#n=()=>{};#A=()=>{};#b=()=>!1;#C(){let e=new Yr(this.#e);this.#f=0,this.#N=e,this.#I=t=>{this.#f-=e[t],e[t]=0},this.#x=(t,i,r,s)=>{if(this.#u(i))return 0;if(!Si(r))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(r=s(i,t),!Si(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return r},this.#L=(t,i,r)=>{if(e[t]=i,this.#t){let s=this.#t-e[t];for(;this.#f>s;)this.#q(!0)}this.#f+=e[t],r&&(r.entrySize=i,r.totalCalculatedSize=this.#f)}}#I=e=>{};#L=(e,t,i)=>{};#x=(e,t,i,r)=>{if(i||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#P({allowStale:e=this.allowStale}={}){if(this.#l)for(let t=this.#d;!(!this.#M(t)||((e||!this.#b(t))&&(yield t),t===this.#h));)t=this.#y[t]}*#D({allowStale:e=this.allowStale}={}){if(this.#l)for(let t=this.#h;!(!this.#M(t)||((e||!this.#b(t))&&(yield t),t===this.#d));)t=this.#g[t]}#M(e){return e!==void 0&&this.#a.get(this.#c[e])===e}*entries(){for(let e of this.#P())this.#r[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#r[e])&&(yield[this.#c[e],this.#r[e]])}*rentries(){for(let e of this.#D())this.#r[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#r[e])&&(yield[this.#c[e],this.#r[e]])}*keys(){for(let e of this.#P()){let t=this.#c[e];t!==void 0&&!this.#u(this.#r[e])&&(yield t)}}*rkeys(){for(let e of this.#D()){let t=this.#c[e];t!==void 0&&!this.#u(this.#r[e])&&(yield t)}}*values(){for(let e of this.#P())this.#r[e]!==void 0&&!this.#u(this.#r[e])&&(yield this.#r[e])}*rvalues(){for(let e of this.#D())this.#r[e]!==void 0&&!this.#u(this.#r[e])&&(yield this.#r[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let i of this.#P()){let r=this.#r[i],s=this.#u(r)?r.__staleWhileFetching:r;if(s!==void 0&&e(s,this.#c[i],this))return this.get(this.#c[i],t)}}forEach(e,t=this){for(let i of this.#P()){let r=this.#r[i],s=this.#u(r)?r.__staleWhileFetching:r;s!==void 0&&e.call(t,s,this.#c[i],this)}}rforEach(e,t=this){for(let i of this.#D()){let r=this.#r[i],s=this.#u(r)?r.__staleWhileFetching:r;s!==void 0&&e.call(t,s,this.#c[i],this)}}purgeStale(){let e=!1;for(let t of this.#D({allowStale:!0}))this.#b(t)&&(this.#O(this.#c[t],"expire"),e=!0);return e}info(e){let t=this.#a.get(e);if(t===void 0)return;let i=this.#r[t],r=this.#u(i)?i.__staleWhileFetching:i;if(r===void 0)return;let s={value:r};if(this.#T&&this.#w){let o=this.#T[t],a=this.#w[t];if(o&&a){let c=o-(Hr.now()-a);s.ttl=c,s.start=Date.now()}}return this.#N&&(s.size=this.#N[t]),s}dump(){let e=[];for(let t of this.#P({allowStale:!0})){let i=this.#c[t],r=this.#r[t],s=this.#u(r)?r.__staleWhileFetching:r;if(s===void 0||i===void 0)continue;let o={value:s};if(this.#T&&this.#w){o.ttl=this.#T[t];let a=Hr.now()-this.#w[t];o.start=Math.floor(Date.now()-a)}this.#N&&(o.size=this.#N[t]),e.unshift([i,o])}return e}load(e){this.clear();for(let[t,i]of e){if(i.start){let r=Date.now()-i.start;i.start=Hr.now()-r}this.set(t,i.value,i)}}set(e,t,i={}){if(t===void 0)return this.delete(e),this;let{ttl:r=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=i,{noUpdateTTL:l=this.noUpdateTTL}=i,u=this.#x(e,t,i.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.#O(e,"set"),this;let d=this.#l===0?void 0:this.#a.get(e);if(d===void 0)d=this.#l===0?this.#d:this.#E.length!==0?this.#E.pop():this.#l===this.#e?this.#q(!1):this.#l,this.#c[d]=e,this.#r[d]=t,this.#a.set(e,d),this.#g[this.#d]=d,this.#y[d]=this.#d,this.#d=d,this.#l++,this.#L(d,u,c),c&&(c.set="add"),l=!1;else{this.#j(d);let p=this.#r[d];if(t!==p){if(this.#k&&this.#u(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:g}=p;g!==void 0&&!o&&(this.#S&&this.#s?.(g,e,"set"),this.#p&&this.#m?.push([g,e,"set"]))}else o||(this.#S&&this.#s?.(p,e,"set"),this.#p&&this.#m?.push([p,e,"set"]));if(this.#I(d),this.#L(d,u,c),this.#r[d]=t,c){c.set="replace";let g=p&&this.#u(p)?p.__staleWhileFetching:p;g!==void 0&&(c.oldValue=g)}}else c&&(c.set="update")}if(r!==0&&!this.#T&&this.#R(),this.#T&&(l||this.#A(d,r,s),c&&this.#n(c,d)),!o&&this.#p&&this.#m){let p=this.#m,g;for(;g=p?.shift();)this.#i?.(...g)}return this}pop(){try{for(;this.#l;){let e=this.#r[this.#h];if(this.#q(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#p&&this.#m){let e=this.#m,t;for(;t=e?.shift();)this.#i?.(...t)}}}#q(e){let t=this.#h,i=this.#c[t],r=this.#r[t];return this.#k&&this.#u(r)?r.__abortController.abort(new Error("evicted")):(this.#S||this.#p)&&(this.#S&&this.#s?.(r,i,"evict"),this.#p&&this.#m?.push([r,i,"evict"])),this.#I(t),e&&(this.#c[t]=void 0,this.#r[t]=void 0,this.#E.push(t)),this.#l===1?(this.#h=this.#d=0,this.#E.length=0):this.#h=this.#g[t],this.#a.delete(i),this.#l--,t}has(e,t={}){let{updateAgeOnHas:i=this.updateAgeOnHas,status:r}=t,s=this.#a.get(e);if(s!==void 0){let o=this.#r[s];if(this.#u(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#b(s))r&&(r.has="stale",this.#n(r,s));else return i&&this.#_(s),r&&(r.has="hit",this.#n(r,s)),!0}else r&&(r.has="miss");return!1}peek(e,t={}){let{allowStale:i=this.allowStale}=t,r=this.#a.get(e);if(r===void 0||!i&&this.#b(r))return;let s=this.#r[r];return this.#u(s)?s.__staleWhileFetching:s}#F(e,t,i,r){let s=t===void 0?void 0:this.#r[t];if(this.#u(s))return s;let o=new Cl,{signal:a}=i;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let c={signal:o.signal,options:i,context:r},l=(b,N=!1)=>{let{aborted:R}=o.signal,v=i.ignoreFetchAbort&&b!==void 0;if(i.status&&(R&&!N?(i.status.fetchAborted=!0,i.status.fetchError=o.signal.reason,v&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),R&&!v&&!N)return d(o.signal.reason);let T=g;return this.#r[t]===g&&(b===void 0?T.__staleWhileFetching?this.#r[t]=T.__staleWhileFetching:this.#O(e,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(e,b,c.options))),b},u=b=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=b),d(b)),d=b=>{let{aborted:N}=o.signal,R=N&&i.allowStaleOnFetchAbort,v=R||i.allowStaleOnFetchRejection,T=v||i.noDeleteOnFetchRejection,w=g;if(this.#r[t]===g&&(!T||w.__staleWhileFetching===void 0?this.#O(e,"fetch"):R||(this.#r[t]=w.__staleWhileFetching)),v)return i.status&&w.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),w.__staleWhileFetching;if(w.__returned===w)throw b},p=(b,N)=>{let R=this.#o?.(e,s,c);R&&R instanceof Promise&&R.then(v=>b(v===void 0?void 0:v),N),o.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(b(void 0),i.allowStaleOnFetchAbort&&(b=v=>l(v,!0)))})};i.status&&(i.status.fetchDispatched=!0);let g=new Promise(p).then(l,u),_=Object.assign(g,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,_,{...c.options,status:void 0}),t=this.#a.get(e)):this.#r[t]=_,_}#u(e){if(!this.#k)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Cl}async fetch(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:g=this.ignoreFetchAbort,allowStaleOnFetchAbort:_=this.allowStaleOnFetchAbort,context:b,forceRefresh:N=!1,status:R,signal:v}=t;if(!this.#k)return R&&(R.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:r,noDeleteOnStaleGet:s,status:R});let T={allowStale:i,updateAgeOnGet:r,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:_,ignoreFetchAbort:g,status:R,signal:v},w=this.#a.get(e);if(w===void 0){R&&(R.fetch="miss");let L=this.#F(e,w,T,b);return L.__returned=L}else{let L=this.#r[w];if(this.#u(L)){let qe=i&&L.__staleWhileFetching!==void 0;return R&&(R.fetch="inflight",qe&&(R.returnedStale=!0)),qe?L.__staleWhileFetching:L.__returned=L}let M=this.#b(w);if(!N&&!M)return R&&(R.fetch="hit"),this.#j(w),r&&this.#_(w),R&&this.#n(R,w),L;let H=this.#F(e,w,T,b),ie=H.__staleWhileFetching!==void 0&&i;return R&&(R.fetch=M?"stale":"refresh",ie&&M&&(R.returnedStale=!0)),ie?H.__staleWhileFetching:H.__returned=H}}async forceFetch(e,t={}){let i=await this.fetch(e,t);if(i===void 0)throw new Error("fetch() returned undefined");return i}memo(e,t={}){let i=this.#v;if(!i)throw new Error("no memoMethod provided to constructor");let{context:r,forceRefresh:s,...o}=t,a=this.get(e,o);if(!s&&a!==void 0)return a;let c=i(e,a,{options:o,context:r});return this.set(e,c,o),c}get(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=t,a=this.#a.get(e);if(a!==void 0){let c=this.#r[a],l=this.#u(c);return o&&this.#n(o,a),this.#b(a)?(o&&(o.get="stale"),l?(o&&i&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),i?c.__staleWhileFetching:void 0):(s||this.#O(e,"expire"),o&&i&&(o.returnedStale=!0),i?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(this.#j(a),r&&this.#_(a),c))}else o&&(o.get="miss")}#B(e,t){this.#y[t]=e,this.#g[e]=t}#j(e){e!==this.#d&&(e===this.#h?this.#h=this.#g[e]:this.#B(this.#y[e],this.#g[e]),this.#B(this.#d,e),this.#d=e)}delete(e){return this.#O(e,"delete")}#O(e,t){let i=!1;if(this.#l!==0){let r=this.#a.get(e);if(r!==void 0)if(i=!0,this.#l===1)this.#U(t);else{this.#I(r);let s=this.#r[r];if(this.#u(s)?s.__abortController.abort(new Error("deleted")):(this.#S||this.#p)&&(this.#S&&this.#s?.(s,e,t),this.#p&&this.#m?.push([s,e,t])),this.#a.delete(e),this.#c[r]=void 0,this.#r[r]=void 0,r===this.#d)this.#d=this.#y[r];else if(r===this.#h)this.#h=this.#g[r];else{let o=this.#y[r];this.#g[o]=this.#g[r];let a=this.#g[r];this.#y[a]=this.#y[r]}this.#l--,this.#E.push(r)}}if(this.#p&&this.#m?.length){let r=this.#m,s;for(;s=r?.shift();)this.#i?.(...s)}return i}clear(){return this.#U("delete")}#U(e){for(let t of this.#D({allowStale:!0})){let i=this.#r[t];if(this.#u(i))i.__abortController.abort(new Error("deleted"));else{let r=this.#c[t];this.#S&&this.#s?.(i,r,e),this.#p&&this.#m?.push([i,r,e])}}if(this.#a.clear(),this.#r.fill(void 0),this.#c.fill(void 0),this.#T&&this.#w&&(this.#T.fill(0),this.#w.fill(0)),this.#N&&this.#N.fill(0),this.#h=0,this.#d=0,this.#E.length=0,this.#f=0,this.#l=0,this.#p&&this.#m){let t=this.#m,i;for(;i=t?.shift();)this.#i?.(...i)}}};var Gr=require("node:path"),DE=require("node:url"),_n=require("fs"),E0=X(require("node:fs"),1),Ni=require("node:fs/promises");var ql=require("node:events"),Zh=X(require("node:stream"),1),EE=require("node:string_decoder"),TE=typeof process=="object"&&process?process:{stdout:null,stderr:null},p0=n=>!!n&&typeof n=="object"&&(n instanceof Ei||n instanceof Zh.default||m0(n)||g0(n)),m0=n=>!!n&&typeof n=="object"&&n instanceof ql.EventEmitter&&typeof n.pipe=="function"&&n.pipe!==Zh.default.Writable.prototype.pipe,g0=n=>!!n&&typeof n=="object"&&n instanceof ql.EventEmitter&&typeof n.write=="function"&&typeof n.end=="function",Bn=Symbol("EOF"),jn=Symbol("maybeEmitEnd"),ki=Symbol("emittedEnd"),Ol=Symbol("emittingEnd"),ao=Symbol("emittedError"),Al=Symbol("closed"),vE=Symbol("read"),Il=Symbol("flush"),SE=Symbol("flushChunk"),un=Symbol("encoding"),Kr=Symbol("decoder"),nt=Symbol("flowing"),co=Symbol("paused"),zr=Symbol("resume"),it=Symbol("buffer"),wt=Symbol("pipes"),rt=Symbol("bufferLength"),Kh=Symbol("bufferPush"),Ll=Symbol("bufferShift"),bt=Symbol("objectMode"),We=Symbol("destroyed"),zh=Symbol("error"),Gh=Symbol("emitData"),kE=Symbol("emitEnd"),Xh=Symbol("emitEnd2"),Nn=Symbol("async"),Qh=Symbol("abort"),xl=Symbol("aborted"),lo=Symbol("signal"),Ki=Symbol("dataListeners"),Ft=Symbol("discarded"),uo=n=>Promise.resolve().then(n),y0=n=>n(),b0=n=>n==="end"||n==="finish"||n==="prefinish",T0=n=>n instanceof ArrayBuffer||!!n&&typeof n=="object"&&n.constructor&&n.constructor.name==="ArrayBuffer"&&n.byteLength>=0,v0=n=>!Buffer.isBuffer(n)&&ArrayBuffer.isView(n),Ml=class{src;dest;opts;ondrain;constructor(e,t,i){this.src=e,this.dest=t,this.opts=i,this.ondrain=()=>e[zr](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Jh=class extends Ml{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,i){super(e,t,i),this.proxyErrors=r=>t.emit("error",r),e.on("error",this.proxyErrors)}},S0=n=>!!n.objectMode,k0=n=>!n.objectMode&&!!n.encoding&&n.encoding!=="buffer",Ei=class extends ql.EventEmitter{[nt]=!1;[co]=!1;[wt]=[];[it]=[];[bt];[un];[Nn];[Kr];[Bn]=!1;[ki]=!1;[Ol]=!1;[Al]=!1;[ao]=null;[rt]=0;[We]=!1;[lo];[xl]=!1;[Ki]=0;[Ft]=!1;writable=!0;readable=!0;constructor(...e){let t=e[0]||{};if(super(),t.objectMode&&typeof t.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");S0(t)?(this[bt]=!0,this[un]=null):k0(t)?(this[un]=t.encoding,this[bt]=!1):(this[bt]=!1,this[un]=null),this[Nn]=!!t.async,this[Kr]=this[un]?new EE.StringDecoder(this[un]):null,t&&t.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[it]}),t&&t.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[wt]});let{signal:i}=t;i&&(this[lo]=i,i.aborted?this[Qh]():i.addEventListener("abort",()=>this[Qh]()))}get bufferLength(){return this[rt]}get encoding(){return this[un]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[bt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Nn]}set async(e){this[Nn]=this[Nn]||!!e}[Qh](){this[xl]=!0,this.emit("abort",this[lo]?.reason),this.destroy(this[lo]?.reason)}get aborted(){return this[xl]}set aborted(e){}write(e,t,i){if(this[xl])return!1;if(this[Bn])throw new Error("write after end");if(this[We])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(i=t,t="utf8"),t||(t="utf8");let r=this[Nn]?uo:y0;if(!this[bt]&&!Buffer.isBuffer(e)){if(v0(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(T0(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[bt]?(this[nt]&&this[rt]!==0&&this[Il](!0),this[nt]?this.emit("data",e):this[Kh](e),this[rt]!==0&&this.emit("readable"),i&&r(i),this[nt]):e.length?(typeof e=="string"&&!(t===this[un]&&!this[Kr]?.lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[un]&&(e=this[Kr].write(e)),this[nt]&&this[rt]!==0&&this[Il](!0),this[nt]?this.emit("data",e):this[Kh](e),this[rt]!==0&&this.emit("readable"),i&&r(i),this[nt]):(this[rt]!==0&&this.emit("readable"),i&&r(i),this[nt])}read(e){if(this[We])return null;if(this[Ft]=!1,this[rt]===0||e===0||e&&e>this[rt])return this[jn](),null;this[bt]&&(e=null),this[it].length>1&&!this[bt]&&(this[it]=[this[un]?this[it].join(""):Buffer.concat(this[it],this[rt])]);let t=this[vE](e||null,this[it][0]);return this[jn](),t}[vE](e,t){if(this[bt])this[Ll]();else{let i=t;e===i.length||e===null?this[Ll]():typeof i=="string"?(this[it][0]=i.slice(e),t=i.slice(0,e),this[rt]-=e):(this[it][0]=i.subarray(e),t=i.subarray(0,e),this[rt]-=e)}return this.emit("data",t),!this[it].length&&!this[Bn]&&this.emit("drain"),t}end(e,t,i){return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t="utf8"),e!==void 0&&this.write(e,t),i&&this.once("end",i),this[Bn]=!0,this.writable=!1,(this[nt]||!this[co])&&this[jn](),this}[zr](){this[We]||(!this[Ki]&&!this[wt].length&&(this[Ft]=!0),this[co]=!1,this[nt]=!0,this.emit("resume"),this[it].length?this[Il]():this[Bn]?this[jn]():this.emit("drain"))}resume(){return this[zr]()}pause(){this[nt]=!1,this[co]=!0,this[Ft]=!1}get destroyed(){return this[We]}get flowing(){return this[nt]}get paused(){return this[co]}[Kh](e){this[bt]?this[rt]+=1:this[rt]+=e.length,this[it].push(e)}[Ll](){return this[bt]?this[rt]-=1:this[rt]-=this[it][0].length,this[it].shift()}[Il](e=!1){do;while(this[SE](this[Ll]())&&this[it].length);!e&&!this[it].length&&!this[Bn]&&this.emit("drain")}[SE](e){return this.emit("data",e),this[nt]}pipe(e,t){if(this[We])return e;this[Ft]=!1;let i=this[ki];return t=t||{},e===TE.stdout||e===TE.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,i?t.end&&e.end():(this[wt].push(t.proxyErrors?new Jh(this,e,t):new Ml(this,e,t)),this[Nn]?uo(()=>this[zr]()):this[zr]()),e}unpipe(e){let t=this[wt].find(i=>i.dest===e);t&&(this[wt].length===1?(this[nt]&&this[Ki]===0&&(this[nt]=!1),this[wt]=[]):this[wt].splice(this[wt].indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let i=super.on(e,t);if(e==="data")this[Ft]=!1,this[Ki]++,!this[wt].length&&!this[nt]&&this[zr]();else if(e==="readable"&&this[rt]!==0)super.emit("readable");else if(b0(e)&&this[ki])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[ao]){let r=t;this[Nn]?uo(()=>r.call(this,this[ao])):r.call(this,this[ao])}return i}removeListener(e,t){return this.off(e,t)}off(e,t){let i=super.off(e,t);return e==="data"&&(this[Ki]=this.listeners("data").length,this[Ki]===0&&!this[Ft]&&!this[wt].length&&(this[nt]=!1)),i}removeAllListeners(e){let t=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Ki]=0,!this[Ft]&&!this[wt].length&&(this[nt]=!1)),t}get emittedEnd(){return this[ki]}[jn](){!this[Ol]&&!this[ki]&&!this[We]&&this[it].length===0&&this[Bn]&&(this[Ol]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Al]&&this.emit("close"),this[Ol]=!1)}emit(e,...t){let i=t[0];if(e!=="error"&&e!=="close"&&e!==We&&this[We])return!1;if(e==="data")return!this[bt]&&!i?!1:this[Nn]?(uo(()=>this[Gh](i)),!0):this[Gh](i);if(e==="end")return this[kE]();if(e==="close"){if(this[Al]=!0,!this[ki]&&!this[We])return!1;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[ao]=i,super.emit(zh,i);let s=!this[lo]||this.listeners("error").length?super.emit("error",i):!1;return this[jn](),s}else if(e==="resume"){let s=super.emit("resume");return this[jn](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let r=super.emit(e,...t);return this[jn](),r}[Gh](e){for(let i of this[wt])i.dest.write(e)===!1&&this.pause();let t=this[Ft]?!1:super.emit("data",e);return this[jn](),t}[kE](){return this[ki]?!1:(this[ki]=!0,this.readable=!1,this[Nn]?(uo(()=>this[Xh]()),!0):this[Xh]())}[Xh](){if(this[Kr]){let t=this[Kr].end();if(t){for(let i of this[wt])i.dest.write(t);this[Ft]||super.emit("data",t)}}for(let t of this[wt])t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[bt]||(e.dataLength=0);let t=this.promise();return this.on("data",i=>{e.push(i),this[bt]||(e.dataLength+=i.length)}),await t,e}async concat(){if(this[bt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[un]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,t)=>{this.on(We,()=>t(new Error("stream destroyed"))),this.on("error",i=>t(i)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Ft]=!1;let e=!1,t=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return t();let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[Bn])return t();let s,o,a=d=>{this.off("data",c),this.off("end",l),this.off(We,u),t(),o(d)},c=d=>{this.off("error",a),this.off("end",l),this.off(We,u),this.pause(),s({value:d,done:!!this[Bn]})},l=()=>{this.off("error",a),this.off("data",c),this.off(We,u),t(),s({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,p)=>{o=p,s=d,this.once(We,u),this.once("error",a),this.once("end",l),this.once("data",c)})},throw:t,return:t,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Ft]=!1;let e=!1,t=()=>(this.pause(),this.off(zh,t),this.off(We,t),this.off("end",t),e=!0,{done:!0,value:void 0}),i=()=>{if(e)return t();let r=this.read();return r===null?t():{done:!1,value:r}};return this.once("end",t),this.once(zh,t),this.once(We,t),{next:i,throw:t,return:t,[Symbol.iterator](){return this}}}destroy(e){if(this[We])return e?this.emit("error",e):this.emit(We),this;this[We]=!0,this[Ft]=!0,this[it].length=0,this[rt]=0;let t=this;return typeof t.close=="function"&&!this[Al]&&t.close(),e?this.emit("error",e):this.emit(We),this}static get isStream(){return p0}};var N0=_n.realpathSync.native,ho={lstatSync:_n.lstatSync,readdir:_n.readdir,readdirSync:_n.readdirSync,readlinkSync:_n.readlinkSync,realpathSync:N0,promises:{lstat:Ni.lstat,readdir:Ni.readdir,readlink:Ni.readlink,realpath:Ni.realpath}},RE=n=>!n||n===ho||n===E0?ho:{...ho,...n,promises:{...ho.promises,...n.promises||{}}},CE=/^\\\\\?\\([a-z]:)\\?$/i,w0=n=>n.replace(/\//g,"\\").replace(CE,"$1\\"),_0=/[\\\/]/,Qt=0,OE=1,AE=2,wn=4,IE=6,LE=8,zi=10,xE=12,Xt=15,fo=~Xt,ep=16,NE=32,po=64,fn=128,Fl=256,jl=512,wE=po|fn|jl,P0=1023,tp=n=>n.isFile()?LE:n.isDirectory()?wn:n.isSymbolicLink()?zi:n.isCharacterDevice()?AE:n.isBlockDevice()?IE:n.isSocket()?xE:n.isFIFO()?OE:Qt,_E=new Map,mo=n=>{let e=_E.get(n);if(e)return e;let t=n.normalize("NFKD");return _E.set(n,t),t},PE=new Map,Bl=n=>{let e=PE.get(n);if(e)return e;let t=mo(n.toLowerCase());return PE.set(n,t),t},Ul=class extends oo{constructor(){super({max:256})}},np=class extends oo{constructor(e=16*1024){super({maxSize:e,sizeCalculation:t=>t.length+1})}},ME=Symbol("PathScurry setAsCwd"),Tt=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#s;get mode(){return this.#s}#i;get nlink(){return this.#i}#o;get uid(){return this.#o}#v;get gid(){return this.#v}#l;get rdev(){return this.#l}#f;get blksize(){return this.#f}#a;get ino(){return this.#a}#c;get size(){return this.#c}#r;get blocks(){return this.#r}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#h;get ctimeMs(){return this.#h}#d;get birthtimeMs(){return this.#d}#E;get atime(){return this.#E}#m;get mtime(){return this.#m}#N;get ctime(){return this.#N}#w;get birthtime(){return this.#w}#T;#S;#k;#p;#R;#_;#n;#A;#b;#C;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,t=Qt,i,r,s,o,a){this.name=e,this.#T=s?Bl(e):mo(e),this.#n=t&P0,this.nocase=s,this.roots=r,this.root=i||this,this.#A=o,this.#k=a.fullpath,this.#R=a.relative,this.#_=a.relativePosix,this.parent=a.parent,this.parent?this.#e=this.parent.#e:this.#e=RE(a.fs)}depth(){return this.#S!==void 0?this.#S:this.parent?this.#S=this.parent.depth()+1:this.#S=0}childrenCache(){return this.#A}resolve(e){if(!e)return this;let t=this.getRootString(e),r=e.substring(t.length).split(this.splitSep);return t?this.getRoot(t).#I(r):this.#I(r)}#I(e){let t=this;for(let i of e)t=t.child(i);return t}children(){let e=this.#A.get(this);if(e)return e;let t=Object.assign([],{provisional:0});return this.#A.set(this,t),this.#n&=~ep,t}child(e,t){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let i=this.children(),r=this.nocase?Bl(e):mo(e);for(let c of i)if(c.#T===r)return c;let s=this.parent?this.sep:"",o=this.#k?this.#k+s+e:void 0,a=this.newChild(e,Qt,{...t,parent:this,fullpath:o});return this.canReaddir()||(a.#n|=fn),i.push(a),a}relative(){if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,t=this.parent;if(!t)return this.#R=this.name;let i=t.relative();return i+(!i||!t.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#_!==void 0)return this.#_;let e=this.name,t=this.parent;if(!t)return this.#_=this.fullpathPosix();let i=t.relativePosix();return i+(!i||!t.parent?"":"/")+e}fullpath(){if(this.#k!==void 0)return this.#k;let e=this.name,t=this.parent;if(!t)return this.#k=this.name;let r=t.fullpath()+(t.parent?this.sep:"")+e;return this.#k=r}fullpathPosix(){if(this.#p!==void 0)return this.#p;if(this.sep==="/")return this.#p=this.fullpath();if(!this.parent){let r=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(r)?this.#p=`//?/${r}`:this.#p=r}let e=this.parent,t=e.fullpathPosix(),i=t+(!t||!e.parent?"":"/")+this.name;return this.#p=i}isUnknown(){return(this.#n&Xt)===Qt}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#n&Xt)===LE}isDirectory(){return(this.#n&Xt)===wn}isCharacterDevice(){return(this.#n&Xt)===AE}isBlockDevice(){return(this.#n&Xt)===IE}isFIFO(){return(this.#n&Xt)===OE}isSocket(){return(this.#n&Xt)===xE}isSymbolicLink(){return(this.#n&zi)===zi}lstatCached(){return this.#n&NE?this:void 0}readlinkCached(){return this.#b}realpathCached(){return this.#C}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#b)return!0;if(!this.parent)return!1;let e=this.#n&Xt;return!(e!==Qt&&e!==zi||this.#n&Fl||this.#n&fn)}calledReaddir(){return!!(this.#n&ep)}isENOENT(){return!!(this.#n&fn)}isNamed(e){return this.nocase?this.#T===Bl(e):this.#T===mo(e)}async readlink(){let e=this.#b;if(e)return e;if(this.canReadlink()&&this.parent)try{let t=await this.#e.promises.readlink(this.fullpath()),i=(await this.parent.realpath())?.resolve(t);if(i)return this.#b=i}catch(t){this.#u(t.code);return}}readlinkSync(){let e=this.#b;if(e)return e;if(this.canReadlink()&&this.parent)try{let t=this.#e.readlinkSync(this.fullpath()),i=this.parent.realpathSync()?.resolve(t);if(i)return this.#b=i}catch(t){this.#u(t.code);return}}#L(e){this.#n|=ep;for(let t=e.provisional;t<e.length;t++){let i=e[t];i&&i.#x()}}#x(){this.#n&fn||(this.#n=(this.#n|fn)&fo,this.#P())}#P(){let e=this.children();e.provisional=0;for(let t of e)t.#x()}#D(){this.#n|=jl,this.#M()}#M(){if(this.#n&po)return;let e=this.#n;(e&Xt)===wn&&(e&=fo),this.#n=e|po,this.#P()}#q(e=""){e==="ENOTDIR"||e==="EPERM"?this.#M():e==="ENOENT"?this.#x():this.children().provisional=0}#F(e=""){e==="ENOTDIR"?this.parent.#M():e==="ENOENT"&&this.#x()}#u(e=""){let t=this.#n;t|=Fl,e==="ENOENT"&&(t|=fn),(e==="EINVAL"||e==="UNKNOWN")&&(t&=fo),this.#n=t,e==="ENOTDIR"&&this.parent&&this.parent.#M()}#B(e,t){return this.#O(e,t)||this.#j(e,t)}#j(e,t){let i=tp(e),r=this.newChild(e.name,i,{parent:this}),s=r.#n&Xt;return s!==wn&&s!==zi&&s!==Qt&&(r.#n|=po),t.unshift(r),t.provisional++,r}#O(e,t){for(let i=t.provisional;i<t.length;i++){let r=t[i];if((this.nocase?Bl(e.name):mo(e.name))===r.#T)return this.#U(e,r,i,t)}}#U(e,t,i,r){let s=t.name;return t.#n=t.#n&fo|tp(e),s!==e.name&&(t.name=e.name),i!==r.provisional&&(i===r.length-1?r.pop():r.splice(i,1),r.unshift(t)),r.provisional++,t}async lstat(){if(!(this.#n&fn))try{return this.#H(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#F(e.code)}}lstatSync(){if(!(this.#n&fn))try{return this.#H(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#F(e.code)}}#H(e){let{atime:t,atimeMs:i,birthtime:r,birthtimeMs:s,blksize:o,blocks:a,ctime:c,ctimeMs:l,dev:u,gid:d,ino:p,mode:g,mtime:_,mtimeMs:b,nlink:N,rdev:R,size:v,uid:T}=e;this.#E=t,this.#g=i,this.#w=r,this.#d=s,this.#f=o,this.#r=a,this.#N=c,this.#h=l,this.#t=u,this.#v=d,this.#a=p,this.#s=g,this.#m=_,this.#y=b,this.#i=N,this.#l=R,this.#c=v,this.#o=T;let w=tp(e);this.#n=this.#n&fo|w|NE,w!==Qt&&w!==wn&&w!==zi&&(this.#n|=po)}#W=[];#V=!1;#Y(e){this.#V=!1;let t=this.#W.slice();this.#W.length=0,t.forEach(i=>i(null,e))}readdirCB(e,t=!1){if(!this.canReaddir()){t?e(null,[]):queueMicrotask(()=>e(null,[]));return}let i=this.children();if(this.calledReaddir()){let s=i.slice(0,i.provisional);t?e(null,s):queueMicrotask(()=>e(null,s));return}if(this.#W.push(e),this.#V)return;this.#V=!0;let r=this.fullpath();this.#e.readdir(r,{withFileTypes:!0},(s,o)=>{if(s)this.#q(s.code),i.provisional=0;else{for(let a of o)this.#B(a,i);this.#L(i)}this.#Y(i.slice(0,i.provisional))})}#$;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let t=this.fullpath();if(this.#$)await this.#$;else{let i=()=>{};this.#$=new Promise(r=>i=r);try{for(let r of await this.#e.promises.readdir(t,{withFileTypes:!0}))this.#B(r,e);this.#L(e)}catch(r){this.#q(r.code),e.provisional=0}this.#$=void 0,i()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let t=this.fullpath();try{for(let i of this.#e.readdirSync(t,{withFileTypes:!0}))this.#B(i,e);this.#L(e)}catch(i){this.#q(i.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#n&wE)return!1;let e=Xt&this.#n;return e===Qt||e===wn||e===zi}shouldWalk(e,t){return(this.#n&wn)===wn&&!(this.#n&wE)&&!e.has(this)&&(!t||t(this))}async realpath(){if(this.#C)return this.#C;if(!((jl|Fl|fn)&this.#n))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#C=this.resolve(e)}catch{this.#D()}}realpathSync(){if(this.#C)return this.#C;if(!((jl|Fl|fn)&this.#n))try{let e=this.#e.realpathSync(this.fullpath());return this.#C=this.resolve(e)}catch{this.#D()}}[ME](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let t=new Set([]),i=[],r=this;for(;r&&r.parent;)t.add(r),r.#R=i.join(this.sep),r.#_=i.join("/"),r=r.parent,i.push("..");for(r=e;r&&r.parent&&!t.has(r);)r.#R=void 0,r.#_=void 0,r=r.parent}},$l=class n extends Tt{sep="\\";splitSep=_0;constructor(e,t=Qt,i,r,s,o,a){super(e,t,i,r,s,o,a)}newChild(e,t=Qt,i={}){return new n(e,t,this.root,this.roots,this.nocase,this.childrenCache(),i)}getRootString(e){return Gr.win32.parse(e).root}getRoot(e){if(e=w0(e.toUpperCase()),e===this.root.name)return this.root;for(let[t,i]of Object.entries(this.roots))if(this.sameRoot(e,t))return this.roots[e]=i;return this.roots[e]=new Xr(e,this).root}sameRoot(e,t=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(CE,"$1\\"),e===t}},Wl=class n extends Tt{splitSep="/";sep="/";constructor(e,t=Qt,i,r,s,o,a){super(e,t,i,r,s,o,a)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,t=Qt,i={}){return new n(e,t,this.root,this.roots,this.nocase,this.childrenCache(),i)}},Vl=class{root;rootPath;roots;cwd;#e;#t;#s;nocase;#i;constructor(e=process.cwd(),t,i,{nocase:r,childrenCacheSize:s=16*1024,fs:o=ho}={}){this.#i=RE(o),(e instanceof URL||e.startsWith("file://"))&&(e=(0,DE.fileURLToPath)(e));let a=t.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#e=new Ul,this.#t=new Ul,this.#s=new np(s);let c=a.substring(this.rootPath.length).split(i);if(c.length===1&&!c[0]&&c.pop(),r===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=r,this.root=this.newRoot(this.#i),this.roots[this.rootPath]=this.root;let l=this.root,u=c.length-1,d=t.sep,p=this.rootPath,g=!1;for(let _ of c){let b=u--;l=l.child(_,{relative:new Array(b).fill("..").join(d),relativePosix:new Array(b).fill("..").join("/"),fullpath:p+=(g?"":d)+_}),g=!0}this.cwd=l}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#s}resolve(...e){let t="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(t=t?`${o}/${t}`:o,this.isAbsolute(o)))break}let i=this.#e.get(t);if(i!==void 0)return i;let r=this.cwd.resolve(t).fullpath();return this.#e.set(t,r),r}resolvePosix(...e){let t="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(t=t?`${o}/${t}`:o,this.isAbsolute(o)))break}let i=this.#t.get(t);if(i!==void 0)return i;let r=this.cwd.resolve(t).fullpathPosix();return this.#t.set(t,r),r}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,t={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tt||(t=e,e=this.cwd);let{withFileTypes:i}=t;if(e.canReaddir()){let r=await e.readdir();return i?r:r.map(s=>s.name)}else return[]}readdirSync(e=this.cwd,t={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tt||(t=e,e=this.cwd);let{withFileTypes:i=!0}=t;return e.canReaddir()?i?e.readdirSync():e.readdirSync().map(r=>r.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tt||(t=e.withFileTypes,e=this.cwd);let i=await e.readlink();return t?i:i?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tt||(t=e.withFileTypes,e=this.cwd);let i=e.readlinkSync();return t?i:i?.fullpath()}async realpath(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tt||(t=e.withFileTypes,e=this.cwd);let i=await e.realpath();return t?i:i?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tt||(t=e.withFileTypes,e=this.cwd);let i=e.realpathSync();return t?i:i?.fullpath()}async walk(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:r=!1,filter:s,walkFilter:o}=t,a=[];(!s||s(e))&&a.push(i?e:e.fullpath());let c=new Set,l=(d,p)=>{c.add(d),d.readdirCB((g,_)=>{if(g)return p(g);let b=_.length;if(!b)return p();let N=()=>{--b===0&&p()};for(let R of _)(!s||s(R))&&a.push(i?R:R.fullpath()),r&&R.isSymbolicLink()?R.realpath().then(v=>v?.isUnknown()?v.lstat():v).then(v=>v?.shouldWalk(c,o)?l(v,N):N()):R.shouldWalk(c,o)?l(R,N):N()},!0)},u=e;return new Promise((d,p)=>{l(u,g=>{if(g)return p(g);d(a)})})}walkSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:r=!1,filter:s,walkFilter:o}=t,a=[];(!s||s(e))&&a.push(i?e:e.fullpath());let c=new Set([e]);for(let l of c){let u=l.readdirSync();for(let d of u){(!s||s(d))&&a.push(i?d:d.fullpath());let p=d;if(d.isSymbolicLink()){if(!(r&&(p=d.realpathSync())))continue;p.isUnknown()&&p.lstatSync()}p.shouldWalk(c,o)&&c.add(p)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,t={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tt||(t=e,e=this.cwd),this.stream(e,t)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:r=!1,filter:s,walkFilter:o}=t;(!s||s(e))&&(yield i?e:e.fullpath());let a=new Set([e]);for(let c of a){let l=c.readdirSync();for(let u of l){(!s||s(u))&&(yield i?u:u.fullpath());let d=u;if(u.isSymbolicLink()){if(!(r&&(d=u.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(a,o)&&a.add(d)}}}stream(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:r=!1,filter:s,walkFilter:o}=t,a=new Ei({objectMode:!0});(!s||s(e))&&a.write(i?e:e.fullpath());let c=new Set,l=[e],u=0,d=()=>{let p=!1;for(;!p;){let g=l.shift();if(!g){u===0&&a.end();return}u++,c.add(g);let _=(N,R,v=!1)=>{if(N)return a.emit("error",N);if(r&&!v){let T=[];for(let w of R)w.isSymbolicLink()&&T.push(w.realpath().then(L=>L?.isUnknown()?L.lstat():L));if(T.length){Promise.all(T).then(()=>_(null,R,!0));return}}for(let T of R)T&&(!s||s(T))&&(a.write(i?T:T.fullpath())||(p=!0));u--;for(let T of R){let w=T.realpathCached()||T;w.shouldWalk(c,o)&&l.push(w)}p&&!a.flowing?a.once("drain",d):b||d()},b=!0;g.readdirCB(_,!0),b=!1}};return d(),a}streamSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:r=!1,filter:s,walkFilter:o}=t,a=new Ei({objectMode:!0}),c=new Set;(!s||s(e))&&a.write(i?e:e.fullpath());let l=[e],u=0,d=()=>{let p=!1;for(;!p;){let g=l.shift();if(!g){u===0&&a.end();return}u++,c.add(g);let _=g.readdirSync();for(let b of _)(!s||s(b))&&(a.write(i?b:b.fullpath())||(p=!0));u--;for(let b of _){let N=b;if(b.isSymbolicLink()){if(!(r&&(N=b.realpathSync())))continue;N.isUnknown()&&N.lstatSync()}N.shouldWalk(c,o)&&l.push(N)}}p&&!a.flowing&&a.once("drain",d)};return d(),a}chdir(e=this.cwd){let t=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[ME](t)}},Xr=class extends Vl{sep="\\";constructor(e=process.cwd(),t={}){let{nocase:i=!0}=t;super(e,Gr.win32,"\\",{...t,nocase:i}),this.nocase=i;for(let r=this.cwd;r;r=r.parent)r.nocase=this.nocase}parseRootPath(e){return Gr.win32.parse(e).root.toUpperCase()}newRoot(e){return new $l(this.rootPath,wn,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},Qr=class extends Vl{sep="/";constructor(e=process.cwd(),t={}){let{nocase:i=!1}=t;super(e,Gr.posix,"/",{...t,nocase:i}),this.nocase=i}parseRootPath(e){return"/"}newRoot(e){return new Wl(this.rootPath,wn,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},go=class extends Qr{constructor(e=process.cwd(),t={}){let{nocase:i=!0}=t;super(e,{...t,nocase:i})}},L$=process.platform==="win32"?$l:Wl,qE=process.platform==="win32"?Xr:process.platform==="darwin"?go:Qr;var D0=n=>n.length>=1,R0=n=>n.length>=1,Jr=class n{#e;#t;#s;length;#i;#o;#v;#l;#f;#a;#c=!0;constructor(e,t,i,r){if(!D0(e))throw new TypeError("empty pattern list");if(!R0(t))throw new TypeError("empty glob list");if(t.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,i<0||i>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=t,this.#s=i,this.#i=r,this.#s===0){if(this.isUNC()){let[s,o,a,c,...l]=this.#e,[u,d,p,g,..._]=this.#t;l[0]===""&&(l.shift(),_.shift());let b=[s,o,a,c,""].join("/"),N=[u,d,p,g,""].join("/");this.#e=[b,...l],this.#t=[N,..._],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[s,...o]=this.#e,[a,...c]=this.#t;o[0]===""&&(o.shift(),c.shift());let l=s+"/",u=a+"/";this.#e=[l,...o],this.#t=[u,...c],this.length=this.#e.length}}}pattern(){return this.#e[this.#s]}isString(){return typeof this.#e[this.#s]=="string"}isGlobstar(){return this.#e[this.#s]===ut}isRegExp(){return this.#e[this.#s]instanceof RegExp}globString(){return this.#v=this.#v||(this.#s===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#s).join("/"))}hasMore(){return this.length>this.#s+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new n(this.#e,this.#t,this.#s+1,this.#i),this.#o.#a=this.#a,this.#o.#f=this.#f,this.#o.#l=this.#l,this.#o):this.#o=null}isUNC(){let e=this.#e;return this.#f!==void 0?this.#f:this.#f=this.#i==="win32"&&this.#s===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#i==="win32"&&this.#s===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#s===0?e:""}checkFollowGlobstar(){return!(this.#s===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#s===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var C0=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Zr=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:t,nocase:i,noext:r,noglobstar:s,platform:o=C0}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:t,nocase:i,noext:r,noglobstar:s,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of e)this.add(a)}add(e){let t=new qt(e,this.mmopts);for(let i=0;i<t.set.length;i++){let r=t.set[i],s=t.globParts[i];if(!r||!s)throw new Error("invalid pattern object");for(;r[0]==="."&&s[0]===".";)r.shift(),s.shift();let o=new Jr(r,s,0,this.platform),a=new qt(o.globString(),this.mmopts),c=s[s.length-1]==="**",l=o.isAbsolute();l?this.absolute.push(a):this.relative.push(a),c&&(l?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(e){let t=e.fullpath(),i=`${t}/`,r=e.relative()||".",s=`${r}/`;for(let o of this.relative)if(o.match(r)||o.match(s))return!0;for(let o of this.absolute)if(o.match(t)||o.match(i))return!0;return!1}childrenIgnored(e){let t=e.fullpath()+"/",i=(e.relative()||".")+"/";for(let r of this.relativeChildren)if(r.match(i))return!0;for(let r of this.absoluteChildren)if(r.match(t))return!0;return!1}};var ip=class n{store;constructor(e=new Map){this.store=e}copy(){return new n(new Map(this.store))}hasWalked(e,t){return this.store.get(e.fullpath())?.has(t.globString())}storeWalked(e,t){let i=e.fullpath(),r=this.store.get(i);r?r.add(t.globString()):this.store.set(i,new Set([t.globString()]))}},rp=class{store=new Map;add(e,t,i){let r=(t?2:0)|(i?1:0),s=this.store.get(e);this.store.set(e,s===void 0?r:r&s)}entries(){return[...this.store.entries()].map(([e,t])=>[e,!!(t&2),!!(t&1)])}},sp=class{store=new Map;add(e,t){if(!e.canReaddir())return;let i=this.store.get(e);i?i.find(r=>r.globString()===t.globString())||i.push(t):this.store.set(e,[t])}get(e){let t=this.store.get(e);if(!t)throw new Error("attempting to walk unknown path");return t}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},yo=class n{hasWalkedCache;matches=new rp;subwalks=new sp;patterns;follow;dot;opts;constructor(e,t){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=t?t.copy():new ip}processPatterns(e,t){this.patterns=t;let i=t.map(r=>[e,r]);for(let[r,s]of i){this.hasWalkedCache.storeWalked(r,s);let o=s.root(),a=s.isAbsolute()&&this.opts.absolute!==!1;if(o){r=r.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let d=s.rest();if(d)s=d;else{this.matches.add(r,!0,!1);continue}}if(r.isENOENT())continue;let c,l,u=!1;for(;typeof(c=s.pattern())=="string"&&(l=s.rest());)r=r.resolve(c),s=l,u=!0;if(c=s.pattern(),l=s.rest(),u){if(this.hasWalkedCache.hasWalked(r,s))continue;this.hasWalkedCache.storeWalked(r,s)}if(typeof c=="string"){let d=c===".."||c===""||c===".";this.matches.add(r.resolve(c),a,d);continue}else if(c===ut){(!r.isSymbolicLink()||this.follow||s.checkFollowGlobstar())&&this.subwalks.add(r,s);let d=l?.pattern(),p=l?.rest();if(!l||(d===""||d===".")&&!p)this.matches.add(r,a,d===""||d===".");else if(d===".."){let g=r.parent||r;p?this.hasWalkedCache.hasWalked(g,p)||this.subwalks.add(g,p):this.matches.add(g,a,!0)}}else c instanceof RegExp&&this.subwalks.add(r,s)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new n(this.opts,this.hasWalkedCache)}filterEntries(e,t){let i=this.subwalks.get(e),r=this.child();for(let s of t)for(let o of i){let a=o.isAbsolute(),c=o.pattern(),l=o.rest();c===ut?r.testGlobstar(s,o,l,a):c instanceof RegExp?r.testRegExp(s,c,l,a):r.testString(s,c,l,a)}return r}testGlobstar(e,t,i,r){if((this.dot||!e.name.startsWith("."))&&(t.hasMore()||this.matches.add(e,r,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,t):e.isSymbolicLink()&&(i&&t.checkFollowGlobstar()?this.subwalks.add(e,i):t.markFollowGlobstar()&&this.subwalks.add(e,t)))),i){let s=i.pattern();if(typeof s=="string"&&s!==".."&&s!==""&&s!==".")this.testString(e,s,i.rest(),r);else if(s===".."){let o=e.parent||e;this.subwalks.add(o,i)}else s instanceof RegExp&&this.testRegExp(e,s,i.rest(),r)}}testRegExp(e,t,i,r){t.test(e.name)&&(i?this.subwalks.add(e,i):this.matches.add(e,r,!1))}testString(e,t,i,r){e.isNamed(t)&&(i?this.subwalks.add(e,i):this.matches.add(e,r,!1))}};var O0=(n,e)=>typeof n=="string"?new Zr([n],e):Array.isArray(n)?new Zr(n,e):n,Hl=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#s;signal;maxDepth;includeChildMatches;constructor(e,t,i){if(this.patterns=e,this.path=t,this.opts=i,this.#s=!i.posix&&i.platform==="win32"?"\\":"/",this.includeChildMatches=i.includeChildMatches!==!1,(i.ignore||!this.includeChildMatches)&&(this.#t=O0(i.ignore??[],i),!this.includeChildMatches&&typeof this.#t.add!="function")){let r="cannot ignore child matches, ignore lacks add() method.";throw new Error(r)}this.maxDepth=i.maxDepth||1/0,i.signal&&(this.signal=i.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#i(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#o(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,t){if(t&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=e.realpathCached()||await e.realpath(),!i)return;e=i}let s=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=await s.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(s,t)}matchCheckTest(e,t){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!t||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#i(e)?e:void 0}matchCheckSync(e,t){if(t&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=e.realpathCached()||e.realpathSync(),!i)return;e=i}let s=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=s.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(s,t)}matchFinish(e,t){if(this.#i(e))return;if(!this.includeChildMatches&&this.#t?.add){let s=`${e.relativePosix()}/**`;this.#t.add(s)}let i=this.opts.absolute===void 0?t:this.opts.absolute;this.seen.add(e);let r=this.opts.mark&&e.isDirectory()?this.#s:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(i){let s=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(s+r)}else{let s=this.opts.posix?e.relativePosix():e.relative(),o=this.opts.dotRelative&&!s.startsWith(".."+this.#s)?"."+this.#s:"";this.matchEmit(s?o+s+r:"."+r)}}async match(e,t,i){let r=await this.matchCheck(e,i);r&&this.matchFinish(r,t)}matchSync(e,t,i){let r=this.matchCheckSync(e,i);r&&this.matchFinish(r,t)}walkCB(e,t,i){this.signal?.aborted&&i(),this.walkCB2(e,t,new yo(this.opts),i)}walkCB2(e,t,i,r){if(this.#o(e))return r();if(this.signal?.aborted&&r(),this.paused){this.onResume(()=>this.walkCB2(e,t,i,r));return}i.processPatterns(e,t);let s=1,o=()=>{--s===0&&r()};for(let[a,c,l]of i.matches.entries())this.#i(a)||(s++,this.match(a,c,l).then(()=>o()));for(let a of i.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let c=a.readdirCached();a.calledReaddir()?this.walkCB3(a,c,i,o):a.readdirCB((l,u)=>this.walkCB3(a,u,i,o),!0)}o()}walkCB3(e,t,i,r){i=i.filterEntries(e,t);let s=1,o=()=>{--s===0&&r()};for(let[a,c,l]of i.matches.entries())this.#i(a)||(s++,this.match(a,c,l).then(()=>o()));for(let[a,c]of i.subwalks.entries())s++,this.walkCB2(a,c,i.child(),o);o()}walkCBSync(e,t,i){this.signal?.aborted&&i(),this.walkCB2Sync(e,t,new yo(this.opts),i)}walkCB2Sync(e,t,i,r){if(this.#o(e))return r();if(this.signal?.aborted&&r(),this.paused){this.onResume(()=>this.walkCB2Sync(e,t,i,r));return}i.processPatterns(e,t);let s=1,o=()=>{--s===0&&r()};for(let[a,c,l]of i.matches.entries())this.#i(a)||this.matchSync(a,c,l);for(let a of i.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let c=a.readdirSync();this.walkCB3Sync(a,c,i,o)}o()}walkCB3Sync(e,t,i,r){i=i.filterEntries(e,t);let s=1,o=()=>{--s===0&&r()};for(let[a,c,l]of i.matches.entries())this.#i(a)||this.matchSync(a,c,l);for(let[a,c]of i.subwalks.entries())s++,this.walkCB2Sync(a,c,i.child(),o);o()}},bo=class extends Hl{matches=new Set;constructor(e,t,i){super(e,t,i)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,t)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?t(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},To=class extends Hl{results;constructor(e,t,i){super(e,t,i),this.results=new Ei({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var A0=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",dn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,t){if(!t)throw new TypeError("glob options required");if(this.withFileTypes=!!t.withFileTypes,this.signal=t.signal,this.follow=!!t.follow,this.dot=!!t.dot,this.dotRelative=!!t.dotRelative,this.nodir=!!t.nodir,this.mark=!!t.mark,t.cwd?(t.cwd instanceof URL||t.cwd.startsWith("file://"))&&(t.cwd=(0,FE.fileURLToPath)(t.cwd)):this.cwd="",this.cwd=t.cwd||"",this.root=t.root,this.magicalBraces=!!t.magicalBraces,this.nobrace=!!t.nobrace,this.noext=!!t.noext,this.realpath=!!t.realpath,this.absolute=t.absolute,this.includeChildMatches=t.includeChildMatches!==!1,this.noglobstar=!!t.noglobstar,this.matchBase=!!t.matchBase,this.maxDepth=typeof t.maxDepth=="number"?t.maxDepth:1/0,this.stat=!!t.stat,this.ignore=t.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(c=>c.replace(/\\/g,"/"))),this.matchBase){if(t.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(c=>c.includes("/")?c:`./**/${c}`)}if(this.pattern=e,this.platform=t.platform||A0,this.opts={...t,platform:this.platform},t.scurry){if(this.scurry=t.scurry,t.nocase!==void 0&&t.nocase!==t.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let c=t.platform==="win32"?Xr:t.platform==="darwin"?go:t.platform?Qr:qE;this.scurry=new c(this.cwd,{nocase:t.nocase,fs:t.fs})}this.nocase=this.scurry.nocase;let i=this.platform==="darwin"||this.platform==="win32",r={...t,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:i,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},s=this.pattern.map(c=>new qt(c,r)),[o,a]=s.reduce((c,l)=>(c[0].push(...l.set),c[1].push(...l.globParts),c),[[],[]]);this.patterns=o.map((c,l)=>{let u=a[l];if(!u)throw new Error("invalid pattern object");return new Jr(c,u,0,this.platform)})}async walk(){return[...await new bo(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new bo(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new To(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new To(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var op=(n,e={})=>{Array.isArray(n)||(n=[n]);for(let t of n)if(new qt(t,e).hasMagic())return!0;return!1};function Kl(n,e={}){return new dn(n,e).streamSync()}function jE(n,e={}){return new dn(n,e).stream()}function UE(n,e={}){return new dn(n,e).walkSync()}async function BE(n,e={}){return new dn(n,e).walk()}function zl(n,e={}){return new dn(n,e).iterateSync()}function $E(n,e={}){return new dn(n,e).iterate()}var I0=Kl,L0=Object.assign(jE,{sync:Kl}),x0=zl,M0=Object.assign($E,{sync:zl}),q0=Object.assign(UE,{stream:Kl,iterate:zl}),Yl=Object.assign(BE,{glob:BE,globSync:UE,sync:q0,globStream:jE,stream:L0,globStreamSync:Kl,streamSync:I0,globIterate:$E,iterate:M0,globIterateSync:zl,iterateSync:x0,Glob:dn,hasMagic:op,escape:Vr,unescape:ln});Yl.glob=Yl;var vo=require("path"),KE=require("fs");var Pn=X(te()),F0=n=>{switch(n){case"string":return V(3);case"int":return V(1);case"boolean":return V(0);case"array":return V(4);case"uint8-array":return V(6);case"string-array":return V(5);case"phandle":return V(1);case"phandles":return V(4);case"phandle-array":return V(4);case"path":return V([3,1]);case"compound":return V(8)}return V(7)},WE=(n,e)=>{switch(n){case"string":return typeof e=="string"?e:void 0;case"int":return typeof e=="number"?e:void 0;case"boolean":return;case"array":return Array.isArray(e)&&e.every(t=>typeof t=="number")?e:void 0;case"uint8-array":return Array.isArray(e)&&e.every(t=>typeof t=="number")?e:void 0;case"string-array":return Array.isArray(e)&&e.every(t=>typeof t=="string")?e:void 0;case"phandle":return;case"phandles":return;case"phandle-array":return;case"path":return;case"compound":return}},Gl=(n,e)=>{if(e=e.include.reduce((t,i)=>{let r=n.find(s=>(0,vo.basename)(s.filePath)===i.name);if(r){let s=i["property-blocklist"];return t.include=t.include.filter(o=>o!==i),B0(n,r,t,s)??t}return console.warn(`Unable to find ${i}`),t},e),e["child-binding"]&&(e["child-binding"].include=zE(e["child-binding"].include),e["child-binding"]=Gl(n,e["child-binding"])),!e.include.length)return e},B0=(n,e,t,i=[])=>{let r=Gl(n,e),s=Gl(n,t);if(!r||!s)return;let o=new Set;Object.keys(r?.properties??{}).forEach(d=>o.add(d)),Object.keys(s?.properties??{}).forEach(d=>o.add(d));let a={};Array.from(o).forEach(d=>{let p=i?.some(_=>_===d)?{}:r.properties?.[d]??{},g=s.properties?.[d]??{};a={...a,[d]:{...p,...g}}}),s.properties=a;let c=new Set;return Object.keys(r).filter(d=>d.endsWith("-cells")).forEach(d=>c.add(d)),Object.keys(r).filter(d=>d.endsWith("-cells")).forEach(d=>c.add(d)),Array.from(c).forEach(d=>{let p=r[d]??[],g=s[d]??[];s[d]=Array.from([...p,...g])}),s},zE=n=>n?typeof n=="string"?[{name:n}]:n.map(e=>typeof e!="string"?e:{name:e}):[],ap=class n{constructor(){this.typeCache=[];this.readFolders=[]}static getNodeCompatible(e){let i=e.getProperty("compatible")?.ast.values;if(!i?.values.some(r=>!(r?.value instanceof mt)))return i?.values.map(r=>(r?.value).value)}getNodeTypes(e,t){let i=n.getNodeCompatible(t);if(!i)return[qi()];let r=this.typeCache.filter(o=>e.some(a=>i.some(c=>c===o.compatible)&&o.bindingsPath?.startsWith(a)));if(r.length)return r;this.loadTypeAndCache(e);let s=this.typeCache.filter(o=>e.some(a=>i.some(c=>c===o.compatible)&&o.bindingsPath?.startsWith(a)));return s.length?s:[qi()]}loadTypeAndCache(e){e.forEach(t=>{if(this.readFolders.indexOf(t)!==-1)return;this.readFolders.push(t);let r=Yl.sync("**/*.yaml",{cwd:t,ignore:"test/*"}).map(o=>{o=(0,vo.resolve)(t,o);try{let a=YE.default.parse((0,KE.readFileSync)(o,"utf-8"));return{...a,include:zE(a.include),filePath:o}}catch(a){console.warn(a)}}).filter(o=>!!o),s=r.map(o=>Gl(r,o)).filter(o=>!!o&&!o.include.length);this.typeCache.push(...j0(s))})}},VE,GE=()=>(VE??=new ap,VE),j0=n=>n.map(XE),XE=n=>{let e=qi();e.compatible=n.compatible??(n.filePath?(0,vo.basename)(n.filePath,"yaml"):void 0),e.description=n.description,e.bindingsPath=n.filePath,e.bus=typeof n.bus=="string"?[n.bus]:n.bus,e.onBus=n["on-bus"];let i=Object.keys(n).filter(r=>r.endsWith("-cells")).map(r=>({specifier:r.replace(/-cells$/,""),values:n[r]}));return n.properties&&Object.keys(n.properties).forEach(r=>{let s=n.properties[r];U0(e,r,s),e.cellsValues=i}),n["child-binding"]&&(e.childNodeType=XE(n["child-binding"])),e},U0=(n,e,t)=>{let i=n.properties.find(r=>typeof r.name=="string"&&r.getNameMatch(e));if(i){i.required=()=>t.required?"required":"optional",i.values=()=>t.enum??[],i.constValue=WE(t.type,t.const);let r=i.additionalTypeCheck;i.additionalTypeCheck=s=>[...HE(t,e)(s),...r?.(s)??[]]}else{let r=new K(e,F0(t.type),t.required?"required":"optional",void 0,t.enum,HE(t,e));r.desctiption=t.description?[t.description]:void 0,r.constValue=WE(t.type,t.const),n.addProperty(r)}},HE=(n,e)=>{let t=n;return i=>{let r=i.parent.root,s=[];if(t.const){let o=i.ast.quickValues;if(o?.length==1){let a=Array.isArray(t.const)?t.const:[t.const];Array.isArray(o[0])&&a.length===o[0].length&&o[0].every((l,u)=>typeof l=="number"&&Number.isNaN(l)||a[u]===l)||s.push(A(26,i.ast.values??i.ast,Pn.DiagnosticSeverity.Error,[],[],[`Binding expects values to be "${t.type}" with value: ${t.const}`]))}}if(t.deprecated&&s.push(A(15,i.ast,Pn.DiagnosticSeverity.Warning,[],[Pn.DiagnosticTag.Deprecated],[i.name])),(t.type==="phandle"||t.type==="phandles"||t.type==="path")&&Et(i.ast.values)?.forEach(a=>{on(a,r)||s.push(A(24,a,Pn.DiagnosticSeverity.Error))}),t.type==="path"&&i.ast.values?.values.at(0)?.value instanceof mt){let o=i.ast.values?.values.at(0)?.value,a=[];o.value.split("/").every(c=>{let l=r.getNode(c);return l?a.push(c):s.push(A(25,o,Pn.DiagnosticSeverity.Error,[],[],[c,`/${a.join("/")}`])),!l})}if(t.type==="phandle-array"){let o=Et(i.ast.values),a=0;for(;o&&a<o.length;){let c=o[a],l=on(c,r);if(!l){s.push(A(24,c,Pn.DiagnosticSeverity.Error));break}let u=e.endsWith("es")?e.slice(0,-2):e.slice(0,-1);u.endsWith("-gpio")&&(u="gpio");let d=l.getProperty(`#${u}-cells`);if(!d){s.push(A(17,i.ast,Pn.DiagnosticSeverity.Error,[...l.nodeNameOrLabelRef],[],[i.name,`#${u}-cells`,`/${l.path.slice(1).join("/")}`]));break}let p=d?_e(d,0,0)??0:0;if(1+p>o.length-a){let g=l.nodeType?.cellsValues?.find(_=>_.specifier===u)?.values;s.push(A(21,c,Pn.DiagnosticSeverity.Error,[],[],[i.name,`<${["phandel",...g??[],...Array.from({length:p-(g?.length??0)},()=>"cell")].join(" ")}>`]));break}a+=1+p}}return s}};var Xl=(n,e)=>({getNodeTypes:t=>{switch(e){case"Zephyr":return GE().getNodeTypes(n,t)}}});var ge=[],es,cp,Un=new WeakMap,$0=n=>{let e=Un.get(n);if(!e?.abort.signal.aborted)return e?.promise},Bt=async()=>{await tN,await Promise.all(ge.map($0))},lp=n=>ge.filter(e=>{let t=n.contexts.find(i=>i.dtsFile===e.parser.uri);return!t||!t.overlays.every(i=>e.overlays.some(r=>r===i))}),W0=n=>ge.filter(e=>{let t=n.contexts.find(i=>i.dtsFile===e.parser.uri);return!!t&&t.overlays.every(i=>e.overlays.some(r=>r===i))}),V0=async(n,e)=>{if(n===e)return!0;let t=(await n.getOrderedParsers()).map(r=>r.uri),i=(await e.getOrderedParsers()).map(r=>r.uri);return t.every(r=>i.some(s=>s===r))},QE=async n=>{let e=lp(Se),t=await W0(Se),i=await rc(e),r=(await n.getOrderedParsers()).map(a=>a.uri);if(ge.indexOf(n)===-1)return;let s=await Promise.all(i.flatMap(a=>[...t,...e.filter(c=>c!==a.context)].map(async c=>({context:a.context,same:await V0(a.context,c)})))),o=i.filter(a=>s.some(c=>c.context===a.context&&c.same)||a.context!==n&&a.context.parser.uri===n.parser.uri&&r.some(c=>a.files.indexOf(c)!==-1)).map(a=>a.context);o.length&&(o.forEach(a=>{Un.delete(a),console.log(`cleaning up context with id ${ge.indexOf(a)} and uri ${a.parser.uri}`)}),ge=ge.filter(a=>o.indexOf(a)===-1))},Pe=(0,Qe.createConnection)(Qe.ProposedFeatures.all),So=new Qe.TextDocuments(tc),fp=!0,up=!1;Pe.onInitialize(n=>{let e=n.capabilities;fp=!!(e.workspace&&e.workspace.configuration),up=!!(e.workspace&&e.workspace.workspaceFolders);let t={capabilities:{textDocumentSync:Qe.TextDocumentSyncKind.Incremental,renameProvider:{prepareProvider:!0},completionProvider:{resolveProvider:!0,triggerCharacters:["&","="," "]},diagnosticProvider:{interFileDependencies:!0,workspaceDiagnostics:!0},codeActionProvider:{codeActionKinds:[Qe.CodeActionKind.QuickFix,Qe.CodeActionKind.SourceFixAll]},documentSymbolProvider:!0,semanticTokensProvider:{legend:{tokenTypes:nc,tokenModifiers:ic},full:!0},documentLinkProvider:{resolveProvider:!1},definitionProvider:!0,declarationProvider:!0,referencesProvider:!0,documentFormattingProvider:!0,hoverProvider:!0}};return up&&(t.capabilities.workspace={workspaceFolders:{supported:!0}}),t});Pe.onInitialized(()=>{fp&&Pe.client.register(Qe.DidChangeConfigurationNotification.type,{}),up&&Pe.workspace.onDidChangeWorkspaceFolders(n=>{Pe.console.log("Workspace folder change event received.")})});var JE={defaultBindingType:"Zephyr",defaultZephyrBindings:[],defaultIncludePaths:[],contexts:[],lockRenameEdits:[]},Se=JE,ZE=new Map,eN=!1,tN=new Promise(n=>{let e=setInterval(()=>{eN&&(n(),clearInterval(e))},100)});Pe.onDidChangeConfiguration(n=>{if(eN=!0,!n.settings)return;console.log("onDidChangeConfiguration",n),fp&&ZE.clear();let e=Se;Se={...JE,...n.settings?.deviceTree};let t=lp(e);ge=[],Un=new WeakMap,Se.contexts.forEach((i,r)=>{let s=new Cr(i.dtsFile,i.includePaths??Se.defaultIncludePaths,Xl(i.zephyrBindings??Se.defaultZephyrBindings,i.bindingType??Se.defaultBindingType),i.overlays);ge.push(s),console.log(`New context with id ${r} for ${i.dtsFile}`)}),ge=[...ge,...t.map((i,r)=>(console.log(`New context with id ${r+ge.length} for ${i.parser.uri}`),new Cr(i.parser.uri,Se.defaultIncludePaths,Xl(Se.defaultZephyrBindings,Se.defaultBindingType))))],t=lp(Se),t.forEach(QE),cp&&dp(cp),Pe.languages.diagnostics.refresh()});So.onDidClose(n=>{ZE.delete(n.document.uri)});Pe.languages.diagnostics.on(async n=>{let e=n.textDocument.uri.replace("file://","");await Bt();let t=await es;return{kind:Qe.DocumentDiagnosticReportKind.Full,items:t?await nN(t,e):[]}});var H0=n=>{switch(n){case 0:return"Expected Value";case 1:return"Expected ';'";case 2:return"Expected '{'";case 3:return"Expected '}'";case 4:return"Expected '['";case 5:return"Expected ']'";case 6:return"Expected property name";case 7:return"Expected node name";case 8:return"Expected node address";case 9:return"Expected node definition";case 10:return"Expected property definition";case 11:return"Expected numerical value";case 12:return"Expected node path";case 13:return"Expected node ref";case 14:return"Expected root node name";case 15:return"Expected '>'";case 16:return"Expected '<'";case 17:return"Expected bytes string ";case 18:return"Expected two digits in bytestring";case 19:return`Expected '"'`;case 20:return"Expected '\\''";case 21:return"Expected valid node path";case 22:return"Expected Label name";case 23:return"Expected '/' in the state of a node path";case 24:return"Expected hex values are not allowed";case 25:return"Missing '/'";case 27:return"Found ';' without a statement";case 28:return"Missing ':' for label assign";case 29:return"Did you mean /delete-node/ or /delete-property/";case 40:return"Did you mean /delete-node/";case 41:return"Did you mean /delete-property/";case 26:return"Unknown syntax";case 31:return"Expected expression";case 30:return'Expected "("';case 32:return"Invalid include Syntax";case 33:return'Missing ","';case 36:return"Expected Macro Identifier";case 35:return"Expected Macro Identifier or Function like Macro";case 34:return"White space is not allowed";case 37:return"Expected Value";case 38:return"Properties can only be defined in a node.";case 39:return"Properties can only be deleted inside a node."}},Y0=n=>n.issues.map(e=>{switch(e){case 0:return`Property "${n.templateStrings[0]}" is replaced by a later definition.`;case 1:return"Cannot delete a property before it has been defined";case 2:return"Node name already defined";case 3:return`No node with that reference "${n.templateStrings[0]}" has been defined`;case 8:return`No node with name "${n.templateStrings[0]}" could be found in "/${n.templateStrings[1]}".`;case 4:return`Label name "${n.templateStrings[0]}" already defined`;case 6:return`Property "${n.templateStrings[0]}" was deleted.`;case 7:return`Node "${n.templateStrings[0]}" was deleted.`;case 5:return"Cannot delete a node before it has been defined"}}).join(" or "),K0=n=>{switch(n){case 0:return"Property name already defined.";case 1:return"Cannot delete a property before it has been defined";case 2:return"Node name already defined";case 3:return"No node with that reference has been defined";case 4:return"Label already defined here";case 5:return"Cannot delete a node before it has been defined"}},z0=n=>n.issues.map(e=>{switch(e){case 9:return`Only these value are allowed ${n.templateStrings[0]}.`;case 1:return"INTRO should be empty";case 8:return"INTRO can only be assigned one value";case 5:return"INTRO should be assigned a U32";case 6:return"INTRO should be assigned a U64";case 7:return"INTRO should be assigned a 'property encoded array'";case 2:return"INTRO should be assigned a string";case 3:return"INTRO should be assigned a string list";case 4:return`INTRO expects ${n.templateStrings[1]} values`;case 0:return"INTRO is required.";case 12:return"INTRO should be omitted";case 10:return"INTRO must have pair";case 11:return"INTRO first value must match node address";case 13:return"INTRO should be 'cpu'";case 14:return"INTRO should be 'memory'";case 15:return"INTRO is deprecated and should not be used'";case 16:return`INTRO ${n.templateStrings[1]}'`;case 20:return"INTRO value must be unique in the entire device tree";case 21:return`INTRO should have format ${n.templateStrings[1]}`;case 17:return`INTRO requires property "${n.templateStrings[1]}" in node path "${n.templateStrings[2]}"`;case 19:return"Unable to resolve interrupt parent node";case 18:return`INTRO expects ${n.templateStrings[1]} interrupts cells`;case 22:return`INTRO should have format ${n.templateStrings[1]}`;case 23:return"Node is diabled";case 24:return"Unable to resolve handel";case 25:return`Unable to find "${n.templateStrings[0]}" in ${n.templateStrings[1]}`;case 26:return n.templateStrings[0]}}).join(" or ").replace("INTRO",`Property "${n.templateStrings[0]}"`).replaceAll("INTRO ",""),G0=n=>{switch(n){case 17:return"Nodes";case 18:return"Property";case 16:return"Ignored reason";case 20:return"Conflicting Properties";case 8:return"Additional value";case 0:return"Nodes";case 23:return"Disabled by";default:return"TODO"}};So.onDidChangeContent(async n=>{console.log("onDidChangeContent");let e=n.document.uri.replace("file://","");ci().renewLexer(e,n.document.getText()),await tN;let t=await zb(ge,e);if(t.length)t.forEach(i=>{Un.get(i.context)?.abort.abort();let r=new AbortController,s=new Promise(o=>{setTimeout(async()=>{if(r.signal.aborted){o();return}let a=performance.now();Ql.delete(i.context),await i.context.revaluate(e),o(),console.log("revaluate",performance.now()-a)},50)});Un.set(i.context,{abort:r,promise:s})});else{let i=new Cr(e,Se.defaultIncludePaths,Xl(Se.defaultZephyrBindings,Se.defaultBindingType));console.log(`New adhoc context with id ${i.id} for ${e}`),ge.push(i),await i.parser.stable,QE(i),dp(e)}});Pe.languages.diagnostics.onWorkspace(async()=>{await Bt();let n=await es;if(!n)return{items:[]};let e=await n.getOrderedParsers(),t=await Promise.all(e.map(async r=>{let s=await nN(n,r.uri);return{uri:`file://${r.uri}`,kind:Qe.DocumentDiagnosticReportKind.Full,items:s,version:So.get(`file://${r.uri}`)?.version??null}})),i=await Promise.all(ge.filter(r=>r!==n).flatMap(async r=>{let s=await r.getOrderedParsers();return await Promise.all(s.flatMap(async o=>({uri:`file://${o.uri}`,kind:Qe.DocumentDiagnosticReportKind.Full,items:[],version:So.get(`file://${o.uri}`)?.version??null})))}));return{items:[...t,...i.flat()]}});var Ql=new WeakMap;async function nN(n,e){let t=performance.now(),i=Ql.get(n);if(i){let r=i.get(e);if(r)return r}else Ql.set(n,new Map);try{let r=[],s=Un.get(n);return s?.abort.signal.aborted?[]:(await s?.promise,(await n.getParser(e))?.issues.forEach(l=>{let u={severity:l.severity,range:ne(l.astElement),message:l.issues?l.issues.map(H0).join(" or "):"",source:"device tree",data:{firstToken:{pos:l.astElement.firstToken.pos,tokens:l.astElement.firstToken.tokens,value:l.astElement.firstToken.value},lastToken:{pos:l.astElement.lastToken.pos,tokens:l.astElement.lastToken.tokens,value:l.astElement.lastToken.value},issues:l.issues}};r.push(u)}),(await n.getContextIssues()??[]).filter(l=>l.astElement.uri===e).forEach(l=>{let u={severity:l.severity,range:ne(l.astElement),message:Y0(l),source:"device tree",tags:l.tags,relatedInformation:[...l.linkedTo.map(d=>({message:l.issues.map(K0).join(" or "),location:{uri:`file://${d.uri}`,range:ne(d)}}))]};r.push(u)}),(await n.getRuntime())?.typesIssues.filter(l=>l.astElement.uri===e).forEach(l=>{let u={severity:l.severity,range:ne(l.astElement),message:z0(l),relatedInformation:[...l.linkedTo.map(d=>({message:l.issues.map(G0).join(" or "),location:{uri:`file://${d.uri}`,range:ne(d)}}))],source:"device tree",tags:l.tags};r.push(u)}),console.log("diagnostics",e,performance.now()-t),Ql.get(n)?.set(e,r),r)}catch(r){throw console.error(r),r}}Pe.onDidChangeWatchedFiles(n=>{Pe.console.log("We received a file change event")});Pe.onCompletion(async n=>(await Bt(),ge?[...await UT(n,ge,Se.preferredContext),...await ev(n,ge,Se.preferredContext)]:[]));Pe.onCompletionResolve(n=>n);So.listen(Pe);Pe.listen();var dp=async n=>{cp=n,await Bt();let e=await es;es=ks(ge,n,Se.preferredContext).then(i=>i?.context);let t=await es;e!==t&&(console.log(`(id: ${t?.id??-1}) activeContext:`,t?.parser.uri),ge.forEach((i,r)=>{console.log(`Context with id ${i.id} for ${i.parser.uri}`)}))};Pe.onDocumentSymbol(async n=>{let e=n.textDocument.uri.replace("file://","");dp(e);let t=await es;if(t){let r=Un.get(t);if(r?.abort.signal.aborted)return[];await r?.promise}let i=await t?.getParser(e);return i?i.getDocumentSymbols():[]});Pe.languages.semanticTokens.on(async n=>{let e=n.textDocument.uri.replace("file://",""),t=new Qe.SemanticTokensBuilder;await Bt();let i=await ks(ge,e,Se.preferredContext),r=await i?.context.getParser(e);if(!r)return{data:[]};if(i){let s=Un.get(i.context);if(s?.abort.signal.aborted)return{data:[]};await s?.promise}return r?.buildSemanticTokens(t),t.build()});Pe.onDocumentLinks(async n=>{let e=n.textDocument.uri.replace("file://","");await Bt();let t=await ks(ge,e,Se.preferredContext);if(t){let i=Un.get(t.context);if(i?.abort.signal.aborted)return[];await i?.promise}return t?.context.getDocumentLinks(e)});Pe.onPrepareRename(async n=>(await Bt(),KT(n,ge,Se.lockRenameEdits,Se.preferredContext)));Pe.onRenameRequest(async n=>(await Bt(),YT(n,ge,Se.preferredContext)));Pe.onReferences(async n=>(await Bt(),$T(n,ge,Se.preferredContext)));Pe.onDefinition(async n=>(await Bt(),zT(n,ge,Se.preferredContext)));Pe.onDeclaration(async n=>(await Bt(),GT(n,ge,Se.preferredContext)));Pe.onCodeAction(n=>XT(n));Pe.onDocumentFormatting(async n=>(await Bt(),QT(n,ge)));Pe.onHover(async n=>(await Bt(),(await tv(n,ge,Se.preferredContext)).at(0)));
